'use strict';define('core/mustache_component_vdom',['core/virtual-html','core/virtual-dom','core/vdom-virtualise','core/templates','core/mobx'],function(VirtualHTML,VirtualDOM,VDOMVirtualise,Templates,MobX){var MustacheComponent=function(rootElement,templateName,templateContext){this.hasMounted=!1,this.rootElement=rootElement,this.templateName=templateName,this.state=MobX.observable(templateContext),this.tree=VDOMVirtualise.virtualise(rootElement),MobX.autorun(this.render.bind(this))};return MustacheComponent.prototype.getTemplateContext=function(){return this.state},MustacheComponent.prototype.registerEventListeners=function(){},MustacheComponent.prototype.render=function(){var start=Date.now();return Templates.render(this.templateName,MobX.toJS(this.getTemplateContext())).then(function(html){var now=Date.now();console.log('Mustache render: '+(now-start)),start=now;var newTree=VirtualHTML.virtualHTML(html),patches=VirtualDOM.diff(this.tree,newTree);VirtualDOM.patch(this.rootElement,patches),this.tree=newTree}.bind(this)).then(function(){var now=Date.now();console.log('VDOM render: '+(now-start)),start=now,this.hasMounted||(this.registerEventListeners(),this.hasMounted=!0)}.bind(this))},MustacheComponent});
//# sourceMappingURL=mustache_component_vdom.min.js.map
