'use strict';define('core/paged_content_paging_bar',['jquery','core/custom_interaction_events','core/paged_content_events'],function($,CustomEvents,PagedContentEvents){var SELECTORS={ROOT:'[data-region="paging-bar"]',PAGE:'[data-page]',PAGE_ITEM:'[data-region="page-item"]',ACTIVE_PAGE_ITEM:'[data-region="page-item"].active'},getPageByNumber=function(root,pageNumber){return root.find(SELECTORS.PAGE_ITEM+'[data-page-number="'+pageNumber+'"]')},getLastPageNumber=function(root){var lastPage=root.find(SELECTORS.PAGE).last();return lastPage?parseInt(lastPage.attr('data-page-number'),10):null},getActivePageNumber=function(root){var activePage=root.find(SELECTORS.ACTIVE_PAGE_ITEM);return activePage.length?getPageNumber(root,activePage):null},getPageNumber=function(root,page){if(page.attr('data-page')!=null)return parseInt(page.attr('data-page-number'),10);var pageNumber=1,activePageNumber=null;switch(page.attr('data-control')){case'first':pageNumber=1;break;case'last':pageNumber=getLastPageNumber(root);break;case'next':activePageNumber=getActivePageNumber(root);var lastPage=getLastPageNumber(root);pageNumber=activePageNumber&&activePageNumber<lastPage?activePageNumber+1:lastPage;break;case'previous':activePageNumber=getActivePageNumber(root),pageNumber=activePageNumber&&1<activePageNumber?activePageNumber-1:1;break;default:pageNumber=1;}return parseInt(pageNumber,10)},getLimit=function(root){return parseInt(root.attr('data-items-per-page'),10)},generatePageNumbers=function(items){items.each(function(index,item){item=$(item),item.attr('data-page-number',index+1)})},showPage=function(root,pageNumber){var isSamePage=pageNumber==getActivePageNumber(root),limit=getLimit(root);if(!isSamePage){root.find(SELECTORS.PAGE_ITEM).removeClass('active');var page=getPageByNumber(root,pageNumber);page.addClass('active')}root.trigger(PagedContentEvents.SHOW_PAGES,[[{pageNumber:pageNumber,limit:limit,offset:(pageNumber-1)*limit}]])};return{init:function init(root){root=$(root);var pages=root.find(SELECTORS.PAGE);generatePageNumbers(pages);var activePageNumber=getActivePageNumber(root);activePageNumber&&showPage(root,activePageNumber),CustomEvents.define(root,[CustomEvents.events.activate]),root.on(CustomEvents.events.activate,SELECTORS.PAGE_ITEM,function(e,data){var page=$(e.target).closest(SELECTORS.PAGE_ITEM),pageNumber=getPageNumber(root,page);showPage(root,pageNumber),data.originalEvent.preventDefault(),data.originalEvent.stopPropagation()})},rootSelector:SELECTORS.ROOT}});
//# sourceMappingURL=paged_content_paging_bar.min.js.map
