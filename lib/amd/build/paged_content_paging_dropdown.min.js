'use strict';define('core/paged_content_paging_dropdown',['jquery','core/custom_interaction_events','core/paged_content_events'],function($,CustomEvents,PagedContentEvents){var SELECTORS={ROOT:'[data-region="paging-dropdown-container"]',DROPDOWN_ITEM:'[data-region="dropdown-item"]',DROPDOWN_TOGGLE:'[data-region="dropdown-toggle"]',ACTIVE_DROPDOWN_ITEM:'[data-region="dropdown-item"].active',CARET:'[data-region="caret"]'},getPageNumber=function(item){return parseInt(item.attr('data-page-number'),10)},getAllItems=function(root){return root.find(SELECTORS.DROPDOWN_ITEM)},getPreviousItems=function(root,item){var pageNumber=getPageNumber(item);return getAllItems(root).filter(function(index,element){return getPageNumber($(element))<pageNumber})},getLimit=function(item){return parseInt(item.attr('data-item-count'),10)},getOffset=function(root,item){if(null!=item.attr('data-offset'))return parseInt(item.attr('data-offset'),10);var offset=0;return getPreviousItems(root,item).each(function(index,prevItem){prevItem=$(prevItem),offset+=getLimit(prevItem)}),item.attr('data-offset',offset),offset},getActiveItem=function(root){return root.find(SELECTORS.ACTIVE_DROPDOWN_ITEM)},generateEventPayload=function(root,items){return items.map(function(index,item){return item=$(item),{pageNumber:getPageNumber(item),limit:getLimit(item),offset:getOffset(root,item)}}).get()},generatePageNumbers=function(items){items.each(function(index,item){item=$(item),item.attr('data-page-number',index+1)})},setActiveItem=function(root,item){var prevItems=getPreviousItems(root,item),allItems=prevItems.add(item),eventPayload=generateEventPayload(root,allItems),toggle=root.find(SELECTORS.DROPDOWN_TOGGLE),caret=toggle.find(SELECTORS.CARET);getActiveItem(root).removeClass('active'),item.addClass('active'),toggle.html(item.text()),toggle.append(caret),root.trigger(PagedContentEvents.SHOW_PAGES,[eventPayload])};return{init:function init(root){root=$(root);var items=getAllItems(root);generatePageNumbers(items);var activeItem=getActiveItem(root);activeItem.length&&setActiveItem(root,activeItem),CustomEvents.define(root,[CustomEvents.events.activate]),root.on(CustomEvents.events.activate,SELECTORS.DROPDOWN_ITEM,function(e,data){var item=$(e.target).closest(SELECTORS.DROPDOWN_ITEM);setActiveItem(root,item),data.originalEvent.preventDefault()})},rootSelector:SELECTORS.ROOT}});
//# sourceMappingURL=paged_content_paging_dropdown.min.js.map
