define("core/truncate",["jquery"],function(a){var b=/(\s*\S+|\s)$/,c=/^(\S*)/,d=/\s/,e=function(a,b){if(null==this){throw TypeError()}var c=a+"",d=c.length,e=b?+b:0;if(e!=e){e=0}if(-1>=e||e>=d){return""}e=0|e;var f=c.charCodeAt(e),g,h=e+1,i=1;if(55296<=f&&56319>=f&&d>h){g=c.charCodeAt(h);if(56320<=g&&57343>=g){i=2}}return i},f=function(a){for(var b=0,c=0;c<a.length;c+=e(a,c)){b++}return b},g=function(a,b){if(!a.length){return 0}var c=0,d=0;do{c+=e(a,c);d++}while(c<a.length&&d<b);return c};a.truncate=function(b,c){return a("<div></div>").append(b).truncate(c).html()};a.fn.truncate=function(e){if(a.isNumeric(e))e={length:e};var h=a.extend({},a.truncate.defaults,e);return this.each(function(){var e=a(this);if(h.noBreaks)e.find("br").replaceWith(" ");var j=h.ellipsis.length,i=e.text(),k=f(i),l=k-h.length+j;if(k<h.length)return;if(h.stripTags)e.text(i);if(h.words&&0<l){var m=i.slice(0,g(i,h.length-j)+1),n=m.replace(b,""),o=f(n),p=m.match(d)?!1:!0;if(h.keepFirstWord&&0===o){l=k-f(c.exec(i)[0])-j}else if(p&&0===o){l=k-h.length+j}else{l=k-o-1}}if(l>k){l=k-h.length}if(0>l||!l&&!h.truncated)return;a.each(e.contents().get().reverse(),function(b,c){var d=a(c),e=d.text(),i=f(e);if(i<=l){h.truncated=!0;l-=i;d.remove();return}if(3===c.nodeType){var k=i-l;k=0<=k?g(e,k):0;a(c.splitText(k)).replaceWith(h.ellipsis);return!1}d.truncate(a.extend(h,{length:i-l+j}));return!1})})};a.truncate.defaults={stripTags:!1,words:!1,keepFirstWord:!1,noBreaks:!1,length:1/0,ellipsis:"\u2026"};return{truncate:a.truncate}});
//# sourceMappingURL=truncate.min.js.map
