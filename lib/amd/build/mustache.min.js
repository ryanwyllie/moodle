function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&exports&&"string"!=typeof exports.nodeName){b(exports)}else if("function"==typeof define&&define.amd){define ("core/mustache",["exports"],b)}else{a.Mustache={};b(a.Mustache)}})(this,function(a){var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)};function b(a){return"function"==typeof a}function c(a){return p(a)?"array":_typeof(a)}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"===_typeof(a)&&b in a}var q=RegExp.prototype.test;function f(a,b){return q.call(a,b)}var r=/\S/;function g(a){return!f(r,a)}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,v=/\s+/,w=/\s*=/,x=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!|\$|</;function h(b,c){if(!b)return[];var h=[],m=[],n=[],o=!1,q=!1;function e(){if(o&&!q){while(n.length){delete m[n.pop()]}}else{n=[]}o=!1;q=!1}var r,s,t;function f(a){if("string"==typeof a)a=a.split(v,2);if(!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);r=new RegExp(d(a[0])+"\\s*");s=new RegExp("\\s*"+d(a[1]));t=new RegExp("\\s*"+d("}"+a[1]))}f(c||a.tags);var z=new l(b),A,B,C,D,E,F;while(!z.eos()){A=z.pos;C=z.scanUntil(r);if(C){for(var G=0,H=C.length;G<H;++G){D=C.charAt(G);if(g(D)){n.push(m.length)}else{q=!0}m.push(["text",D,A,A+1]);A+=1;if("\n"===D)e()}}if(!z.scan(r))break;o=!0;B=z.scan(y)||"name";z.scan(u);if("="===B){C=z.scanUntil(w);z.scan(w);z.scanUntil(s)}else if("{"===B){C=z.scanUntil(t);z.scan(x);z.scanUntil(s);B="&"}else{C=z.scanUntil(s)}if(!z.scan(s))throw new Error("Unclosed tag at "+z.pos);E=[B,C,A,z.pos];m.push(E);if("#"===B||"^"===B||"$"===B||"<"===B){h.push(E)}else if("/"===B){F=h.pop();if(!F)throw new Error("Unopened section \""+C+"\" at "+A);if(F[1]!==C)throw new Error("Unclosed section \""+F[1]+"\" at "+A)}else if("name"===B||"{"===B||"&"===B){q=!0}else if("="===B){f(C)}}F=h.pop();if(F)throw new Error("Unclosed section \""+F[1]+"\" at "+z.pos);return k(j(m))}function j(a){for(var b=[],c,d,e=0,f=a.length;e<f;++e){c=a[e];if(c){if("text"===c[0]&&d&&"text"===d[0]){d[1]+=c[1];d[3]=c[3]}else{b.push(c);d=c}}}return b}function k(a){for(var b=[],c=b,d=[],e,f,g=0,h=a.length;g<h;++g){e=a[g];switch(e[0]){case"$":case"<":case"#":case"^":c.push(e);d.push(e);c=e[4]=[];break;case"/":f=d.pop();f[5]=e[2];c=0<d.length?d[d.length-1][4]:b;break;default:c.push(e);}}return b}function l(a){this.string=a;this.tail=a;this.pos=0}l.prototype.eos=function(){return""===this.tail};l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];this.tail=this.tail.substring(c.length);this.pos+=c.length;return c};l.prototype.scanUntil=function(a){var b=this.tail.search(a),c;switch(b){case-1:c=this.tail;this.tail="";break;case 0:c="";break;default:c=this.tail.substring(0,b);this.tail=this.tail.substring(b);}this.pos+=c.length;return c};function m(a,b){this.view=a;this.blocks={};this.cache={".":this.view};this.parent=b}m.prototype.push=function(a){return new m(a,this)};m.prototype.setBlockVar=function(a,b){var c=this.blocks;c[a]=b;return b};m.prototype.clearBlockVars=function(){this.blocks={}};m.prototype.getBlockVar=function(a){var b=this.blocks,c;if(b.hasOwnProperty(a)){c=b[a]}else{if(this.parent){c=this.parent.getBlockVar(a)}}return c};m.prototype.lookup=function(a){var c=this.cache,d;if(c.hasOwnProperty(a)){d=c[a]}else{var f=this,g,h,i=!1;while(f){if(0<a.indexOf(".")){d=f.view;g=a.split(".");h=0;while(null!=d&&h<g.length){if(h===g.length-1)i=e(d,g[h]);d=d[g[h++]]}}else{d=f.view[a];i=e(f.view,a)}if(i)break;f=f.parent}c[a]=d}if(b(d))d=d.call(this.view);return d};function n(){this.cache={}}n.prototype.clearCache=function(){this.cache={}};n.prototype.parse=function(b,c){var d=this.cache,e=d[b];if(null==e)e=d[b+":"+(c||a.tags).join(":")]=h(b,c);return e};n.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof m?b:new m(b);return this.renderTokens(d,e,c,a)};n.prototype.renderTokens=function(a,b,c,d){for(var e="",f,g,h,j=0,k=a.length;j<k;++j){h=void 0;f=a[j];g=f[0];if("#"===g)h=this.renderSection(f,b,c,d);else if("^"===g)h=this.renderInverted(f,b,c,d);else if(">"===g)h=this.renderPartial(f,b,c,d);else if("<"===g)h=this.renderBlock(f,b,c,d);else if("$"===g)h=this.renderBlockVariable(f,b,c,d);else if("&"===g)h=this.unescapedValue(f,b);else if("name"===g)h=this.escapedValue(f,b);else if("text"===g)h=this.rawValue(f);if(h!==void 0)e+=h}return e};n.prototype.renderSection=function(a,c,d,e){var g=this,h="",i=c.lookup(a[1]);function f(a){return g.render(a,c,d)}if(!i)return;if(p(i)){for(var k=0,l=i.length;k<l;++k){h+=this.renderTokens(a[4],c.push(i[k]),d,e)}}else if("object"===_typeof(i)||"string"==typeof i||"number"==typeof i){h+=this.renderTokens(a[4],c.push(i),d,e)}else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f);if(null!=i)h+=i}else{h+=this.renderTokens(a[4],c,d,e)}return h};n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);if(!e||p(e)&&0===e.length)return this.renderTokens(a[4],b,c,d)};n.prototype.renderPartial=function(a,c,d){if(!d)return;var e=b(d)?d(a[1]):d[a[1]];if(null!=e)return this.renderTokens(this.parse(e),c,d,e)};n.prototype.renderBlock=function(a,c,d,e){if(!d)return;var f=b(d)?d(a[1]):d[a[1]];if(null!=f)c.clearBlockVars();this.renderTokens(a[4],c,d,e);var g=this.renderTokens(this.parse(f),c,d,f);c.clearBlockVars();return g};n.prototype.renderBlockVariable=function(a,b,c,d){var e=a[1],f=b.getBlockVar(e);if(!f){b.setBlockVar(e,d.slice(a[3],a[5]));return this.renderTokens(a[4],b,c,d)}else{return this.renderTokens(this.parse(f),b,c,f)}};n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);if(null!=c)return c};n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);if(null!=d)return a.escape(d)};n.prototype.rawValue=function(a){return a[1]};a.name="mustache.js";a.version="2.3.0";a.tags=["{{","}}"];var z=new n;a.clearCache=function(){return z.clearCache()};a.parse=function(a,b){return z.parse(a,b)};a.render=function(a,b,d){if("string"!=typeof a){throw new TypeError("Invalid template! Template should be a \"string\" but \""+c(a)+"\" was given as the first argument for mustache#render(template, view, partials)")}return z.render(a,b,d)};a.to_html=function(c,d,e,f){var g=a.render(c,d,e);if(b(f)){f(g)}else{return g}};a.escape=function(a){return(a+"").replace(/[&<>"'`=\/]/g,function(a){return t[a]})};a.Scanner=l;a.Context=m;a.Writer=n;return a});
//# sourceMappingURL=mustache.min.js.map
