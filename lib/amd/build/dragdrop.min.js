define("core/dragdrop",["jquery","core/autoscroll"],function(a,b){var c=Math.min,d={eventCaptureOptions:{passive:!1,capture:!0},dragProxy:null,onMove:null,onDrop:null,initialPosition:null,initialX:null,initialY:null,touching:null,prepare:function prepare(a){a.preventDefault();var b;if("touchstart"===a.type){b=null===d.touching&&0<a.changedTouches.length}else{b=1===a.which}if(b){var c=d.getEventXY(a);c.start=!0;return c}else{return{start:!1}}},start:function start(a,c,e,f){var g=d.getEventXY(a);d.initialX=g.x;d.initialY=g.y;d.initialPosition=c.offset();d.dragProxy=c;d.onMove=e;d.onDrop=f;switch(a.type){case"mousedown":d.addEventSpecial("mousemove",d.mouseMove);d.addEventSpecial("mouseup",d.mouseUp);break;case"touchstart":d.addEventSpecial("touchend",d.touchEnd);d.addEventSpecial("touchcancel",d.touchEnd);d.addEventSpecial("touchmove",d.touchMove);d.touching=a.changedTouches[0].identifier;break;default:throw new Error("Unexpected event type: "+a.type);}b.start(d.scroll)},addEventSpecial:function addEventSpecial(a,b){try{window.addEventListener(a,b,d.eventCaptureOptions)}catch(c){d.eventCaptureOptions=!0;window.addEventListener(a,b,d.eventCaptureOptions)}},getEventXY:function getEventXY(a){switch(a.type){case"touchstart":return{x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY};case"mousedown":return{x:a.pageX,y:a.pageY};default:throw new Error("Unexpected event type: "+a.type);}},touchMove:function touchMove(a){a.preventDefault();for(var b=0;b<a.changedTouches.length;b++){if(a.changedTouches[b].identifier===d.touching){d.handleMove(a.changedTouches[b].pageX,a.changedTouches[b].pageY)}}},mouseMove:function mouseMove(a){d.handleMove(a.pageX,a.pageY)},handleMove:function handleMove(b,e){var f=Math.max,g=d.dragProxy.offset(),h=g.top-parseInt(d.dragProxy.css("top")),i=g.left-parseInt(d.dragProxy.css("left")),j=a(document).height()-d.dragProxy.outerHeight()-h,k=a(document).width()-d.dragProxy.outerWidth()-i,l=d.initialPosition,m={top:f(-h,c(j,l.top+(e-d.initialY)-h)),left:f(-i,c(k,l.left+(b-d.initialX)-i))};d.dragProxy.css(m);d.onMove(b,e,d.dragProxy)},touchEnd:function touchEnd(a){a.preventDefault();for(var b=0;b<a.changedTouches.length;b++){if(a.changedTouches[b].identifier===d.touching){d.handleEnd(a.changedTouches[b].pageX,a.changedTouches[b].pageY)}}},mouseUp:function mouseUp(a){d.handleEnd(a.pageX,a.pageY)},handleEnd:function handleEnd(a,c){if(null!==d.touching){window.removeEventListener("touchend",d.touchEnd,d.eventCaptureOptions);window.removeEventListener("touchcancel",d.touchEnd,d.eventCaptureOptions);window.removeEventListener("touchmove",d.touchMove,d.eventCaptureOptions);d.touching=null}else{window.removeEventListener("mousemove",d.mouseMove,d.eventCaptureOptions);window.removeEventListener("mouseup",d.mouseUp,d.eventCaptureOptions)}b.stop();d.onDrop(a,c,d.dragProxy)},scroll:function scroll(b){var e=a(document).height()-d.dragProxy.outerHeight(),f=d.dragProxy.offset();f.top=c(e,f.top+b);d.dragProxy.css(f)}};return{prepare:d.prepare,start:d.start}});
//# sourceMappingURL=dragdrop.min.js.map
