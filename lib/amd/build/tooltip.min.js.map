{"version":3,"sources":["../src/tooltip.js"],"names":["define","$","Tooltip","selector","_regionSelector","each","index","element","tooltipId","attr","tooltipele","document","getElementById","correctRole","hide","on","_handleFocus","bind","_handleMouseOver","_handleMouseOut","_handleBlur","_handleKeyDown","prototype","_showTooltip","e","triggerElement","target","show","is","inner","append","contents","addClass","pos","offset","top","height","_hideTooltip","which"],"mappings":"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","file":"tooltip.min.js","sourcesContent":["define(['jquery'], function($) {\n\n    /**\n     * Tooltip class.\n     *\n     * @param {String} selector The css selector for the node(s) to enhance with tooltips.\n     */\n    var Tooltip = function(selector) {\n        // Tooltip code matches: http://www.w3.org/WAI/PF/aria-practices/#tooltip\n        this._regionSelector = selector;\n\n        // For each node matching the selector - find an aria-describedby attribute pointing to an role=\"tooltip\" element.\n\n        $(this._regionSelector).each(function(index, element) {\n            var tooltipId = $(element).attr('aria-describedby');\n            if (tooltipId) {\n                var tooltipele = document.getElementById(tooltipId);\n                if (tooltipele) {\n                    var correctRole = $(tooltipele).attr('role') == 'tooltip';\n\n                    if (correctRole) {\n                        $(tooltipele).hide();\n                        // Ensure the trigger for the tooltip is keyboard focusable.\n                        $(element).attr('tabindex', '0');\n                    }\n\n                    // Attach listeners.\n                    $(element).on('focus', this._handleFocus.bind(this));\n                    $(element).on('mouseover', this._handleMouseOver.bind(this));\n                    $(element).on('mouseout', this._handleMouseOut.bind(this));\n                    $(element).on('blur', this._handleBlur.bind(this));\n                    $(element).on('keydown', this._handleKeyDown.bind(this));\n                }\n            }\n        }.bind(this));\n    };\n\n    /** @type {String} Selector for the page region containing the user navigation. */\n    Tooltip.prototype._regionSelector = null;\n\n    /**\n     * Find the tooltip referred to by this element and show it.\n     *\n     * @param {Event} e\n     */\n    Tooltip.prototype._showTooltip = function(e) {\n        var triggerElement = $(e.target);\n        var tooltipId = triggerElement.attr('aria-describedby');\n        if (tooltipId) {\n            var tooltipele = $(document.getElementById(tooltipId));\n\n            tooltipele.show();\n            tooltipele.attr('aria-hidden', 'false');\n\n            if (!tooltipele.is('.tooltip')) {\n                // Change the markup to a bootstrap tooltip.\n                var inner = $('<div class=\"tooltip-inner\"></div>');\n                inner.append(tooltipele.contents());\n                tooltipele.append(inner);\n                tooltipele.addClass('tooltip');\n                tooltipele.addClass('bottom');\n                tooltipele.append('<div class=\"tooltip-arrow\"></div>');\n            }\n            var pos = triggerElement.offset();\n            pos.top += triggerElement.height() + 10;\n            $(tooltipele).offset(pos);\n        }\n    };\n\n    /**\n     * Find the tooltip referred to by this element and hide it.\n     *\n     * @param {Event} e\n     */\n    Tooltip.prototype._hideTooltip = function(e) {\n        var triggerElement = $(e.target);\n        var tooltipId = triggerElement.attr('aria-describedby');\n        if (tooltipId) {\n            var tooltipele = document.getElementById(tooltipId);\n\n            $(tooltipele).hide();\n            $(tooltipele).attr('aria-hidden', 'true');\n        }\n    };\n\n    /**\n     * Listener for focus events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleFocus = function(e) {\n        this._showTooltip(e);\n    };\n\n    /**\n     * Listener for keydown events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleKeyDown = function(e) {\n        if (e.which == 27) {\n            this._hideTooltip(e);\n        }\n    };\n\n    /**\n     * Listener for mouseover events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleMouseOver = function(e) {\n        this._showTooltip(e);\n    };\n\n    /**\n     * Listener for mouseout events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleMouseOut = function(e) {\n        var triggerElement = $(e.target);\n\n        if (!triggerElement.is(\":focus\")) {\n            this._hideTooltip(e);\n        }\n    };\n\n    /**\n     * Listener for blur events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleBlur = function(e) {\n        this._hideTooltip(e);\n    };\n\n    return Tooltip;\n});\n"]}