define(["jquery","core/str"],function(a,b){var c="active",d=37,e=39,f=38,g=40,h=33,i=34,j={TAB:'[role="tab"]',TAB_LIST:'[role="tablist"]'},k=function(b){this.element=a(b),this.element.find("*").each(function(b,c){a(c).attr("tabindex","-1")});var d=this.element.attr("data-target");d.match(/^#/)||(d="#"+d),this.panel=a(d);var e=this.element.attr("data-selected-class");e||(e=c),this.selectedClass=e,this.updateAriaAttributes()};k.prototype.updateAriaAttributes=function(){if(this.isSelected()?this.element.attr("tabindex","0"):(this.element.attr("tabindex","-1"),this.element.attr("aria-selected",!1)),!this.element.attr("aria-controls")){var a=this.panel.attr("id");this.element.attr("aria-controls",a)}this.panel.attr("role")||this.panel.attr("role","tabpanel")},k.prototype.isSelected=function(){return"true"==this.element.attr("aria-selected")?!0:!1},k.prototype.show=function(){this.isSelected()||(this.element.attr("aria-selected",!0),this.element.addClass(this.selectedClass),this.panel.addClass(this.selectedClass),this.updateAriaAttributes(),this.element.trigger({type:"shown"}))},k.prototype.focus=function(){this.show(),this.element.focus()},k.prototype.hide=function(){this.isSelected()&&(this.element.attr("aria-selected",!1),this.element.removeClass(this.selectedClass),this.panel.removeClass(this.selectedClass),this.updateAriaAttributes(),this.element.trigger({type:"hidden"}))};var l=function(b){this.container=a(b),this.listContainer=this.container.find(j.TAB_LIST),this.hasSelectedTab()||this.getFirstTab().show()};l.prototype.getSelectedTab=function(){var a=null;return this.getTabs().each(function(b,c){return c.isSelected()?(a=c,!1):void 0}),a},l.prototype.hasSelectedTab=function(){return this.getSelectedTab()?!0:!1},l.prototype.getTabs=function(){var b=[];return this.listContainer.find(j.TAB).each(function(a,c){var d=new k(c);b.push(d)}),a(b)},l.prototype.getUnselectedTabs=function(){var b=[];return this.getTabs().each(function(a,c){c.isSelected()||b.push(c)}),a(b)},l.prototype.getPanels=function(){var b=[];return this.getTabs().each(function(a,c){b.push(c.panel)}),a(b)},l.prototype.getFirstTab=function(){return this.getTabs().first()[0]},l.prototype.getLastTab=function(){return this.getTabs().last()[0]},l.prototype.getPreviousTab=function(){if(!this.hasSelectedTab())return null;var a=this.getTabs(),b=null;return a.each(function(a,c){return c.isSelected()?(b=a-1,!1):void 0}),0>b&&(b=a.length-1),a[b]},l.prototype.getNextTab=function(){if(!this.hasSelectedTab())return null;var a=this.getTabs(),b=null;return a.each(function(a,c){return c.isSelected()?(b=a+1,!1):void 0}),b>=a.length&&(b=0),a[b]};var m=function(a){this.tabGroup=new l(a),this.addTabListeners(),this.addTabPanelListeners()};return m.prototype.onlyCtrlModifier=function(a){return a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey},m.prototype.hasKeyModifier=function(a){return a.ctrlKey||a.shiftKey||a.altKey||a.metaKey},m.prototype.focusNextTab=function(){var a=this.tabGroup.getNextTab();this.tabGroup.getSelectedTab().hide(),a.focus()},m.prototype.focusPreviousTab=function(){var a=this.tabGroup.getPreviousTab();this.tabGroup.getSelectedTab().hide(),a.focus()},m.prototype.addTabListeners=function(){var a=this.tabGroup.getTabs(),c=this;a.each(function(a,h){h.element.keydown(function(a){if(!c.hasKeyModifier(a))switch(a.which){case d:a.preventDefault(),b.is_rtl_enabled()?c.focusNextTab():c.focusPreviousTab();break;case e:a.preventDefault(),b.is_rtl_enabled()?c.focusPreviousTab():c.focusNextTab();break;case f:a.preventDefault(),c.focusPreviousTab();break;case g:a.preventDefault(),c.focusNextTab()}}),h.element.click(this,function(a){a.preventDefault();var b=a.data;c.tabGroup.getSelectedTab().hide(),b.show()})})},m.prototype.addTabPanelListeners=function(){var a=this.tabGroup.getPanels(),b=this;a.each(function(a,c){c.keydown(function(a){if(b.onlyCtrlModifier(a))switch(a.which){case f:a.preventDefault();var c=b.tabGroup.getSelectedTab();c.focus();break;case h:a.preventDefault(),b.focusPreviousTab();break;case i:a.preventDefault(),b.focusNextTab()}})})},{create:function(a){new m(a)}}});