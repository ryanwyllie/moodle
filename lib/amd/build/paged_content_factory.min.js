'use strict';define('core/paged_content_factory',['jquery','core/templates','core/notification','core/paged_content_pages'],function($,Templates,Notification,PagedContent){var TEMPLATES={PAGED_CONTENT:'core/paged_content'},buildPagingBarTemplateContext=function(numberOfPages,itemsPerPage){for(var page,context={itemsperpage:itemsPerPage,previous:{},next:{},pages:[]},i=1;i<=numberOfPages;i++)page={number:i,page:''+i},1===i&&(page.active=!0),context.pages.push(page);return context},buildPagingDropdownTemplateContext=function(numberOfPages,itemsPerPage,config){var context={options:[]},totalItems=0,lastIncrease=0,maxPages=numberOfPages;config.hasOwnProperty('maxPages')&&(maxPages=config.maxPages);for(var itemCount,i=1;i<=maxPages;i++){itemCount=0,2>=i?(itemCount=itemsPerPage,lastIncrease=itemsPerPage):(lastIncrease*=2,itemCount=lastIncrease),totalItems+=itemCount;var option={itemcount:itemCount,content:totalItems};1===i&&(option.active=!0),context.options.push(option)}return context},buildTemplateContext=function(numberOfPages,itemsPerPage,config){var context={pagingbar:!1,pagingdropdown:!1,skipjs:!0};return config.hasOwnProperty('dropdown')&&config.dropdown?context.pagingdropdown=buildPagingDropdownTemplateContext(numberOfPages,itemsPerPage,config):context.pagingbar=buildPagingBarTemplateContext(numberOfPages,itemsPerPage),context},calculateNumberOfPages=function(numberOfItems,itemsPerPage){var numberOfPages=1;if(0<numberOfItems){var partial=numberOfItems%itemsPerPage;partial?(numberOfItems-=partial,numberOfPages=numberOfItems/itemsPerPage+1):numberOfPages=numberOfItems/itemsPerPage}return numberOfPages},createFromAjax=function(numberOfItems,itemsPerPage,renderPagesContentCallback,config){'undefined'==typeof config&&(config={});var deferred=$.Deferred(),numberOfPages=calculateNumberOfPages(numberOfItems,itemsPerPage),templateContext=buildTemplateContext(numberOfPages,itemsPerPage,config);return Templates.render(TEMPLATES.PAGED_CONTENT,templateContext).then(function(html,js){html=$(html);var container=html,pagedContent=html.find(PagedContent.rootSelector);return PagedContent.init(pagedContent,container,renderPagesContentCallback),void deferred.resolve(html,js)}).fail(function(exception){deferred.reject(exception)}).fail(Notification.exception),deferred};return{createFromAjax:createFromAjax,createFromStaticList:function createFromStaticList(contentItems,itemsPerPage,renderContentCallback,config){'undefined'==typeof config&&(config={});var numberOfItems=contentItems.length;return createFromAjax(numberOfItems,itemsPerPage,function(pagesData){var contentToRender=[];return pagesData.forEach(function(pageData){var begin=pageData.offset,end=pageData.limit?begin+pageData.limit:numberOfItems,items=contentItems.slice(begin,end);contentToRender.push(items)}),renderContentCallback(contentToRender)},config)}}});
//# sourceMappingURL=paged_content_factory.min.js.map
