{"version":3,"sources":["../src/adapter.js"],"names":["define","Math","min","e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","SDPUtils","writeMediaSection","transceiver","caps","type","stream","dtlsRole","sdp","writeRtpDescription","kind","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","trackId","_initialTrackId","track","id","msid","sendEncodingParameters","ssrc","rtx","localCName","filterIceServers","iceServers","edgeVersion","hasTurn","JSON","parse","stringify","filter","server","urls","url","console","warn","isString","validTurn","indexOf","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","parseInt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","name","toLowerCase","forEach","clockRate","numChannels","push","rtcpFeedback","fb","j","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","signalingState","offer","setLocalDescription","setRemoteDescription","answer","maybeAddCandidate","iceTransport","candidate","alreadyAdded","getRemoteCandidates","find","remoteCandidate","foundation","ip","port","priority","protocol","addRemoteCandidate","makeError","description","NotSupportedError","InvalidStateError","InvalidAccessError","TypeError","OperationError","window","addTrackToStreamAndFireEvent","addTrack","dispatchEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","removeTrack","fireAddTrack","pc","receiver","streams","trackEvent","Event","setTimeout","_dispatchEvent","RTCPeerConnection","config","_eventTarget","document","createDocumentFragment","method","bind","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","localDescription","remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","prototype","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","event","_emitGatheringStateChange","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","alreadyExists","_maybeFireNegotiationNeeded","RTCRtpSender","addStream","getTracks","clonedStream","clone","idx","clonedTrack","addEventListener","enabled","sender","stop","map","splice","removeStream","getSenders","getReceivers","_createIceGatherer","sdpMLineIndex","shift","Object","defineProperty","value","writable","bufferedCandidateEvents","bufferCandidates","end","keys","state","_gather","onlocalcandidate","removeEventListener","evt","sdpMid","cand","component","ufrag","usernameFragment","serializedCandidate","writeCandidate","assign","parseCandidate","toJSON","sections","getMediaSections","getDescription","join","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","send","recv","params","encodings","rtcp","cname","compound","rtcpParameters","p","receive","Promise","reject","sessionpart","splitSections","mediaSection","parseRtpParameters","isIceLite","matchPrefix","rejected","isRejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","start","_updateSignalingState","resolve","receiverList","iceOptions","substr","split","lines","splitLines","getKind","direction","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","RTCRtpReceiver","getCapabilities","codec","isNewTrack","MediaStream","get","default","nativeTrack","sid","item","close","newState","states","closed","checking","connected","completed","disconnected","failed","new","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","arguments","mandatory","optional","offerToReceiveAudio","offerToReceiveVideo","writeSessionBoilerplate","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","desc","RTCSessionDescription","createAnswer","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","hasRtx","c","reducedSize","addIceCandidate","candidateString","trim","getStats","promises","fixStatsType","stat","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","results","Map","all","then","res","result","set","methods","nativeMethod","args","apply","error","random","toString","blob","line","parts","part","index","prefix","substring","relatedAddress","relatedPort","tcpType","toUpperCase","parseIceOptions","parseRtpMap","parsed","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseFingerprint","algorithm","fingerprints","setupType","fp","concat","iceParameters","password","mline","rtpmapline","fmtps","maxptime","extension","encodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","secondarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","obj","rsize","mux","spec","planB","sessId","sessVer","sessionId","version","parseMLine","fmt","slice","parseOLine","username","sessionVersion","netType","addressType","address","global","adapterFactory","self","utils","dependencies","opts","options","shimChrome","shimFirefox","shimEdge","shimSafari","key","hasOwnProperty","logging","log","browserDetails","detectBrowser","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","adapter","extractVersion","disableLog","disableWarnings","browser","shimPeerConnection","browserShim","shimCreateObjectURL","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimRTCIceCandidate","shimMaxMessageSize","shimSendThrowTypeError","shimRemoveStream","shimReplaceTrack","shimRTCIceServerUrls","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimCreateOfferLegacy","webkitMediaStream","_ontrack","origSetRemoteDescription","_ontrackpoly","te","wrapPeerConnectionEvent","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","senders","URL","HTMLMediaElement","_srcObject","src","revokeObjectURL","createObjectURL","shimAddTrackRemoveTrackWithNative","_shimmedLocalStreams","streamId","DOMException","existingSenders","newSenders","newSender","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","oldStream","replaceInternalStreamId","internalId","externalStream","internalStream","replace","RegExp","replaceExternalStreamId","isLegacyCall","err","origSetLocalDescription","origLocalDescription","getOwnPropertyDescriptor","isLocal","streamid","hasTrack","webkitRTCPeerConnection","pcConfig","pcConstraints","iceTransports","generateCertificate","OrigPeerConnection","newIceServers","deprecated","origGetStats","selector","successCallback","errorCallback","fixChromeStats_","response","standardReport","reports","report","standardStats","timestamp","names","makeMapStats","stats","successCallbackWrapper_","promise","RTCIceCandidate","nativeAddIceCandidate","navigator","constraintsToChrome_","cc","ideal","exact","max","oldname_","charAt","oc","mix","advanced","shimConstraints_","constraints","func","audio","remap","b","video","face","facingMode","getSupportedFacingModeLies","mediaDevices","getSupportedConstraints","matches","enumerateDevices","devices","d","dev","some","match","label","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia","getUserMedia_","onSuccess","onError","webkitGetUserMedia","getUserMediaPromise_","kinds","MediaStreamTrack","getSources","device","groupId","echoCancellation","frameRate","height","width","origGetUserMedia","cs","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","nativeCreateObjectURL","nativeRevokeObjectURL","newId","delete","dsc","srcObject","nativeSetAttribute","setAttribute","RTCSctpTransport","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","sctp","origCreateDataChannel","createDataChannel","dataChannel","origDataChannelSend","dc","data","size","byteLength","shimRTCPeerConnection","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","replaceTrack","setTrack","catch","RTCTrackEvent","mozSrcObject","mozRTCPeerConnection","newServer","credential","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","InternalError","SecurityError","constraintsToFF37_","mozGetUserMedia","orgEnumerateDevices","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","_localStreams","getStreamById","_remoteStreams","_addTrack","tracks","_onaddstream","_onaddstreampoly","failureCallback","withCallback","cb","errcb","RTCTransceiver","origCreateOffer","audioTransceiver","getTransceivers","setDirection","addTransceiver","videoTransceiver","logDisabled_","deprecationWarnings_","uastring","expr","pos","eventNameToWrap","wrapper","proto","nativeAddEventListener","nativeEventName","wrappedCallback","_eventMap","nativeRemoveEventListener","unwrappedCb","bool","oldMethod","newMethod","userAgent"],"mappings":"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","sourcesContent":["/**\n * Description of import/upgrade into Moodle:\n *\n * 1. Visit https://github.com/webrtc/adapter/releases.\n * 2. Check if the version has been updated from what is listed in lib/thirdpartylibs.xml in the Moodle wwwroot.\n * 3. If it has -\n *    1. Download the source code.\n *    2. Copy the content of the file release/adapter.js from the archive (ignore the first line).\n *    3. Replace the content below \"return (function e(t,n,r) ..\" in this file with the content you copied.\n *    4. Ensure to update lib/thirdpartylibs.xml with any changes.\n */\n\n// ESLint directives.\n/* eslint-disable */\n\n// JSHint directives.\n/* jshint ignore:start */\n\ndefine([], function() {\nreturn (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n    var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n    // Map ICE parameters (ufrag, pwd) to SDP.\n    sdp += SDPUtils.writeIceParameters(\n        transceiver.iceGatherer.getLocalParameters());\n\n    // Map DTLS parameters to SDP.\n    sdp += SDPUtils.writeDtlsParameters(\n        transceiver.dtlsTransport.getLocalParameters(),\n        type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n    sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n    if (transceiver.rtpSender && transceiver.rtpReceiver) {\n        sdp += 'a=sendrecv\\r\\n';\n    } else if (transceiver.rtpSender) {\n        sdp += 'a=sendonly\\r\\n';\n    } else if (transceiver.rtpReceiver) {\n        sdp += 'a=recvonly\\r\\n';\n    } else {\n        sdp += 'a=inactive\\r\\n';\n    }\n\n    if (transceiver.rtpSender) {\n        var trackId = transceiver.rtpSender._initialTrackId ||\n            transceiver.rtpSender.track.id;\n        transceiver.rtpSender._initialTrackId = trackId;\n        // spec.\n        var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n            trackId + '\\r\\n';\n        sdp += 'a=' + msid;\n        // for Chrome. Legacy should no longer be required.\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n            ' ' + msid;\n\n        // RTX\n        if (transceiver.sendEncodingParameters[0].rtx) {\n            sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                ' ' + msid;\n            sdp += 'a=ssrc-group:FID ' +\n                transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                transceiver.sendEncodingParameters[0].rtx.ssrc +\n                '\\r\\n';\n        }\n    }\n    // FIXME: this should be written by writeRtpDescription.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n    if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n            ' cname:' + SDPUtils.localCName + '\\r\\n';\n    }\n    return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n    var hasTurn = false;\n    iceServers = JSON.parse(JSON.stringify(iceServers));\n    return iceServers.filter(function(server) {\n        if (server && (server.urls || server.url)) {\n            var urls = server.urls || server.url;\n            if (server.url && !server.urls) {\n                console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n            }\n            var isString = typeof urls === 'string';\n            if (isString) {\n                urls = [urls];\n            }\n            urls = urls.filter(function(url) {\n                var validTurn = url.indexOf('turn:') === 0 &&\n                    url.indexOf('transport=udp') !== -1 &&\n                    url.indexOf('turn:[') === -1 &&\n                    !hasTurn;\n\n                if (validTurn) {\n                    hasTurn = true;\n                    return true;\n                }\n                return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n                    url.indexOf('?transport=udp') === -1;\n            });\n\n            delete server.url;\n            server.urls = isString ? urls[0] : urls;\n            return !!urls.length;\n        }\n    });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n    var commonCapabilities = {\n        codecs: [],\n        headerExtensions: [],\n        fecMechanisms: []\n    };\n\n    var findCodecByPayloadType = function(pt, codecs) {\n        pt = parseInt(pt, 10);\n        for (var i = 0; i < codecs.length; i++) {\n            if (codecs[i].payloadType === pt ||\n                codecs[i].preferredPayloadType === pt) {\n                return codecs[i];\n            }\n        }\n    };\n\n    var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n        var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n        var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n        return lCodec && rCodec &&\n            lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n    };\n\n    localCapabilities.codecs.forEach(function(lCodec) {\n        for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n            var rCodec = remoteCapabilities.codecs[i];\n            if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                lCodec.clockRate === rCodec.clockRate) {\n                if (lCodec.name.toLowerCase() === 'rtx' &&\n                    lCodec.parameters && rCodec.parameters.apt) {\n                    // for RTX we need to find the local rtx that has a apt\n                    // which points to the same local codec as the remote one.\n                    if (!rtxCapabilityMatches(lCodec, rCodec,\n                        localCapabilities.codecs, remoteCapabilities.codecs)) {\n                        continue;\n                    }\n                }\n                rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n                // number of channels is the highest common number of channels\n                rCodec.numChannels = Math.min(lCodec.numChannels,\n                    rCodec.numChannels);\n                // push rCodec so we reply with offerer payload type\n                commonCapabilities.codecs.push(rCodec);\n\n                // determine common feedback mechanisms\n                rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n                    for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                        if (lCodec.rtcpFeedback[j].type === fb.type &&\n                            lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                            return true;\n                        }\n                    }\n                    return false;\n                });\n                // FIXME: also need to determine .parameters\n                //  see https://github.com/openpeer/ortc/issues/569\n                break;\n            }\n        }\n    });\n\n    localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n        for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n             i++) {\n            var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n            if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                commonCapabilities.headerExtensions.push(rHeaderExtension);\n                break;\n            }\n        }\n    });\n\n    // FIXME: fecMechanisms\n    return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n    return {\n        offer: {\n            setLocalDescription: ['stable', 'have-local-offer'],\n            setRemoteDescription: ['stable', 'have-remote-offer']\n        },\n        answer: {\n            setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n            setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n        }\n    }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n    // Edge's internal representation adds some fields therefore\n    // not all field are taken into account.\n    var alreadyAdded = iceTransport.getRemoteCandidates()\n        .find(function(remoteCandidate) {\n            return candidate.foundation === remoteCandidate.foundation &&\n                candidate.ip === remoteCandidate.ip &&\n                candidate.port === remoteCandidate.port &&\n                candidate.priority === remoteCandidate.priority &&\n                candidate.protocol === remoteCandidate.protocol &&\n                candidate.type === remoteCandidate.type;\n        });\n    if (!alreadyAdded) {\n        iceTransport.addRemoteCandidate(candidate);\n    }\n    return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n    var e = new Error(description);\n    e.name = name;\n    // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n    e.code = {\n        NotSupportedError: 9,\n        InvalidStateError: 11,\n        InvalidAccessError: 15,\n        TypeError: undefined,\n        OperationError: undefined\n    }[name];\n    return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n    // https://w3c.github.io/mediacapture-main/#mediastream\n    // Helper function to add the track to the stream and\n    // dispatch the event ourselves.\n    function addTrackToStreamAndFireEvent(track, stream) {\n        stream.addTrack(track);\n        stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n            {track: track}));\n    }\n\n    function removeTrackFromStreamAndFireEvent(track, stream) {\n        stream.removeTrack(track);\n        stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n            {track: track}));\n    }\n\n    function fireAddTrack(pc, track, receiver, streams) {\n        var trackEvent = new Event('track');\n        trackEvent.track = track;\n        trackEvent.receiver = receiver;\n        trackEvent.transceiver = {receiver: receiver};\n        trackEvent.streams = streams;\n        window.setTimeout(function() {\n            pc._dispatchEvent('track', trackEvent);\n        });\n    }\n\n    var RTCPeerConnection = function(config) {\n        var pc = this;\n\n        var _eventTarget = document.createDocumentFragment();\n        ['addEventListener', 'removeEventListener', 'dispatchEvent']\n            .forEach(function(method) {\n                pc[method] = _eventTarget[method].bind(_eventTarget);\n            });\n\n        this.canTrickleIceCandidates = null;\n\n        this.needNegotiation = false;\n\n        this.localStreams = [];\n        this.remoteStreams = [];\n\n        this.localDescription = null;\n        this.remoteDescription = null;\n\n        this.signalingState = 'stable';\n        this.iceConnectionState = 'new';\n        this.connectionState = 'new';\n        this.iceGatheringState = 'new';\n\n        config = JSON.parse(JSON.stringify(config || {}));\n\n        this.usingBundle = config.bundlePolicy === 'max-bundle';\n        if (config.rtcpMuxPolicy === 'negotiate') {\n            throw(makeError('NotSupportedError',\n                'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n        } else if (!config.rtcpMuxPolicy) {\n            config.rtcpMuxPolicy = 'require';\n        }\n\n        switch (config.iceTransportPolicy) {\n            case 'all':\n            case 'relay':\n                break;\n            default:\n                config.iceTransportPolicy = 'all';\n                break;\n        }\n\n        switch (config.bundlePolicy) {\n            case 'balanced':\n            case 'max-compat':\n            case 'max-bundle':\n                break;\n            default:\n                config.bundlePolicy = 'balanced';\n                break;\n        }\n\n        config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n        this._iceGatherers = [];\n        if (config.iceCandidatePoolSize) {\n            for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n                this._iceGatherers.push(new window.RTCIceGatherer({\n                    iceServers: config.iceServers,\n                    gatherPolicy: config.iceTransportPolicy\n                }));\n            }\n        } else {\n            config.iceCandidatePoolSize = 0;\n        }\n\n        this._config = config;\n\n        // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n        // everything that is needed to describe a SDP m-line.\n        this.transceivers = [];\n\n        this._sdpSessionId = SDPUtils.generateSessionId();\n        this._sdpSessionVersion = 0;\n\n        this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n        this._isClosed = false;\n    };\n\n    // set up event handlers on prototype\n    RTCPeerConnection.prototype.onicecandidate = null;\n    RTCPeerConnection.prototype.onaddstream = null;\n    RTCPeerConnection.prototype.ontrack = null;\n    RTCPeerConnection.prototype.onremovestream = null;\n    RTCPeerConnection.prototype.onsignalingstatechange = null;\n    RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n    RTCPeerConnection.prototype.onconnectionstatechange = null;\n    RTCPeerConnection.prototype.onicegatheringstatechange = null;\n    RTCPeerConnection.prototype.onnegotiationneeded = null;\n    RTCPeerConnection.prototype.ondatachannel = null;\n\n    RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n        if (this._isClosed) {\n            return;\n        }\n        this.dispatchEvent(event);\n        if (typeof this['on' + name] === 'function') {\n            this['on' + name](event);\n        }\n    };\n\n    RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n        var event = new Event('icegatheringstatechange');\n        this._dispatchEvent('icegatheringstatechange', event);\n    };\n\n    RTCPeerConnection.prototype.getConfiguration = function() {\n        return this._config;\n    };\n\n    RTCPeerConnection.prototype.getLocalStreams = function() {\n        return this.localStreams;\n    };\n\n    RTCPeerConnection.prototype.getRemoteStreams = function() {\n        return this.remoteStreams;\n    };\n\n    // internal helper to create a transceiver object.\n    // (which is not yet the same as the WebRTC 1.0 transceiver)\n    RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n        var hasBundleTransport = this.transceivers.length > 0;\n        var transceiver = {\n            track: null,\n            iceGatherer: null,\n            iceTransport: null,\n            dtlsTransport: null,\n            localCapabilities: null,\n            remoteCapabilities: null,\n            rtpSender: null,\n            rtpReceiver: null,\n            kind: kind,\n            mid: null,\n            sendEncodingParameters: null,\n            recvEncodingParameters: null,\n            stream: null,\n            associatedRemoteMediaStreams: [],\n            wantReceive: true\n        };\n        if (this.usingBundle && hasBundleTransport) {\n            transceiver.iceTransport = this.transceivers[0].iceTransport;\n            transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n        } else {\n            var transports = this._createIceAndDtlsTransports();\n            transceiver.iceTransport = transports.iceTransport;\n            transceiver.dtlsTransport = transports.dtlsTransport;\n        }\n        if (!doNotAdd) {\n            this.transceivers.push(transceiver);\n        }\n        return transceiver;\n    };\n\n    RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        if (this._isClosed) {\n            throw makeError('InvalidStateError',\n                'Attempted to call addTrack on a closed peerconnection.');\n        }\n\n        var alreadyExists = this.transceivers.find(function(s) {\n            return s.track === track;\n        });\n\n        if (alreadyExists) {\n            throw makeError('InvalidAccessError', 'Track already exists.');\n        }\n\n        var transceiver;\n        for (var i = 0; i < this.transceivers.length; i++) {\n            if (!this.transceivers[i].track &&\n                this.transceivers[i].kind === track.kind) {\n                transceiver = this.transceivers[i];\n            }\n        }\n        if (!transceiver) {\n            transceiver = this._createTransceiver(track.kind);\n        }\n\n        this._maybeFireNegotiationNeeded();\n\n        if (this.localStreams.indexOf(stream) === -1) {\n            this.localStreams.push(stream);\n        }\n\n        transceiver.track = track;\n        transceiver.stream = stream;\n        transceiver.rtpSender = new window.RTCRtpSender(track,\n            transceiver.dtlsTransport);\n        return transceiver.rtpSender;\n    };\n\n    RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        if (edgeVersion >= 15025) {\n            stream.getTracks().forEach(function(track) {\n                pc.addTrack(track, stream);\n            });\n        } else {\n            // Clone is necessary for local demos mostly, attaching directly\n            // to two different senders does not work (build 10547).\n            // Fixed in 15025 (or earlier)\n            var clonedStream = stream.clone();\n            stream.getTracks().forEach(function(track, idx) {\n                var clonedTrack = clonedStream.getTracks()[idx];\n                track.addEventListener('enabled', function(event) {\n                    clonedTrack.enabled = event.enabled;\n                });\n            });\n            clonedStream.getTracks().forEach(function(track) {\n                pc.addTrack(track, clonedStream);\n            });\n        }\n    };\n\n    RTCPeerConnection.prototype.removeTrack = function(sender) {\n        if (this._isClosed) {\n            throw makeError('InvalidStateError',\n                'Attempted to call removeTrack on a closed peerconnection.');\n        }\n\n        if (!(sender instanceof window.RTCRtpSender)) {\n            throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n                'does not implement interface RTCRtpSender.');\n        }\n\n        var transceiver = this.transceivers.find(function(t) {\n            return t.rtpSender === sender;\n        });\n\n        if (!transceiver) {\n            throw makeError('InvalidAccessError',\n                'Sender was not created by this connection.');\n        }\n        var stream = transceiver.stream;\n\n        transceiver.rtpSender.stop();\n        transceiver.rtpSender = null;\n        transceiver.track = null;\n        transceiver.stream = null;\n\n        // remove the stream from the set of local streams\n        var localStreams = this.transceivers.map(function(t) {\n            return t.stream;\n        });\n        if (localStreams.indexOf(stream) === -1 &&\n            this.localStreams.indexOf(stream) > -1) {\n            this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n        }\n\n        this._maybeFireNegotiationNeeded();\n    };\n\n    RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        stream.getTracks().forEach(function(track) {\n            var sender = pc.getSenders().find(function(s) {\n                return s.track === track;\n            });\n            if (sender) {\n                pc.removeTrack(sender);\n            }\n        });\n    };\n\n    RTCPeerConnection.prototype.getSenders = function() {\n        return this.transceivers.filter(function(transceiver) {\n            return !!transceiver.rtpSender;\n        })\n            .map(function(transceiver) {\n                return transceiver.rtpSender;\n            });\n    };\n\n    RTCPeerConnection.prototype.getReceivers = function() {\n        return this.transceivers.filter(function(transceiver) {\n            return !!transceiver.rtpReceiver;\n        })\n            .map(function(transceiver) {\n                return transceiver.rtpReceiver;\n            });\n    };\n\n\n    RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n                                                              usingBundle) {\n        var pc = this;\n        if (usingBundle && sdpMLineIndex > 0) {\n            return this.transceivers[0].iceGatherer;\n        } else if (this._iceGatherers.length) {\n            return this._iceGatherers.shift();\n        }\n        var iceGatherer = new window.RTCIceGatherer({\n            iceServers: this._config.iceServers,\n            gatherPolicy: this._config.iceTransportPolicy\n        });\n        Object.defineProperty(iceGatherer, 'state',\n            {value: 'new', writable: true}\n        );\n\n        this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n        this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n            var end = !event.candidate || Object.keys(event.candidate).length === 0;\n            // polyfill since RTCIceGatherer.state is not implemented in\n            // Edge 10547 yet.\n            iceGatherer.state = end ? 'completed' : 'gathering';\n            if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n                pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n            }\n        };\n        iceGatherer.addEventListener('localcandidate',\n            this.transceivers[sdpMLineIndex].bufferCandidates);\n        return iceGatherer;\n    };\n\n    // start gathering from an RTCIceGatherer.\n    RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n        var pc = this;\n        var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n        if (iceGatherer.onlocalcandidate) {\n            return;\n        }\n        var bufferedCandidateEvents =\n            this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n        this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n        iceGatherer.removeEventListener('localcandidate',\n            this.transceivers[sdpMLineIndex].bufferCandidates);\n        iceGatherer.onlocalcandidate = function(evt) {\n            if (pc.usingBundle && sdpMLineIndex > 0) {\n                // if we know that we use bundle we can drop candidates with\n                // dpMLineIndex > 0. If we don't do this then our state gets\n                // confused since we dispose the extra ice gatherer.\n                return;\n            }\n            var event = new Event('icecandidate');\n            event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n            var cand = evt.candidate;\n            // Edge emits an empty object for RTCIceCandidateComplete\n            var end = !cand || Object.keys(cand).length === 0;\n            if (end) {\n                // polyfill since RTCIceGatherer.state is not implemented in\n                // Edge 10547 yet.\n                if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n                    iceGatherer.state = 'completed';\n                }\n            } else {\n                if (iceGatherer.state === 'new') {\n                    iceGatherer.state = 'gathering';\n                }\n                // RTCIceCandidate doesn't have a component, needs to be added\n                cand.component = 1;\n                // also the usernameFragment. TODO: update SDP to take both variants.\n                cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n                var serializedCandidate = SDPUtils.writeCandidate(cand);\n                event.candidate = Object.assign(event.candidate,\n                    SDPUtils.parseCandidate(serializedCandidate));\n\n                event.candidate.candidate = serializedCandidate;\n                event.candidate.toJSON = function() {\n                    return {\n                        candidate: event.candidate.candidate,\n                        sdpMid: event.candidate.sdpMid,\n                        sdpMLineIndex: event.candidate.sdpMLineIndex,\n                        usernameFragment: event.candidate.usernameFragment\n                    };\n                };\n            }\n\n            // update local description.\n            var sections = SDPUtils.getMediaSections(pc.localDescription.sdp);\n            if (!end) {\n                sections[event.candidate.sdpMLineIndex] +=\n                    'a=' + event.candidate.candidate + '\\r\\n';\n            } else {\n                sections[event.candidate.sdpMLineIndex] +=\n                    'a=end-of-candidates\\r\\n';\n            }\n            pc.localDescription.sdp =\n                SDPUtils.getDescription(pc.localDescription.sdp) +\n                sections.join('');\n            var complete = pc.transceivers.every(function(transceiver) {\n                return transceiver.iceGatherer &&\n                    transceiver.iceGatherer.state === 'completed';\n            });\n\n            if (pc.iceGatheringState !== 'gathering') {\n                pc.iceGatheringState = 'gathering';\n                pc._emitGatheringStateChange();\n            }\n\n            // Emit candidate. Also emit null candidate when all gatherers are\n            // complete.\n            if (!end) {\n                pc._dispatchEvent('icecandidate', event);\n            }\n            if (complete) {\n                pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n                pc.iceGatheringState = 'complete';\n                pc._emitGatheringStateChange();\n            }\n        };\n\n        // emit already gathered candidates.\n        window.setTimeout(function() {\n            bufferedCandidateEvents.forEach(function(e) {\n                iceGatherer.onlocalcandidate(e);\n            });\n        }, 0);\n    };\n\n    // Create ICE transport and DTLS transport.\n    RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n        var pc = this;\n        var iceTransport = new window.RTCIceTransport(null);\n        iceTransport.onicestatechange = function() {\n            pc._updateIceConnectionState();\n            pc._updateConnectionState();\n        };\n\n        var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n        dtlsTransport.ondtlsstatechange = function() {\n            pc._updateConnectionState();\n        };\n        dtlsTransport.onerror = function() {\n            // onerror does not set state to failed by itself.\n            Object.defineProperty(dtlsTransport, 'state',\n                {value: 'failed', writable: true});\n            pc._updateConnectionState();\n        };\n\n        return {\n            iceTransport: iceTransport,\n            dtlsTransport: dtlsTransport\n        };\n    };\n\n    // Destroy ICE gatherer, ICE transport and DTLS transport.\n    // Without triggering the callbacks.\n    RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n        sdpMLineIndex) {\n        var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n        if (iceGatherer) {\n            delete iceGatherer.onlocalcandidate;\n            delete this.transceivers[sdpMLineIndex].iceGatherer;\n        }\n        var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n        if (iceTransport) {\n            delete iceTransport.onicestatechange;\n            delete this.transceivers[sdpMLineIndex].iceTransport;\n        }\n        var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n        if (dtlsTransport) {\n            delete dtlsTransport.ondtlsstatechange;\n            delete dtlsTransport.onerror;\n            delete this.transceivers[sdpMLineIndex].dtlsTransport;\n        }\n    };\n\n    // Start the RTP Sender and Receiver for a transceiver.\n    RTCPeerConnection.prototype._transceive = function(transceiver,\n                                                       send, recv) {\n        var params = getCommonCapabilities(transceiver.localCapabilities,\n            transceiver.remoteCapabilities);\n        if (send && transceiver.rtpSender) {\n            params.encodings = transceiver.sendEncodingParameters;\n            params.rtcp = {\n                cname: SDPUtils.localCName,\n                compound: transceiver.rtcpParameters.compound\n            };\n            if (transceiver.recvEncodingParameters.length) {\n                params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n            }\n            transceiver.rtpSender.send(params);\n        }\n        if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n            // remove RTX field in Edge 14942\n            if (transceiver.kind === 'video'\n                && transceiver.recvEncodingParameters\n                && edgeVersion < 15019) {\n                transceiver.recvEncodingParameters.forEach(function(p) {\n                    delete p.rtx;\n                });\n            }\n            if (transceiver.recvEncodingParameters.length) {\n                params.encodings = transceiver.recvEncodingParameters;\n            } else {\n                params.encodings = [{}];\n            }\n            params.rtcp = {\n                compound: transceiver.rtcpParameters.compound\n            };\n            if (transceiver.rtcpParameters.cname) {\n                params.rtcp.cname = transceiver.rtcpParameters.cname;\n            }\n            if (transceiver.sendEncodingParameters.length) {\n                params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n            }\n            transceiver.rtpReceiver.receive(params);\n        }\n    };\n\n    RTCPeerConnection.prototype.setLocalDescription = function(description) {\n        var pc = this;\n\n        // Note: pranswer is not supported.\n        if (['offer', 'answer'].indexOf(description.type) === -1) {\n            return Promise.reject(makeError('TypeError',\n                'Unsupported type \"' + description.type + '\"'));\n        }\n\n        if (!isActionAllowedInSignalingState('setLocalDescription',\n            description.type, pc.signalingState) || pc._isClosed) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not set local ' + description.type +\n                ' in state ' + pc.signalingState));\n        }\n\n        var sections;\n        var sessionpart;\n        if (description.type === 'offer') {\n            // VERY limited support for SDP munging. Limited to:\n            // * changing the order of codecs\n            sections = SDPUtils.splitSections(description.sdp);\n            sessionpart = sections.shift();\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var caps = SDPUtils.parseRtpParameters(mediaSection);\n                pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n            });\n\n            pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n                pc._gather(transceiver.mid, sdpMLineIndex);\n            });\n        } else if (description.type === 'answer') {\n            sections = SDPUtils.splitSections(pc.remoteDescription.sdp);\n            sessionpart = sections.shift();\n            var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                'a=ice-lite').length > 0;\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var transceiver = pc.transceivers[sdpMLineIndex];\n                var iceGatherer = transceiver.iceGatherer;\n                var iceTransport = transceiver.iceTransport;\n                var dtlsTransport = transceiver.dtlsTransport;\n                var localCapabilities = transceiver.localCapabilities;\n                var remoteCapabilities = transceiver.remoteCapabilities;\n\n                // treat bundle-only as not-rejected.\n                var rejected = SDPUtils.isRejected(mediaSection) &&\n                    SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n                if (!rejected && !transceiver.rejected) {\n                    var remoteIceParameters = SDPUtils.getIceParameters(\n                        mediaSection, sessionpart);\n                    var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                        mediaSection, sessionpart);\n                    if (isIceLite) {\n                        remoteDtlsParameters.role = 'server';\n                    }\n\n                    if (!pc.usingBundle || sdpMLineIndex === 0) {\n                        pc._gather(transceiver.mid, sdpMLineIndex);\n                        if (iceTransport.state === 'new') {\n                            iceTransport.start(iceGatherer, remoteIceParameters,\n                                isIceLite ? 'controlling' : 'controlled');\n                        }\n                        if (dtlsTransport.state === 'new') {\n                            dtlsTransport.start(remoteDtlsParameters);\n                        }\n                    }\n\n                    // Calculate intersection of capabilities.\n                    var params = getCommonCapabilities(localCapabilities,\n                        remoteCapabilities);\n\n                    // Start the RTCRtpSender. The RTCRtpReceiver for this\n                    // transceiver has already been started in setRemoteDescription.\n                    pc._transceive(transceiver,\n                        params.codecs.length > 0,\n                        false);\n                }\n            });\n        }\n\n        pc.localDescription = {\n            type: description.type,\n            sdp: description.sdp\n        };\n        if (description.type === 'offer') {\n            pc._updateSignalingState('have-local-offer');\n        } else {\n            pc._updateSignalingState('stable');\n        }\n\n        return Promise.resolve();\n    };\n\n    RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n        var pc = this;\n\n        // Note: pranswer is not supported.\n        if (['offer', 'answer'].indexOf(description.type) === -1) {\n            return Promise.reject(makeError('TypeError',\n                'Unsupported type \"' + description.type + '\"'));\n        }\n\n        if (!isActionAllowedInSignalingState('setRemoteDescription',\n            description.type, pc.signalingState) || pc._isClosed) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not set remote ' + description.type +\n                ' in state ' + pc.signalingState));\n        }\n\n        var streams = {};\n        pc.remoteStreams.forEach(function(stream) {\n            streams[stream.id] = stream;\n        });\n        var receiverList = [];\n        var sections = SDPUtils.splitSections(description.sdp);\n        var sessionpart = sections.shift();\n        var isIceLite = SDPUtils.matchPrefix(sessionpart,\n            'a=ice-lite').length > 0;\n        var usingBundle = SDPUtils.matchPrefix(sessionpart,\n            'a=group:BUNDLE ').length > 0;\n        pc.usingBundle = usingBundle;\n        var iceOptions = SDPUtils.matchPrefix(sessionpart,\n            'a=ice-options:')[0];\n        if (iceOptions) {\n            pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n                .indexOf('trickle') >= 0;\n        } else {\n            pc.canTrickleIceCandidates = false;\n        }\n\n        sections.forEach(function(mediaSection, sdpMLineIndex) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var kind = SDPUtils.getKind(mediaSection);\n            // treat bundle-only as not-rejected.\n            var rejected = SDPUtils.isRejected(mediaSection) &&\n                SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n            var protocol = lines[0].substr(2).split(' ')[2];\n\n            var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n            var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n            var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n            // Reject datachannels which are not implemented yet.\n            if ((kind === 'application' && protocol === 'DTLS/SCTP') || rejected) {\n                // TODO: this is dangerous in the case where a non-rejected m-line\n                //     becomes rejected.\n                pc.transceivers[sdpMLineIndex] = {\n                    mid: mid,\n                    kind: kind,\n                    rejected: true\n                };\n                return;\n            }\n\n            if (!rejected && pc.transceivers[sdpMLineIndex] &&\n                pc.transceivers[sdpMLineIndex].rejected) {\n                // recycle a rejected transceiver.\n                pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n            }\n\n            var transceiver;\n            var iceGatherer;\n            var iceTransport;\n            var dtlsTransport;\n            var rtpReceiver;\n            var sendEncodingParameters;\n            var recvEncodingParameters;\n            var localCapabilities;\n\n            var track;\n            // FIXME: ensure the mediaSection has rtcp-mux set.\n            var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n            var remoteIceParameters;\n            var remoteDtlsParameters;\n            if (!rejected) {\n                remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                    sessionpart);\n                remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                    sessionpart);\n                remoteDtlsParameters.role = 'client';\n            }\n            recvEncodingParameters =\n                SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n            var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n            var isComplete = SDPUtils.matchPrefix(mediaSection,\n                'a=end-of-candidates', sessionpart).length > 0;\n            var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                .map(function(cand) {\n                    return SDPUtils.parseCandidate(cand);\n                })\n                .filter(function(cand) {\n                    return cand.component === 1;\n                });\n\n            // Check if we can use BUNDLE and dispose transports.\n            if ((description.type === 'offer' || description.type === 'answer') &&\n                !rejected && usingBundle && sdpMLineIndex > 0 &&\n                pc.transceivers[sdpMLineIndex]) {\n                pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n                pc.transceivers[sdpMLineIndex].iceGatherer =\n                    pc.transceivers[0].iceGatherer;\n                pc.transceivers[sdpMLineIndex].iceTransport =\n                    pc.transceivers[0].iceTransport;\n                pc.transceivers[sdpMLineIndex].dtlsTransport =\n                    pc.transceivers[0].dtlsTransport;\n                if (pc.transceivers[sdpMLineIndex].rtpSender) {\n                    pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n                        pc.transceivers[0].dtlsTransport);\n                }\n                if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n                    pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n                        pc.transceivers[0].dtlsTransport);\n                }\n            }\n            if (description.type === 'offer' && !rejected) {\n                transceiver = pc.transceivers[sdpMLineIndex] ||\n                    pc._createTransceiver(kind);\n                transceiver.mid = mid;\n\n                if (!transceiver.iceGatherer) {\n                    transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n                        usingBundle);\n                }\n\n                if (cands.length && transceiver.iceTransport.state === 'new') {\n                    if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n                        transceiver.iceTransport.setRemoteCandidates(cands);\n                    } else {\n                        cands.forEach(function(candidate) {\n                            maybeAddCandidate(transceiver.iceTransport, candidate);\n                        });\n                    }\n                }\n\n                localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n                // filter RTX until additional stuff needed for RTX is implemented\n                // in adapter.js\n                if (edgeVersion < 15019) {\n                    localCapabilities.codecs = localCapabilities.codecs.filter(\n                        function(codec) {\n                            return codec.name !== 'rtx';\n                        });\n                }\n\n                sendEncodingParameters = transceiver.sendEncodingParameters || [{\n                    ssrc: (2 * sdpMLineIndex + 2) * 1001\n                }];\n\n                // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                var isNewTrack = false;\n                if (direction === 'sendrecv' || direction === 'sendonly') {\n                    isNewTrack = !transceiver.rtpReceiver;\n                    rtpReceiver = transceiver.rtpReceiver ||\n                        new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n                    if (isNewTrack) {\n                        var stream;\n                        track = rtpReceiver.track;\n                        // FIXME: does not work with Plan B.\n                        if (remoteMsid && remoteMsid.stream === '-') {\n                            // no-op. a stream id of '-' means: no associated stream.\n                        } else if (remoteMsid) {\n                            if (!streams[remoteMsid.stream]) {\n                                streams[remoteMsid.stream] = new window.MediaStream();\n                                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                                    get: function() {\n                                        return remoteMsid.stream;\n                                    }\n                                });\n                            }\n                            Object.defineProperty(track, 'id', {\n                                get: function() {\n                                    return remoteMsid.track;\n                                }\n                            });\n                            stream = streams[remoteMsid.stream];\n                        } else {\n                            if (!streams.default) {\n                                streams.default = new window.MediaStream();\n                            }\n                            stream = streams.default;\n                        }\n                        if (stream) {\n                            addTrackToStreamAndFireEvent(track, stream);\n                            transceiver.associatedRemoteMediaStreams.push(stream);\n                        }\n                        receiverList.push([track, rtpReceiver, stream]);\n                    }\n                } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n                    transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n                        var nativeTrack = s.getTracks().find(function(t) {\n                            return t.id === transceiver.rtpReceiver.track.id;\n                        });\n                        if (nativeTrack) {\n                            removeTrackFromStreamAndFireEvent(nativeTrack, s);\n                        }\n                    });\n                    transceiver.associatedRemoteMediaStreams = [];\n                }\n\n                transceiver.localCapabilities = localCapabilities;\n                transceiver.remoteCapabilities = remoteCapabilities;\n                transceiver.rtpReceiver = rtpReceiver;\n                transceiver.rtcpParameters = rtcpParameters;\n                transceiver.sendEncodingParameters = sendEncodingParameters;\n                transceiver.recvEncodingParameters = recvEncodingParameters;\n\n                // Start the RTCRtpReceiver now. The RTPSender is started in\n                // setLocalDescription.\n                pc._transceive(pc.transceivers[sdpMLineIndex],\n                    false,\n                    isNewTrack);\n            } else if (description.type === 'answer' && !rejected) {\n                transceiver = pc.transceivers[sdpMLineIndex];\n                iceGatherer = transceiver.iceGatherer;\n                iceTransport = transceiver.iceTransport;\n                dtlsTransport = transceiver.dtlsTransport;\n                rtpReceiver = transceiver.rtpReceiver;\n                sendEncodingParameters = transceiver.sendEncodingParameters;\n                localCapabilities = transceiver.localCapabilities;\n\n                pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n                    recvEncodingParameters;\n                pc.transceivers[sdpMLineIndex].remoteCapabilities =\n                    remoteCapabilities;\n                pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n                if (cands.length && iceTransport.state === 'new') {\n                    if ((isIceLite || isComplete) &&\n                        (!usingBundle || sdpMLineIndex === 0)) {\n                        iceTransport.setRemoteCandidates(cands);\n                    } else {\n                        cands.forEach(function(candidate) {\n                            maybeAddCandidate(transceiver.iceTransport, candidate);\n                        });\n                    }\n                }\n\n                if (!usingBundle || sdpMLineIndex === 0) {\n                    if (iceTransport.state === 'new') {\n                        iceTransport.start(iceGatherer, remoteIceParameters,\n                            'controlling');\n                    }\n                    if (dtlsTransport.state === 'new') {\n                        dtlsTransport.start(remoteDtlsParameters);\n                    }\n                }\n\n                pc._transceive(transceiver,\n                    direction === 'sendrecv' || direction === 'recvonly',\n                    direction === 'sendrecv' || direction === 'sendonly');\n\n                // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                if (rtpReceiver &&\n                    (direction === 'sendrecv' || direction === 'sendonly')) {\n                    track = rtpReceiver.track;\n                    if (remoteMsid) {\n                        if (!streams[remoteMsid.stream]) {\n                            streams[remoteMsid.stream] = new window.MediaStream();\n                        }\n                        addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n                        receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n                    } else {\n                        if (!streams.default) {\n                            streams.default = new window.MediaStream();\n                        }\n                        addTrackToStreamAndFireEvent(track, streams.default);\n                        receiverList.push([track, rtpReceiver, streams.default]);\n                    }\n                } else {\n                    // FIXME: actually the receiver should be created later.\n                    delete transceiver.rtpReceiver;\n                }\n            }\n        });\n\n        if (pc._dtlsRole === undefined) {\n            pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n        }\n\n        pc.remoteDescription = {\n            type: description.type,\n            sdp: description.sdp\n        };\n        if (description.type === 'offer') {\n            pc._updateSignalingState('have-remote-offer');\n        } else {\n            pc._updateSignalingState('stable');\n        }\n        Object.keys(streams).forEach(function(sid) {\n            var stream = streams[sid];\n            if (stream.getTracks().length) {\n                if (pc.remoteStreams.indexOf(stream) === -1) {\n                    pc.remoteStreams.push(stream);\n                    var event = new Event('addstream');\n                    event.stream = stream;\n                    window.setTimeout(function() {\n                        pc._dispatchEvent('addstream', event);\n                    });\n                }\n\n                receiverList.forEach(function(item) {\n                    var track = item[0];\n                    var receiver = item[1];\n                    if (stream.id !== item[2].id) {\n                        return;\n                    }\n                    fireAddTrack(pc, track, receiver, [stream]);\n                });\n            }\n        });\n        receiverList.forEach(function(item) {\n            if (item[2]) {\n                return;\n            }\n            fireAddTrack(pc, item[0], item[1], []);\n        });\n\n        // check whether addIceCandidate({}) was called within four seconds after\n        // setRemoteDescription.\n        window.setTimeout(function() {\n            if (!(pc && pc.transceivers)) {\n                return;\n            }\n            pc.transceivers.forEach(function(transceiver) {\n                if (transceiver.iceTransport &&\n                    transceiver.iceTransport.state === 'new' &&\n                    transceiver.iceTransport.getRemoteCandidates().length > 0) {\n                    console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n                        'an end-of-candidates notification');\n                    transceiver.iceTransport.addRemoteCandidate({});\n                }\n            });\n        }, 4000);\n\n        return Promise.resolve();\n    };\n\n    RTCPeerConnection.prototype.close = function() {\n        this.transceivers.forEach(function(transceiver) {\n            /* not yet\nif (transceiver.iceGatherer) {\ntransceiver.iceGatherer.close();\n}\n*/\n            if (transceiver.iceTransport) {\n                transceiver.iceTransport.stop();\n            }\n            if (transceiver.dtlsTransport) {\n                transceiver.dtlsTransport.stop();\n            }\n            if (transceiver.rtpSender) {\n                transceiver.rtpSender.stop();\n            }\n            if (transceiver.rtpReceiver) {\n                transceiver.rtpReceiver.stop();\n            }\n        });\n        // FIXME: clean up tracks, local streams, remote streams, etc\n        this._isClosed = true;\n        this._updateSignalingState('closed');\n    };\n\n    // Update the signaling state.\n    RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n        this.signalingState = newState;\n        var event = new Event('signalingstatechange');\n        this._dispatchEvent('signalingstatechange', event);\n    };\n\n    // Determine whether to fire the negotiationneeded event.\n    RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n        var pc = this;\n        if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n            return;\n        }\n        this.needNegotiation = true;\n        window.setTimeout(function() {\n            if (pc.needNegotiation) {\n                pc.needNegotiation = false;\n                var event = new Event('negotiationneeded');\n                pc._dispatchEvent('negotiationneeded', event);\n            }\n        }, 0);\n    };\n\n    // Update the ice connection state.\n    RTCPeerConnection.prototype._updateIceConnectionState = function() {\n        var newState;\n        var states = {\n            'new': 0,\n            closed: 0,\n            checking: 0,\n            connected: 0,\n            completed: 0,\n            disconnected: 0,\n            failed: 0\n        };\n        this.transceivers.forEach(function(transceiver) {\n            states[transceiver.iceTransport.state]++;\n        });\n\n        newState = 'new';\n        if (states.failed > 0) {\n            newState = 'failed';\n        } else if (states.checking > 0) {\n            newState = 'checking';\n        } else if (states.disconnected > 0) {\n            newState = 'disconnected';\n        } else if (states.new > 0) {\n            newState = 'new';\n        } else if (states.connected > 0) {\n            newState = 'connected';\n        } else if (states.completed > 0) {\n            newState = 'completed';\n        }\n\n        if (newState !== this.iceConnectionState) {\n            this.iceConnectionState = newState;\n            var event = new Event('iceconnectionstatechange');\n            this._dispatchEvent('iceconnectionstatechange', event);\n        }\n    };\n\n    // Update the connection state.\n    RTCPeerConnection.prototype._updateConnectionState = function() {\n        var newState;\n        var states = {\n            'new': 0,\n            closed: 0,\n            connecting: 0,\n            connected: 0,\n            completed: 0,\n            disconnected: 0,\n            failed: 0\n        };\n        this.transceivers.forEach(function(transceiver) {\n            states[transceiver.iceTransport.state]++;\n            states[transceiver.dtlsTransport.state]++;\n        });\n        // ICETransport.completed and connected are the same for this purpose.\n        states.connected += states.completed;\n\n        newState = 'new';\n        if (states.failed > 0) {\n            newState = 'failed';\n        } else if (states.connecting > 0) {\n            newState = 'connecting';\n        } else if (states.disconnected > 0) {\n            newState = 'disconnected';\n        } else if (states.new > 0) {\n            newState = 'new';\n        } else if (states.connected > 0) {\n            newState = 'connected';\n        }\n\n        if (newState !== this.connectionState) {\n            this.connectionState = newState;\n            var event = new Event('connectionstatechange');\n            this._dispatchEvent('connectionstatechange', event);\n        }\n    };\n\n    RTCPeerConnection.prototype.createOffer = function() {\n        var pc = this;\n\n        if (pc._isClosed) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not call createOffer after close'));\n        }\n\n        var numAudioTracks = pc.transceivers.filter(function(t) {\n            return t.kind === 'audio';\n        }).length;\n        var numVideoTracks = pc.transceivers.filter(function(t) {\n            return t.kind === 'video';\n        }).length;\n\n        // Determine number of audio and video tracks we need to send/recv.\n        var offerOptions = arguments[0];\n        if (offerOptions) {\n            // Reject Chrome legacy constraints.\n            if (offerOptions.mandatory || offerOptions.optional) {\n                throw new TypeError(\n                    'Legacy mandatory/optional constraints not supported.');\n            }\n            if (offerOptions.offerToReceiveAudio !== undefined) {\n                if (offerOptions.offerToReceiveAudio === true) {\n                    numAudioTracks = 1;\n                } else if (offerOptions.offerToReceiveAudio === false) {\n                    numAudioTracks = 0;\n                } else {\n                    numAudioTracks = offerOptions.offerToReceiveAudio;\n                }\n            }\n            if (offerOptions.offerToReceiveVideo !== undefined) {\n                if (offerOptions.offerToReceiveVideo === true) {\n                    numVideoTracks = 1;\n                } else if (offerOptions.offerToReceiveVideo === false) {\n                    numVideoTracks = 0;\n                } else {\n                    numVideoTracks = offerOptions.offerToReceiveVideo;\n                }\n            }\n        }\n\n        pc.transceivers.forEach(function(transceiver) {\n            if (transceiver.kind === 'audio') {\n                numAudioTracks--;\n                if (numAudioTracks < 0) {\n                    transceiver.wantReceive = false;\n                }\n            } else if (transceiver.kind === 'video') {\n                numVideoTracks--;\n                if (numVideoTracks < 0) {\n                    transceiver.wantReceive = false;\n                }\n            }\n        });\n\n        // Create M-lines for recvonly streams.\n        while (numAudioTracks > 0 || numVideoTracks > 0) {\n            if (numAudioTracks > 0) {\n                pc._createTransceiver('audio');\n                numAudioTracks--;\n            }\n            if (numVideoTracks > 0) {\n                pc._createTransceiver('video');\n                numVideoTracks--;\n            }\n        }\n\n        var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n            pc._sdpSessionVersion++);\n        pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n            // For each track, create an ice gatherer, ice transport,\n            // dtls transport, potentially rtpsender and rtpreceiver.\n            var track = transceiver.track;\n            var kind = transceiver.kind;\n            var mid = transceiver.mid || SDPUtils.generateIdentifier();\n            transceiver.mid = mid;\n\n            if (!transceiver.iceGatherer) {\n                transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n                    pc.usingBundle);\n            }\n\n            var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n            // filter RTX until additional stuff needed for RTX is implemented\n            // in adapter.js\n            if (edgeVersion < 15019) {\n                localCapabilities.codecs = localCapabilities.codecs.filter(\n                    function(codec) {\n                        return codec.name !== 'rtx';\n                    });\n            }\n            localCapabilities.codecs.forEach(function(codec) {\n                // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n                // by adding level-asymmetry-allowed=1\n                if (codec.name === 'H264' &&\n                    codec.parameters['level-asymmetry-allowed'] === undefined) {\n                    codec.parameters['level-asymmetry-allowed'] = '1';\n                }\n\n                // for subsequent offers, we might have to re-use the payload\n                // type of the last offer.\n                if (transceiver.remoteCapabilities &&\n                    transceiver.remoteCapabilities.codecs) {\n                    transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n                        if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                            codec.clockRate === remoteCodec.clockRate) {\n                            codec.preferredPayloadType = remoteCodec.payloadType;\n                        }\n                    });\n                }\n            });\n            localCapabilities.headerExtensions.forEach(function(hdrExt) {\n                var remoteExtensions = transceiver.remoteCapabilities &&\n                    transceiver.remoteCapabilities.headerExtensions || [];\n                remoteExtensions.forEach(function(rHdrExt) {\n                    if (hdrExt.uri === rHdrExt.uri) {\n                        hdrExt.id = rHdrExt.id;\n                    }\n                });\n            });\n\n            // generate an ssrc now, to be used later in rtpSender.send\n            var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n                ssrc: (2 * sdpMLineIndex + 1) * 1001\n            }];\n            if (track) {\n                // add RTX\n                if (edgeVersion >= 15019 && kind === 'video' &&\n                    !sendEncodingParameters[0].rtx) {\n                    sendEncodingParameters[0].rtx = {\n                        ssrc: sendEncodingParameters[0].ssrc + 1\n                    };\n                }\n            }\n\n            if (transceiver.wantReceive) {\n                transceiver.rtpReceiver = new window.RTCRtpReceiver(\n                    transceiver.dtlsTransport, kind);\n            }\n\n            transceiver.localCapabilities = localCapabilities;\n            transceiver.sendEncodingParameters = sendEncodingParameters;\n        });\n\n        // always offer BUNDLE and dispose on return if not supported.\n        if (pc._config.bundlePolicy !== 'max-compat') {\n            sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n                return t.mid;\n            }).join(' ') + '\\r\\n';\n        }\n        sdp += 'a=ice-options:trickle\\r\\n';\n\n        pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n            sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n                'offer', transceiver.stream, pc._dtlsRole);\n            sdp += 'a=rtcp-rsize\\r\\n';\n\n            if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n                (sdpMLineIndex === 0 || !pc.usingBundle)) {\n                transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n                    cand.component = 1;\n                    sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n                });\n\n                if (transceiver.iceGatherer.state === 'completed') {\n                    sdp += 'a=end-of-candidates\\r\\n';\n                }\n            }\n        });\n\n        var desc = new window.RTCSessionDescription({\n            type: 'offer',\n            sdp: sdp\n        });\n        return Promise.resolve(desc);\n    };\n\n    RTCPeerConnection.prototype.createAnswer = function() {\n        var pc = this;\n\n        if (pc._isClosed) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not call createAnswer after close'));\n        }\n\n        if (!(pc.signalingState === 'have-remote-offer' ||\n            pc.signalingState === 'have-local-pranswer')) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not call createAnswer in signalingState ' + pc.signalingState));\n        }\n\n        var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n            pc._sdpSessionVersion++);\n        if (pc.usingBundle) {\n            sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n                return t.mid;\n            }).join(' ') + '\\r\\n';\n        }\n        var mediaSectionsInOffer = SDPUtils.getMediaSections(\n            pc.remoteDescription.sdp).length;\n        pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n            if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n                return;\n            }\n            if (transceiver.rejected) {\n                if (transceiver.kind === 'application') {\n                    sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n                } else if (transceiver.kind === 'audio') {\n                    sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n                        'a=rtpmap:0 PCMU/8000\\r\\n';\n                } else if (transceiver.kind === 'video') {\n                    sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n                        'a=rtpmap:120 VP8/90000\\r\\n';\n                }\n                sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n                    'a=inactive\\r\\n' +\n                    'a=mid:' + transceiver.mid + '\\r\\n';\n                return;\n            }\n\n            // FIXME: look at direction.\n            if (transceiver.stream) {\n                var localTrack;\n                if (transceiver.kind === 'audio') {\n                    localTrack = transceiver.stream.getAudioTracks()[0];\n                } else if (transceiver.kind === 'video') {\n                    localTrack = transceiver.stream.getVideoTracks()[0];\n                }\n                if (localTrack) {\n                    // add RTX\n                    if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n                        !transceiver.sendEncodingParameters[0].rtx) {\n                        transceiver.sendEncodingParameters[0].rtx = {\n                            ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n                        };\n                    }\n                }\n            }\n\n            // Calculate intersection of capabilities.\n            var commonCapabilities = getCommonCapabilities(\n                transceiver.localCapabilities,\n                transceiver.remoteCapabilities);\n\n            var hasRtx = commonCapabilities.codecs.filter(function(c) {\n                return c.name.toLowerCase() === 'rtx';\n            }).length;\n            if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n                delete transceiver.sendEncodingParameters[0].rtx;\n            }\n\n            sdp += writeMediaSection(transceiver, commonCapabilities,\n                'answer', transceiver.stream, pc._dtlsRole);\n            if (transceiver.rtcpParameters &&\n                transceiver.rtcpParameters.reducedSize) {\n                sdp += 'a=rtcp-rsize\\r\\n';\n            }\n        });\n\n        var desc = new window.RTCSessionDescription({\n            type: 'answer',\n            sdp: sdp\n        });\n        return Promise.resolve(desc);\n    };\n\n    RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n        var pc = this;\n        var sections;\n        if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n            candidate.sdpMid)) {\n            return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n        }\n\n        // TODO: needs to go into ops queue.\n        return new Promise(function(resolve, reject) {\n            if (!pc.remoteDescription) {\n                return reject(makeError('InvalidStateError',\n                    'Can not add ICE candidate without a remote description'));\n            } else if (!candidate || candidate.candidate === '') {\n                for (var j = 0; j < pc.transceivers.length; j++) {\n                    if (pc.transceivers[j].rejected) {\n                        continue;\n                    }\n                    pc.transceivers[j].iceTransport.addRemoteCandidate({});\n                    sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n                    sections[j] += 'a=end-of-candidates\\r\\n';\n                    pc.remoteDescription.sdp =\n                        SDPUtils.getDescription(pc.remoteDescription.sdp) +\n                        sections.join('');\n                    if (pc.usingBundle) {\n                        break;\n                    }\n                }\n            } else {\n                var sdpMLineIndex = candidate.sdpMLineIndex;\n                if (candidate.sdpMid) {\n                    for (var i = 0; i < pc.transceivers.length; i++) {\n                        if (pc.transceivers[i].mid === candidate.sdpMid) {\n                            sdpMLineIndex = i;\n                            break;\n                        }\n                    }\n                }\n                var transceiver = pc.transceivers[sdpMLineIndex];\n                if (transceiver) {\n                    if (transceiver.rejected) {\n                        return resolve();\n                    }\n                    var cand = Object.keys(candidate.candidate).length > 0 ?\n                        SDPUtils.parseCandidate(candidate.candidate) : {};\n                    // Ignore Chrome's invalid candidates since Edge does not like them.\n                    if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n                        return resolve();\n                    }\n                    // Ignore RTCP candidates, we assume RTCP-MUX.\n                    if (cand.component && cand.component !== 1) {\n                        return resolve();\n                    }\n                    // when using bundle, avoid adding candidates to the wrong\n                    // ice transport. And avoid adding candidates added in the SDP.\n                    if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n                        transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n                        if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n                            return reject(makeError('OperationError',\n                                'Can not add ICE candidate'));\n                        }\n                    }\n\n                    // update the remoteDescription.\n                    var candidateString = candidate.candidate.trim();\n                    if (candidateString.indexOf('a=') === 0) {\n                        candidateString = candidateString.substr(2);\n                    }\n                    sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n                    sections[sdpMLineIndex] += 'a=' +\n                        (cand.type ? candidateString : 'end-of-candidates')\n                        + '\\r\\n';\n                    pc.remoteDescription.sdp =\n                        SDPUtils.getDescription(pc.remoteDescription.sdp) +\n                        sections.join('');\n                } else {\n                    return reject(makeError('OperationError',\n                        'Can not add ICE candidate'));\n                }\n            }\n            resolve();\n        });\n    };\n\n    RTCPeerConnection.prototype.getStats = function() {\n        var promises = [];\n        this.transceivers.forEach(function(transceiver) {\n            ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n                'dtlsTransport'].forEach(function(method) {\n                if (transceiver[method]) {\n                    promises.push(transceiver[method].getStats());\n                }\n            });\n        });\n        var fixStatsType = function(stat) {\n            return {\n                inboundrtp: 'inbound-rtp',\n                outboundrtp: 'outbound-rtp',\n                candidatepair: 'candidate-pair',\n                localcandidate: 'local-candidate',\n                remotecandidate: 'remote-candidate'\n            }[stat.type] || stat.type;\n        };\n        return new Promise(function(resolve) {\n            // shim getStats with maplike support\n            var results = new Map();\n            Promise.all(promises).then(function(res) {\n                res.forEach(function(result) {\n                    Object.keys(result).forEach(function(id) {\n                        result[id].type = fixStatsType(result[id]);\n                        results.set(id, result[id]);\n                    });\n                });\n                resolve(results);\n            });\n        });\n    };\n\n    // legacy callback shims. Should be moved to adapter.js some days.\n    var methods = ['createOffer', 'createAnswer'];\n    methods.forEach(function(method) {\n        var nativeMethod = RTCPeerConnection.prototype[method];\n        RTCPeerConnection.prototype[method] = function() {\n            var args = arguments;\n            if (typeof args[0] === 'function' ||\n                typeof args[1] === 'function') { // legacy\n                return nativeMethod.apply(this, [arguments[2]])\n                    .then(function(description) {\n                        if (typeof args[0] === 'function') {\n                            args[0].apply(null, [description]);\n                        }\n                    }, function(error) {\n                        if (typeof args[1] === 'function') {\n                            args[1].apply(null, [error]);\n                        }\n                    });\n            }\n            return nativeMethod.apply(this, arguments);\n        };\n    });\n\n    methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n    methods.forEach(function(method) {\n        var nativeMethod = RTCPeerConnection.prototype[method];\n        RTCPeerConnection.prototype[method] = function() {\n            var args = arguments;\n            if (typeof args[1] === 'function' ||\n                typeof args[2] === 'function') { // legacy\n                return nativeMethod.apply(this, arguments)\n                    .then(function() {\n                        if (typeof args[1] === 'function') {\n                            args[1].apply(null);\n                        }\n                    }, function(error) {\n                        if (typeof args[2] === 'function') {\n                            args[2].apply(null, [error]);\n                        }\n                    });\n            }\n            return nativeMethod.apply(this, arguments);\n        };\n    });\n\n    // getStats is special. It doesn't have a spec legacy method yet we support\n    // getStats(something, cb) without error callbacks.\n    ['getStats'].forEach(function(method) {\n        var nativeMethod = RTCPeerConnection.prototype[method];\n        RTCPeerConnection.prototype[method] = function() {\n            var args = arguments;\n            if (typeof args[1] === 'function') {\n                return nativeMethod.apply(this, arguments)\n                    .then(function() {\n                        if (typeof args[1] === 'function') {\n                            args[1].apply(null);\n                        }\n                    });\n            }\n            return nativeMethod.apply(this, arguments);\n        };\n    });\n\n    return RTCPeerConnection;\n};\n\n},{\"sdp\":2}],2:[function(require,module,exports){\n/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n    return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n    return blob.trim().split('\\n').map(function(line) {\n        return line.trim();\n    });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n    var parts = blob.split('\\nm=');\n    return parts.map(function(part, index) {\n        return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n    });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n    var sections = SDPUtils.splitSections(blob);\n    return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n    var sections = SDPUtils.splitSections(blob);\n    sections.shift();\n    return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n    return SDPUtils.splitLines(blob).filter(function(line) {\n        return line.indexOf(prefix) === 0;\n    });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n    var parts;\n    // Parse both variants.\n    if (line.indexOf('a=candidate:') === 0) {\n        parts = line.substring(12).split(' ');\n    } else {\n        parts = line.substring(10).split(' ');\n    }\n\n    var candidate = {\n        foundation: parts[0],\n        component: parseInt(parts[1], 10),\n        protocol: parts[2].toLowerCase(),\n        priority: parseInt(parts[3], 10),\n        ip: parts[4],\n        port: parseInt(parts[5], 10),\n        // skip parts[6] == 'typ'\n        type: parts[7]\n    };\n\n    for (var i = 8; i < parts.length; i += 2) {\n        switch (parts[i]) {\n            case 'raddr':\n                candidate.relatedAddress = parts[i + 1];\n                break;\n            case 'rport':\n                candidate.relatedPort = parseInt(parts[i + 1], 10);\n                break;\n            case 'tcptype':\n                candidate.tcpType = parts[i + 1];\n                break;\n            case 'ufrag':\n                candidate.ufrag = parts[i + 1]; // for backward compability.\n                candidate.usernameFragment = parts[i + 1];\n                break;\n            default: // extension handling, in particular ufrag\n                candidate[parts[i]] = parts[i + 1];\n                break;\n        }\n    }\n    return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n    var sdp = [];\n    sdp.push(candidate.foundation);\n    sdp.push(candidate.component);\n    sdp.push(candidate.protocol.toUpperCase());\n    sdp.push(candidate.priority);\n    sdp.push(candidate.ip);\n    sdp.push(candidate.port);\n\n    var type = candidate.type;\n    sdp.push('typ');\n    sdp.push(type);\n    if (type !== 'host' && candidate.relatedAddress &&\n        candidate.relatedPort) {\n        sdp.push('raddr');\n        sdp.push(candidate.relatedAddress); // was: relAddr\n        sdp.push('rport');\n        sdp.push(candidate.relatedPort); // was: relPort\n    }\n    if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n        sdp.push('tcptype');\n        sdp.push(candidate.tcpType);\n    }\n    if (candidate.usernameFragment || candidate.ufrag) {\n        sdp.push('ufrag');\n        sdp.push(candidate.usernameFragment || candidate.ufrag);\n    }\n    return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n    return line.substr(14).split(' ');\n}\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n    var parts = line.substr(9).split(' ');\n    var parsed = {\n        payloadType: parseInt(parts.shift(), 10) // was: id\n    };\n\n    parts = parts[0].split('/');\n\n    parsed.name = parts[0];\n    parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n    // was: channels\n    parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n    return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n        pt = codec.preferredPayloadType;\n    }\n    return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n        (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n    var parts = line.substr(9).split(' ');\n    return {\n        id: parseInt(parts[0], 10),\n        direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n        uri: parts[1]\n    };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n    return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n        (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n            ? '/' + headerExtension.direction\n            : '') +\n        ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n    var parsed = {};\n    var kv;\n    var parts = line.substr(line.indexOf(' ') + 1).split(';');\n    for (var j = 0; j < parts.length; j++) {\n        kv = parts[j].trim().split('=');\n        parsed[kv[0].trim()] = kv[1];\n    }\n    return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n    var line = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n        pt = codec.preferredPayloadType;\n    }\n    if (codec.parameters && Object.keys(codec.parameters).length) {\n        var params = [];\n        Object.keys(codec.parameters).forEach(function(param) {\n            params.push(param + '=' + codec.parameters[param]);\n        });\n        line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n    }\n    return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n    var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n    return {\n        type: parts.shift(),\n        parameter: parts.join(' ')\n    };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n    var lines = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n        pt = codec.preferredPayloadType;\n    }\n    if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n        // FIXME: special handling for trr-int?\n        codec.rtcpFeedback.forEach(function(fb) {\n            lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n                (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n                '\\r\\n';\n        });\n    }\n    return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n    var sp = line.indexOf(' ');\n    var parts = {\n        ssrc: parseInt(line.substr(7, sp - 7), 10)\n    };\n    var colon = line.indexOf(':', sp);\n    if (colon > -1) {\n        parts.attribute = line.substr(sp + 1, colon - sp - 1);\n        parts.value = line.substr(colon + 1);\n    } else {\n        parts.attribute = line.substr(sp + 1);\n    }\n    return parts;\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n    var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n    if (mid) {\n        return mid.substr(6);\n    }\n}\n\nSDPUtils.parseFingerprint = function(line) {\n    var parts = line.substr(14).split(' ');\n    return {\n        algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n        value: parts[1]\n    };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n        'a=fingerprint:');\n    // Note: a=setup line is ignored since we use the 'auto' role.\n    // Note2: 'algorithm' is not case sensitive except in Edge.\n    return {\n        role: 'auto',\n        fingerprints: lines.map(SDPUtils.parseFingerprint)\n    };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n    var sdp = 'a=setup:' + setupType + '\\r\\n';\n    params.fingerprints.forEach(function(fp) {\n        sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n    });\n    return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    // Search in session part, too.\n    lines = lines.concat(SDPUtils.splitLines(sessionpart));\n    var iceParameters = {\n        usernameFragment: lines.filter(function(line) {\n            return line.indexOf('a=ice-ufrag:') === 0;\n        })[0].substr(12),\n        password: lines.filter(function(line) {\n            return line.indexOf('a=ice-pwd:') === 0;\n        })[0].substr(10)\n    };\n    return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n    return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n        'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n    var description = {\n        codecs: [],\n        headerExtensions: [],\n        fecMechanisms: [],\n        rtcp: []\n    };\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n        var pt = mline[i];\n        var rtpmapline = SDPUtils.matchPrefix(\n            mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n        if (rtpmapline) {\n            var codec = SDPUtils.parseRtpMap(rtpmapline);\n            var fmtps = SDPUtils.matchPrefix(\n                mediaSection, 'a=fmtp:' + pt + ' ');\n            // Only the first a=fmtp:<pt> is considered.\n            codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n            codec.rtcpFeedback = SDPUtils.matchPrefix(\n                mediaSection, 'a=rtcp-fb:' + pt + ' ')\n                .map(SDPUtils.parseRtcpFb);\n            description.codecs.push(codec);\n            // parse FEC mechanisms from rtpmap lines.\n            switch (codec.name.toUpperCase()) {\n                case 'RED':\n                case 'ULPFEC':\n                    description.fecMechanisms.push(codec.name.toUpperCase());\n                    break;\n                default: // only RED and ULPFEC are recognized as FEC mechanisms.\n                    break;\n            }\n        }\n    }\n    SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n        description.headerExtensions.push(SDPUtils.parseExtmap(line));\n    });\n    // FIXME: parse rtcp.\n    return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n    var sdp = '';\n\n    // Build the mline.\n    sdp += 'm=' + kind + ' ';\n    sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n    sdp += ' UDP/TLS/RTP/SAVPF ';\n    sdp += caps.codecs.map(function(codec) {\n        if (codec.preferredPayloadType !== undefined) {\n            return codec.preferredPayloadType;\n        }\n        return codec.payloadType;\n    }).join(' ') + '\\r\\n';\n\n    sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n    sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n    // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n    caps.codecs.forEach(function(codec) {\n        sdp += SDPUtils.writeRtpMap(codec);\n        sdp += SDPUtils.writeFmtp(codec);\n        sdp += SDPUtils.writeRtcpFb(codec);\n    });\n    var maxptime = 0;\n    caps.codecs.forEach(function(codec) {\n        if (codec.maxptime > maxptime) {\n            maxptime = codec.maxptime;\n        }\n    });\n    if (maxptime > 0) {\n        sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n    }\n    sdp += 'a=rtcp-mux\\r\\n';\n\n    caps.headerExtensions.forEach(function(extension) {\n        sdp += SDPUtils.writeExtmap(extension);\n    });\n    // FIXME: write fecMechanisms.\n    return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n    var encodingParameters = [];\n    var description = SDPUtils.parseRtpParameters(mediaSection);\n    var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n    var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n    // filter a=ssrc:... cname:, ignore PlanB-msid\n    var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n        .map(function(line) {\n            return SDPUtils.parseSsrcMedia(line);\n        })\n        .filter(function(parts) {\n            return parts.attribute === 'cname';\n        });\n    var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n    var secondarySsrc;\n\n    var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n        .map(function(line) {\n            var parts = line.split(' ');\n            parts.shift();\n            return parts.map(function(part) {\n                return parseInt(part, 10);\n            });\n        });\n    if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n        secondarySsrc = flows[0][1];\n    }\n\n    description.codecs.forEach(function(codec) {\n        if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n            var encParam = {\n                ssrc: primarySsrc,\n                codecPayloadType: parseInt(codec.parameters.apt, 10),\n                rtx: {\n                    ssrc: secondarySsrc\n                }\n            };\n            encodingParameters.push(encParam);\n            if (hasRed) {\n                encParam = JSON.parse(JSON.stringify(encParam));\n                encParam.fec = {\n                    ssrc: secondarySsrc,\n                    mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n                };\n                encodingParameters.push(encParam);\n            }\n        }\n    });\n    if (encodingParameters.length === 0 && primarySsrc) {\n        encodingParameters.push({\n            ssrc: primarySsrc\n        });\n    }\n\n    // we support both b=AS and b=TIAS but interpret AS as TIAS.\n    var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n    if (bandwidth.length) {\n        if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n            bandwidth = parseInt(bandwidth[0].substr(7), 10);\n        } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n            // use formula from JSEP to convert b=AS to TIAS value.\n            bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n                - (50 * 40 * 8);\n        } else {\n            bandwidth = undefined;\n        }\n        encodingParameters.forEach(function(params) {\n            params.maxBitrate = bandwidth;\n        });\n    }\n    return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n    var rtcpParameters = {};\n\n    var cname;\n    // Gets the first SSRC. Note that with RTX there might be multiple\n    // SSRCs.\n    var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n        .map(function(line) {\n            return SDPUtils.parseSsrcMedia(line);\n        })\n        .filter(function(obj) {\n            return obj.attribute === 'cname';\n        })[0];\n    if (remoteSsrc) {\n        rtcpParameters.cname = remoteSsrc.value;\n        rtcpParameters.ssrc = remoteSsrc.ssrc;\n    }\n\n    // Edge uses the compound attribute instead of reducedSize\n    // compound is !reducedSize\n    var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n    rtcpParameters.reducedSize = rsize.length > 0;\n    rtcpParameters.compound = rsize.length === 0;\n\n    // parses the rtcp-mux attrbute.\n    // Note that Edge does not support unmuxed RTCP.\n    var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n    rtcpParameters.mux = mux.length > 0;\n\n    return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n    var parts;\n    var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n    if (spec.length === 1) {\n        parts = spec[0].substr(7).split(' ');\n        return {stream: parts[0], track: parts[1]};\n    }\n    var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n        .map(function(line) {\n            return SDPUtils.parseSsrcMedia(line);\n        })\n        .filter(function(parts) {\n            return parts.attribute === 'msid';\n        });\n    if (planB.length > 0) {\n        parts = planB[0].value.split(' ');\n        return {stream: parts[0], track: parts[1]};\n    }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n    return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer) {\n    var sessionId;\n    var version = sessVer !== undefined ? sessVer : 2;\n    if (sessId) {\n        sessionId = sessId;\n    } else {\n        sessionId = SDPUtils.generateSessionId();\n    }\n    // FIXME: sess-id should be an NTP timestamp.\n    return 'v=0\\r\\n' +\n        'o=thisisadapterortc ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' +\n        's=-\\r\\n' +\n        't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n    var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n    // Map ICE parameters (ufrag, pwd) to SDP.\n    sdp += SDPUtils.writeIceParameters(\n        transceiver.iceGatherer.getLocalParameters());\n\n    // Map DTLS parameters to SDP.\n    sdp += SDPUtils.writeDtlsParameters(\n        transceiver.dtlsTransport.getLocalParameters(),\n        type === 'offer' ? 'actpass' : 'active');\n\n    sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n    if (transceiver.direction) {\n        sdp += 'a=' + transceiver.direction + '\\r\\n';\n    } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n        sdp += 'a=sendrecv\\r\\n';\n    } else if (transceiver.rtpSender) {\n        sdp += 'a=sendonly\\r\\n';\n    } else if (transceiver.rtpReceiver) {\n        sdp += 'a=recvonly\\r\\n';\n    } else {\n        sdp += 'a=inactive\\r\\n';\n    }\n\n    if (transceiver.rtpSender) {\n        // spec.\n        var msid = 'msid:' + stream.id + ' ' +\n            transceiver.rtpSender.track.id + '\\r\\n';\n        sdp += 'a=' + msid;\n\n        // for Chrome.\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n            ' ' + msid;\n        if (transceiver.sendEncodingParameters[0].rtx) {\n            sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                ' ' + msid;\n            sdp += 'a=ssrc-group:FID ' +\n                transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                transceiver.sendEncodingParameters[0].rtx.ssrc +\n                '\\r\\n';\n        }\n    }\n    // FIXME: this should be written by writeRtpDescription.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n    if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n            ' cname:' + SDPUtils.localCName + '\\r\\n';\n    }\n    return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n    // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n    var lines = SDPUtils.splitLines(mediaSection);\n    for (var i = 0; i < lines.length; i++) {\n        switch (lines[i]) {\n            case 'a=sendrecv':\n            case 'a=sendonly':\n            case 'a=recvonly':\n            case 'a=inactive':\n                return lines[i].substr(2);\n            default:\n            // FIXME: What should happen here?\n        }\n    }\n    if (sessionpart) {\n        return SDPUtils.getDirection(sessionpart);\n    }\n    return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n    return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var parts = lines[0].substr(2).split(' ');\n    return {\n        kind: parts[0],\n        port: parseInt(parts[1], 10),\n        protocol: parts[2],\n        fmt: parts.slice(3).join(' ')\n    };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n    var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n    var parts = line.substr(2).split(' ');\n    return {\n        username: parts[0],\n        sessionId: parts[1],\n        sessionVersion: parseInt(parts[2], 10),\n        netType: parts[3],\n        addressType: parts[4],\n        address: parts[5],\n    };\n}\n\n// Expose public methods.\nif (typeof module === 'object') {\n    module.exports = SDPUtils;\n}\n\n},{}],3:[function(require,module,exports){\n(function (global){\n    /*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n    /* eslint-env node */\n\n    'use strict';\n\n    var adapterFactory = require('./adapter_factory.js');\n    module.exports = adapterFactory({window: global.window});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./adapter_factory.js\":4}],4:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n\n'use strict';\n\nvar utils = require('./utils');\n// Shimming starts here.\nmodule.exports = function(dependencies, opts) {\n    var window = dependencies && dependencies.window;\n\n    var options = {\n        shimChrome: true,\n        shimFirefox: true,\n        shimEdge: true,\n        shimSafari: true,\n    };\n\n    for (var key in opts) {\n        if (hasOwnProperty.call(opts, key)) {\n            options[key] = opts[key];\n        }\n    }\n\n    // Utils.\n    var logging = utils.log;\n    var browserDetails = utils.detectBrowser(window);\n\n    // Uncomment the line below if you want logging to occur, including logging\n    // for the switch statement below. Can also be turned on in the browser via\n    // adapter.disableLog(false), but then logging from the switch statement below\n    // will not appear.\n    // require('./utils').disableLog(false);\n\n    // Browser shims.\n    var chromeShim = require('./chrome/chrome_shim') || null;\n    var edgeShim = require('./edge/edge_shim') || null;\n    var firefoxShim = require('./firefox/firefox_shim') || null;\n    var safariShim = require('./safari/safari_shim') || null;\n    var commonShim = require('./common_shim') || null;\n\n    // Export to the adapter global object visible in the browser.\n    var adapter = {\n        browserDetails: browserDetails,\n        commonShim: commonShim,\n        extractVersion: utils.extractVersion,\n        disableLog: utils.disableLog,\n        disableWarnings: utils.disableWarnings\n    };\n\n    // Shim browser if found.\n    switch (browserDetails.browser) {\n        case 'chrome':\n            if (!chromeShim || !chromeShim.shimPeerConnection ||\n                !options.shimChrome) {\n                logging('Chrome shim is not included in this adapter release.');\n                return adapter;\n            }\n            logging('adapter.js shimming chrome.');\n            // Export to the adapter global object visible in the browser.\n            adapter.browserShim = chromeShim;\n            commonShim.shimCreateObjectURL(window);\n\n            chromeShim.shimGetUserMedia(window);\n            chromeShim.shimMediaStream(window);\n            chromeShim.shimSourceObject(window);\n            chromeShim.shimPeerConnection(window);\n            chromeShim.shimOnTrack(window);\n            chromeShim.shimAddTrackRemoveTrack(window);\n            chromeShim.shimGetSendersWithDtmf(window);\n\n            commonShim.shimRTCIceCandidate(window);\n            commonShim.shimMaxMessageSize(window);\n            commonShim.shimSendThrowTypeError(window);\n            break;\n        case 'firefox':\n            if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n                !options.shimFirefox) {\n                logging('Firefox shim is not included in this adapter release.');\n                return adapter;\n            }\n            logging('adapter.js shimming firefox.');\n            // Export to the adapter global object visible in the browser.\n            adapter.browserShim = firefoxShim;\n            commonShim.shimCreateObjectURL(window);\n\n            firefoxShim.shimGetUserMedia(window);\n            firefoxShim.shimSourceObject(window);\n            firefoxShim.shimPeerConnection(window);\n            firefoxShim.shimOnTrack(window);\n            firefoxShim.shimRemoveStream(window);\n\n            commonShim.shimRTCIceCandidate(window);\n            commonShim.shimMaxMessageSize(window);\n            commonShim.shimSendThrowTypeError(window);\n            break;\n        case 'edge':\n            if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n                logging('MS edge shim is not included in this adapter release.');\n                return adapter;\n            }\n            logging('adapter.js shimming edge.');\n            // Export to the adapter global object visible in the browser.\n            adapter.browserShim = edgeShim;\n            commonShim.shimCreateObjectURL(window);\n\n            edgeShim.shimGetUserMedia(window);\n            edgeShim.shimPeerConnection(window);\n            edgeShim.shimReplaceTrack(window);\n\n            // the edge shim implements the full RTCIceCandidate object.\n\n            commonShim.shimMaxMessageSize(window);\n            commonShim.shimSendThrowTypeError(window);\n            break;\n        case 'safari':\n            if (!safariShim || !options.shimSafari) {\n                logging('Safari shim is not included in this adapter release.');\n                return adapter;\n            }\n            logging('adapter.js shimming safari.');\n            // Export to the adapter global object visible in the browser.\n            adapter.browserShim = safariShim;\n            commonShim.shimCreateObjectURL(window);\n\n            safariShim.shimRTCIceServerUrls(window);\n            safariShim.shimCallbacksAPI(window);\n            safariShim.shimLocalStreamsAPI(window);\n            safariShim.shimRemoteStreamsAPI(window);\n            safariShim.shimTrackEventTransceiver(window);\n            safariShim.shimGetUserMedia(window);\n            safariShim.shimCreateOfferLegacy(window);\n\n            commonShim.shimRTCIceCandidate(window);\n            commonShim.shimMaxMessageSize(window);\n            commonShim.shimSendThrowTypeError(window);\n            break;\n        default:\n            logging('Unsupported browser!');\n            break;\n    }\n\n    return adapter;\n};\n\n},{\"./chrome/chrome_shim\":5,\"./common_shim\":7,\"./edge/edge_shim\":8,\"./firefox/firefox_shim\":10,\"./safari/safari_shim\":12,\"./utils\":13}],5:[function(require,module,exports){\n\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\nmodule.exports = {\n    shimGetUserMedia: require('./getusermedia'),\n    shimMediaStream: function(window) {\n        window.MediaStream = window.MediaStream || window.webkitMediaStream;\n    },\n\n    shimOnTrack: function(window) {\n        if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n            window.RTCPeerConnection.prototype)) {\n            Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                get: function() {\n                    return this._ontrack;\n                },\n                set: function(f) {\n                    if (this._ontrack) {\n                        this.removeEventListener('track', this._ontrack);\n                    }\n                    this.addEventListener('track', this._ontrack = f);\n                }\n            });\n            var origSetRemoteDescription =\n                window.RTCPeerConnection.prototype.setRemoteDescription;\n            window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n                var pc = this;\n                if (!pc._ontrackpoly) {\n                    pc._ontrackpoly = function(e) {\n                        // onaddstream does not fire when a track is added to an existing\n                        // stream. But stream.onaddtrack is implemented so we use that.\n                        e.stream.addEventListener('addtrack', function(te) {\n                            var receiver;\n                            if (window.RTCPeerConnection.prototype.getReceivers) {\n                                receiver = pc.getReceivers().find(function(r) {\n                                    return r.track && r.track.id === te.track.id;\n                                });\n                            } else {\n                                receiver = {track: te.track};\n                            }\n\n                            var event = new Event('track');\n                            event.track = te.track;\n                            event.receiver = receiver;\n                            event.transceiver = {receiver: receiver};\n                            event.streams = [e.stream];\n                            pc.dispatchEvent(event);\n                        });\n                        e.stream.getTracks().forEach(function(track) {\n                            var receiver;\n                            if (window.RTCPeerConnection.prototype.getReceivers) {\n                                receiver = pc.getReceivers().find(function(r) {\n                                    return r.track && r.track.id === track.id;\n                                });\n                            } else {\n                                receiver = {track: track};\n                            }\n                            var event = new Event('track');\n                            event.track = track;\n                            event.receiver = receiver;\n                            event.transceiver = {receiver: receiver};\n                            event.streams = [e.stream];\n                            pc.dispatchEvent(event);\n                        });\n                    };\n                    pc.addEventListener('addstream', pc._ontrackpoly);\n                }\n                return origSetRemoteDescription.apply(pc, arguments);\n            };\n        } else if (!('RTCRtpTransceiver' in window)) {\n            utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n                if (!e.transceiver) {\n                    e.transceiver = {receiver: e.receiver};\n                }\n                return e;\n            });\n        }\n    },\n\n    shimGetSendersWithDtmf: function(window) {\n        // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n        if (typeof window === 'object' && window.RTCPeerConnection &&\n            !('getSenders' in window.RTCPeerConnection.prototype) &&\n            'createDTMFSender' in window.RTCPeerConnection.prototype) {\n            var shimSenderWithDtmf = function(pc, track) {\n                return {\n                    track: track,\n                    get dtmf() {\n                        if (this._dtmf === undefined) {\n                            if (track.kind === 'audio') {\n                                this._dtmf = pc.createDTMFSender(track);\n                            } else {\n                                this._dtmf = null;\n                            }\n                        }\n                        return this._dtmf;\n                    },\n                    _pc: pc\n                };\n            };\n\n            // augment addTrack when getSenders is not available.\n            if (!window.RTCPeerConnection.prototype.getSenders) {\n                window.RTCPeerConnection.prototype.getSenders = function() {\n                    this._senders = this._senders || [];\n                    return this._senders.slice(); // return a copy of the internal state.\n                };\n                var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n                window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                    var pc = this;\n                    var sender = origAddTrack.apply(pc, arguments);\n                    if (!sender) {\n                        sender = shimSenderWithDtmf(pc, track);\n                        pc._senders.push(sender);\n                    }\n                    return sender;\n                };\n\n                var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n                window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n                    var pc = this;\n                    origRemoveTrack.apply(pc, arguments);\n                    var idx = pc._senders.indexOf(sender);\n                    if (idx !== -1) {\n                        pc._senders.splice(idx, 1);\n                    }\n                };\n            }\n            var origAddStream = window.RTCPeerConnection.prototype.addStream;\n            window.RTCPeerConnection.prototype.addStream = function(stream) {\n                var pc = this;\n                pc._senders = pc._senders || [];\n                origAddStream.apply(pc, [stream]);\n                stream.getTracks().forEach(function(track) {\n                    pc._senders.push(shimSenderWithDtmf(pc, track));\n                });\n            };\n\n            var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n            window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                var pc = this;\n                pc._senders = pc._senders || [];\n                origRemoveStream.apply(pc, [stream]);\n\n                stream.getTracks().forEach(function(track) {\n                    var sender = pc._senders.find(function(s) {\n                        return s.track === track;\n                    });\n                    if (sender) {\n                        pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n                    }\n                });\n            };\n        } else if (typeof window === 'object' && window.RTCPeerConnection &&\n            'getSenders' in window.RTCPeerConnection.prototype &&\n            'createDTMFSender' in window.RTCPeerConnection.prototype &&\n            window.RTCRtpSender &&\n            !('dtmf' in window.RTCRtpSender.prototype)) {\n            var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n            window.RTCPeerConnection.prototype.getSenders = function() {\n                var pc = this;\n                var senders = origGetSenders.apply(pc, []);\n                senders.forEach(function(sender) {\n                    sender._pc = pc;\n                });\n                return senders;\n            };\n\n            Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n                get: function() {\n                    if (this._dtmf === undefined) {\n                        if (this.track.kind === 'audio') {\n                            this._dtmf = this._pc.createDTMFSender(this.track);\n                        } else {\n                            this._dtmf = null;\n                        }\n                    }\n                    return this._dtmf;\n                }\n            });\n        }\n    },\n\n    shimSourceObject: function(window) {\n        var URL = window && window.URL;\n\n        if (typeof window === 'object') {\n            if (window.HTMLMediaElement &&\n                !('srcObject' in window.HTMLMediaElement.prototype)) {\n                // Shim the srcObject property, once, when HTMLMediaElement is found.\n                Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                    get: function() {\n                        return this._srcObject;\n                    },\n                    set: function(stream) {\n                        var self = this;\n                        // Use _srcObject as a private property for this shim\n                        this._srcObject = stream;\n                        if (this.src) {\n                            URL.revokeObjectURL(this.src);\n                        }\n\n                        if (!stream) {\n                            this.src = '';\n                            return undefined;\n                        }\n                        this.src = URL.createObjectURL(stream);\n                        // We need to recreate the blob url when a track is added or\n                        // removed. Doing it manually since we want to avoid a recursion.\n                        stream.addEventListener('addtrack', function() {\n                            if (self.src) {\n                                URL.revokeObjectURL(self.src);\n                            }\n                            self.src = URL.createObjectURL(stream);\n                        });\n                        stream.addEventListener('removetrack', function() {\n                            if (self.src) {\n                                URL.revokeObjectURL(self.src);\n                            }\n                            self.src = URL.createObjectURL(stream);\n                        });\n                    }\n                });\n            }\n        }\n    },\n\n    shimAddTrackRemoveTrackWithNative: function(window) {\n        // shim addTrack/removeTrack with native variants in order to make\n        // the interactions with legacy getLocalStreams behave as in other browsers.\n        // Keeps a mapping stream.id => [stream, rtpsenders...]\n        window.RTCPeerConnection.prototype.getLocalStreams = function() {\n            var pc = this;\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n            return Object.keys(this._shimmedLocalStreams).map(function(streamId) {\n                return pc._shimmedLocalStreams[streamId][0];\n            });\n        };\n\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n            if (!stream) {\n                return origAddTrack.apply(this, arguments);\n            }\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n            var sender = origAddTrack.apply(this, arguments);\n            if (!this._shimmedLocalStreams[stream.id]) {\n                this._shimmedLocalStreams[stream.id] = [stream, sender];\n            } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n                this._shimmedLocalStreams[stream.id].push(sender);\n            }\n            return sender;\n        };\n\n        var origAddStream = window.RTCPeerConnection.prototype.addStream;\n        window.RTCPeerConnection.prototype.addStream = function(stream) {\n            var pc = this;\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n            stream.getTracks().forEach(function(track) {\n                var alreadyExists = pc.getSenders().find(function(s) {\n                    return s.track === track;\n                });\n                if (alreadyExists) {\n                    throw new DOMException('Track already exists.',\n                        'InvalidAccessError');\n                }\n            });\n            var existingSenders = pc.getSenders();\n            origAddStream.apply(this, arguments);\n            var newSenders = pc.getSenders().filter(function(newSender) {\n                return existingSenders.indexOf(newSender) === -1;\n            });\n            this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n        };\n\n        var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n        window.RTCPeerConnection.prototype.removeStream = function(stream) {\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n            delete this._shimmedLocalStreams[stream.id];\n            return origRemoveStream.apply(this, arguments);\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n            var pc = this;\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n            if (sender) {\n                Object.keys(this._shimmedLocalStreams).forEach(function(streamId) {\n                    var idx = pc._shimmedLocalStreams[streamId].indexOf(sender);\n                    if (idx !== -1) {\n                        pc._shimmedLocalStreams[streamId].splice(idx, 1);\n                    }\n                    if (pc._shimmedLocalStreams[streamId].length === 1) {\n                        delete pc._shimmedLocalStreams[streamId];\n                    }\n                });\n            }\n            return origRemoveTrack.apply(this, arguments);\n        };\n    },\n\n    shimAddTrackRemoveTrack: function(window) {\n        var browserDetails = utils.detectBrowser(window);\n        // shim addTrack and removeTrack.\n        if (window.RTCPeerConnection.prototype.addTrack &&\n            browserDetails.version >= 65) {\n            return this.shimAddTrackRemoveTrackWithNative(window);\n        }\n\n        // also shim pc.getLocalStreams when addTrack is shimmed\n        // to return the original streams.\n        var origGetLocalStreams = window.RTCPeerConnection.prototype\n            .getLocalStreams;\n        window.RTCPeerConnection.prototype.getLocalStreams = function() {\n            var pc = this;\n            var nativeStreams = origGetLocalStreams.apply(this);\n            pc._reverseStreams = pc._reverseStreams || {};\n            return nativeStreams.map(function(stream) {\n                return pc._reverseStreams[stream.id];\n            });\n        };\n\n        var origAddStream = window.RTCPeerConnection.prototype.addStream;\n        window.RTCPeerConnection.prototype.addStream = function(stream) {\n            var pc = this;\n            pc._streams = pc._streams || {};\n            pc._reverseStreams = pc._reverseStreams || {};\n\n            stream.getTracks().forEach(function(track) {\n                var alreadyExists = pc.getSenders().find(function(s) {\n                    return s.track === track;\n                });\n                if (alreadyExists) {\n                    throw new DOMException('Track already exists.',\n                        'InvalidAccessError');\n                }\n            });\n            // Add identity mapping for consistency with addTrack.\n            // Unless this is being used with a stream from addTrack.\n            if (!pc._reverseStreams[stream.id]) {\n                var newStream = new window.MediaStream(stream.getTracks());\n                pc._streams[stream.id] = newStream;\n                pc._reverseStreams[newStream.id] = stream;\n                stream = newStream;\n            }\n            origAddStream.apply(pc, [stream]);\n        };\n\n        var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n        window.RTCPeerConnection.prototype.removeStream = function(stream) {\n            var pc = this;\n            pc._streams = pc._streams || {};\n            pc._reverseStreams = pc._reverseStreams || {};\n\n            origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n            delete pc._reverseStreams[(pc._streams[stream.id] ?\n                pc._streams[stream.id].id : stream.id)];\n            delete pc._streams[stream.id];\n        };\n\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n            var pc = this;\n            if (pc.signalingState === 'closed') {\n                throw new DOMException(\n                    'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n                    'InvalidStateError');\n            }\n            var streams = [].slice.call(arguments, 1);\n            if (streams.length !== 1 ||\n                !streams[0].getTracks().find(function(t) {\n                    return t === track;\n                })) {\n                // this is not fully correct but all we can manage without\n                // [[associated MediaStreams]] internal slot.\n                throw new DOMException(\n                    'The adapter.js addTrack polyfill only supports a single ' +\n                    ' stream which is associated with the specified track.',\n                    'NotSupportedError');\n            }\n\n            var alreadyExists = pc.getSenders().find(function(s) {\n                return s.track === track;\n            });\n            if (alreadyExists) {\n                throw new DOMException('Track already exists.',\n                    'InvalidAccessError');\n            }\n\n            pc._streams = pc._streams || {};\n            pc._reverseStreams = pc._reverseStreams || {};\n            var oldStream = pc._streams[stream.id];\n            if (oldStream) {\n                // this is using odd Chrome behaviour, use with caution:\n                // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n                // Note: we rely on the high-level addTrack/dtmf shim to\n                // create the sender with a dtmf sender.\n                oldStream.addTrack(track);\n\n                // Trigger ONN async.\n                Promise.resolve().then(function() {\n                    pc.dispatchEvent(new Event('negotiationneeded'));\n                });\n            } else {\n                var newStream = new window.MediaStream([track]);\n                pc._streams[stream.id] = newStream;\n                pc._reverseStreams[newStream.id] = stream;\n                pc.addStream(newStream);\n            }\n            return pc.getSenders().find(function(s) {\n                return s.track === track;\n            });\n        };\n\n        // replace the internal stream id with the external one and\n        // vice versa.\n        function replaceInternalStreamId(pc, description) {\n            var sdp = description.sdp;\n            Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n                var externalStream = pc._reverseStreams[internalId];\n                var internalStream = pc._streams[externalStream.id];\n                sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n                    externalStream.id);\n            });\n            return new RTCSessionDescription({\n                type: description.type,\n                sdp: sdp\n            });\n        }\n        function replaceExternalStreamId(pc, description) {\n            var sdp = description.sdp;\n            Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n                var externalStream = pc._reverseStreams[internalId];\n                var internalStream = pc._streams[externalStream.id];\n                sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n                    internalStream.id);\n            });\n            return new RTCSessionDescription({\n                type: description.type,\n                sdp: sdp\n            });\n        }\n        ['createOffer', 'createAnswer'].forEach(function(method) {\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\n            window.RTCPeerConnection.prototype[method] = function() {\n                var pc = this;\n                var args = arguments;\n                var isLegacyCall = arguments.length &&\n                    typeof arguments[0] === 'function';\n                if (isLegacyCall) {\n                    return nativeMethod.apply(pc, [\n                        function(description) {\n                            var desc = replaceInternalStreamId(pc, description);\n                            args[0].apply(null, [desc]);\n                        },\n                        function(err) {\n                            if (args[1]) {\n                                args[1].apply(null, err);\n                            }\n                        }, arguments[2]\n                    ]);\n                }\n                return nativeMethod.apply(pc, arguments)\n                    .then(function(description) {\n                        return replaceInternalStreamId(pc, description);\n                    });\n            };\n        });\n\n        var origSetLocalDescription =\n            window.RTCPeerConnection.prototype.setLocalDescription;\n        window.RTCPeerConnection.prototype.setLocalDescription = function() {\n            var pc = this;\n            if (!arguments.length || !arguments[0].type) {\n                return origSetLocalDescription.apply(pc, arguments);\n            }\n            arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n            return origSetLocalDescription.apply(pc, arguments);\n        };\n\n        // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n        var origLocalDescription = Object.getOwnPropertyDescriptor(\n            window.RTCPeerConnection.prototype, 'localDescription');\n        Object.defineProperty(window.RTCPeerConnection.prototype,\n            'localDescription', {\n                get: function() {\n                    var pc = this;\n                    var description = origLocalDescription.get.apply(this);\n                    if (description.type === '') {\n                        return description;\n                    }\n                    return replaceInternalStreamId(pc, description);\n                }\n            });\n\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n            var pc = this;\n            if (pc.signalingState === 'closed') {\n                throw new DOMException(\n                    'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n                    'InvalidStateError');\n            }\n            // We can not yet check for sender instanceof RTCRtpSender\n            // since we shim RTPSender. So we check if sender._pc is set.\n            if (!sender._pc) {\n                throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n                    'does not implement interface RTCRtpSender.', 'TypeError');\n            }\n            var isLocal = sender._pc === pc;\n            if (!isLocal) {\n                throw new DOMException('Sender was not created by this connection.',\n                    'InvalidAccessError');\n            }\n\n            // Search for the native stream the senders track belongs to.\n            pc._streams = pc._streams || {};\n            var stream;\n            Object.keys(pc._streams).forEach(function(streamid) {\n                var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n                    return sender.track === track;\n                });\n                if (hasTrack) {\n                    stream = pc._streams[streamid];\n                }\n            });\n\n            if (stream) {\n                if (stream.getTracks().length === 1) {\n                    // if this is the last track of the stream, remove the stream. This\n                    // takes care of any shimmed _senders.\n                    pc.removeStream(pc._reverseStreams[stream.id]);\n                } else {\n                    // relying on the same odd chrome behaviour as above.\n                    stream.removeTrack(sender.track);\n                }\n                pc.dispatchEvent(new Event('negotiationneeded'));\n            }\n        };\n    },\n\n    shimPeerConnection: function(window) {\n        var browserDetails = utils.detectBrowser(window);\n\n        // The RTCPeerConnection object.\n        if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n            window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                // Translate iceTransportPolicy to iceTransports,\n                // see https://code.google.com/p/webrtc/issues/detail?id=4869\n                // this was fixed in M56 along with unprefixing RTCPeerConnection.\n                logging('PeerConnection');\n                if (pcConfig && pcConfig.iceTransportPolicy) {\n                    pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n                }\n\n                return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n            };\n            window.RTCPeerConnection.prototype =\n                window.webkitRTCPeerConnection.prototype;\n            // wrap static methods. Currently just generateCertificate.\n            if (window.webkitRTCPeerConnection.generateCertificate) {\n                Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                    get: function() {\n                        return window.webkitRTCPeerConnection.generateCertificate;\n                    }\n                });\n            }\n        } else {\n            // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n            var OrigPeerConnection = window.RTCPeerConnection;\n            window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                if (pcConfig && pcConfig.iceServers) {\n                    var newIceServers = [];\n                    for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                        var server = pcConfig.iceServers[i];\n                        if (!server.hasOwnProperty('urls') &&\n                            server.hasOwnProperty('url')) {\n                            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n                            server = JSON.parse(JSON.stringify(server));\n                            server.urls = server.url;\n                            newIceServers.push(server);\n                        } else {\n                            newIceServers.push(pcConfig.iceServers[i]);\n                        }\n                    }\n                    pcConfig.iceServers = newIceServers;\n                }\n                return new OrigPeerConnection(pcConfig, pcConstraints);\n            };\n            window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n            // wrap static methods. Currently just generateCertificate.\n            Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                get: function() {\n                    return OrigPeerConnection.generateCertificate;\n                }\n            });\n        }\n\n        var origGetStats = window.RTCPeerConnection.prototype.getStats;\n        window.RTCPeerConnection.prototype.getStats = function(selector,\n                                                               successCallback, errorCallback) {\n            var pc = this;\n            var args = arguments;\n\n            // If selector is a function then we are in the old style stats so just\n            // pass back the original getStats format to avoid breaking old users.\n            if (arguments.length > 0 && typeof selector === 'function') {\n                return origGetStats.apply(this, arguments);\n            }\n\n            // When spec-style getStats is supported, return those when called with\n            // either no arguments or the selector argument is null.\n            if (origGetStats.length === 0 && (arguments.length === 0 ||\n                typeof arguments[0] !== 'function')) {\n                return origGetStats.apply(this, []);\n            }\n\n            var fixChromeStats_ = function(response) {\n                var standardReport = {};\n                var reports = response.result();\n                reports.forEach(function(report) {\n                    var standardStats = {\n                        id: report.id,\n                        timestamp: report.timestamp,\n                        type: {\n                            localcandidate: 'local-candidate',\n                            remotecandidate: 'remote-candidate'\n                        }[report.type] || report.type\n                    };\n                    report.names().forEach(function(name) {\n                        standardStats[name] = report.stat(name);\n                    });\n                    standardReport[standardStats.id] = standardStats;\n                });\n\n                return standardReport;\n            };\n\n            // shim getStats with maplike support\n            var makeMapStats = function(stats) {\n                return new Map(Object.keys(stats).map(function(key) {\n                    return [key, stats[key]];\n                }));\n            };\n\n            if (arguments.length >= 2) {\n                var successCallbackWrapper_ = function(response) {\n                    args[1](makeMapStats(fixChromeStats_(response)));\n                };\n\n                return origGetStats.apply(this, [successCallbackWrapper_,\n                    arguments[0]]);\n            }\n\n            // promise-support\n            return new Promise(function(resolve, reject) {\n                origGetStats.apply(pc, [\n                    function(response) {\n                        resolve(makeMapStats(fixChromeStats_(response)));\n                    }, reject]);\n            }).then(successCallback, errorCallback);\n        };\n\n        // add promise support -- natively available in Chrome 51\n        if (browserDetails.version < 51) {\n            ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                .forEach(function(method) {\n                    var nativeMethod = window.RTCPeerConnection.prototype[method];\n                    window.RTCPeerConnection.prototype[method] = function() {\n                        var args = arguments;\n                        var pc = this;\n                        var promise = new Promise(function(resolve, reject) {\n                            nativeMethod.apply(pc, [args[0], resolve, reject]);\n                        });\n                        if (args.length < 2) {\n                            return promise;\n                        }\n                        return promise.then(function() {\n                                args[1].apply(null, []);\n                            },\n                            function(err) {\n                                if (args.length >= 3) {\n                                    args[2].apply(null, [err]);\n                                }\n                            });\n                    };\n                });\n        }\n\n        // promise support for createOffer and createAnswer. Available (without\n        // bugs) since M52: crbug/619289\n        if (browserDetails.version < 52) {\n            ['createOffer', 'createAnswer'].forEach(function(method) {\n                var nativeMethod = window.RTCPeerConnection.prototype[method];\n                window.RTCPeerConnection.prototype[method] = function() {\n                    var pc = this;\n                    if (arguments.length < 1 || (arguments.length === 1 &&\n                        typeof arguments[0] === 'object')) {\n                        var opts = arguments.length === 1 ? arguments[0] : undefined;\n                        return new Promise(function(resolve, reject) {\n                            nativeMethod.apply(pc, [resolve, reject, opts]);\n                        });\n                    }\n                    return nativeMethod.apply(this, arguments);\n                };\n            });\n        }\n\n        // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n        ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n            .forEach(function(method) {\n                var nativeMethod = window.RTCPeerConnection.prototype[method];\n                window.RTCPeerConnection.prototype[method] = function() {\n                    arguments[0] = new ((method === 'addIceCandidate') ?\n                        window.RTCIceCandidate :\n                        window.RTCSessionDescription)(arguments[0]);\n                    return nativeMethod.apply(this, arguments);\n                };\n            });\n\n        // support for addIceCandidate(null or undefined)\n        var nativeAddIceCandidate =\n            window.RTCPeerConnection.prototype.addIceCandidate;\n        window.RTCPeerConnection.prototype.addIceCandidate = function() {\n            if (!arguments[0]) {\n                if (arguments[1]) {\n                    arguments[1].apply(null);\n                }\n                return Promise.resolve();\n            }\n            return nativeAddIceCandidate.apply(this, arguments);\n        };\n    }\n};\n\n},{\"../utils.js\":13,\"./getusermedia\":6}],6:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n    var browserDetails = utils.detectBrowser(window);\n    var navigator = window && window.navigator;\n\n    var constraintsToChrome_ = function(c) {\n        if (typeof c !== 'object' || c.mandatory || c.optional) {\n            return c;\n        }\n        var cc = {};\n        Object.keys(c).forEach(function(key) {\n            if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                return;\n            }\n            var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n            if (r.exact !== undefined && typeof r.exact === 'number') {\n                r.min = r.max = r.exact;\n            }\n            var oldname_ = function(prefix, name) {\n                if (prefix) {\n                    return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n                }\n                return (name === 'deviceId') ? 'sourceId' : name;\n            };\n            if (r.ideal !== undefined) {\n                cc.optional = cc.optional || [];\n                var oc = {};\n                if (typeof r.ideal === 'number') {\n                    oc[oldname_('min', key)] = r.ideal;\n                    cc.optional.push(oc);\n                    oc = {};\n                    oc[oldname_('max', key)] = r.ideal;\n                    cc.optional.push(oc);\n                } else {\n                    oc[oldname_('', key)] = r.ideal;\n                    cc.optional.push(oc);\n                }\n            }\n            if (r.exact !== undefined && typeof r.exact !== 'number') {\n                cc.mandatory = cc.mandatory || {};\n                cc.mandatory[oldname_('', key)] = r.exact;\n            } else {\n                ['min', 'max'].forEach(function(mix) {\n                    if (r[mix] !== undefined) {\n                        cc.mandatory = cc.mandatory || {};\n                        cc.mandatory[oldname_(mix, key)] = r[mix];\n                    }\n                });\n            }\n        });\n        if (c.advanced) {\n            cc.optional = (cc.optional || []).concat(c.advanced);\n        }\n        return cc;\n    };\n\n    var shimConstraints_ = function(constraints, func) {\n        if (browserDetails.version >= 61) {\n            return func(constraints);\n        }\n        constraints = JSON.parse(JSON.stringify(constraints));\n        if (constraints && typeof constraints.audio === 'object') {\n            var remap = function(obj, a, b) {\n                if (a in obj && !(b in obj)) {\n                    obj[b] = obj[a];\n                    delete obj[a];\n                }\n            };\n            constraints = JSON.parse(JSON.stringify(constraints));\n            remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n            remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n            constraints.audio = constraintsToChrome_(constraints.audio);\n        }\n        if (constraints && typeof constraints.video === 'object') {\n            // Shim facingMode for mobile & surface pro.\n            var face = constraints.video.facingMode;\n            face = face && ((typeof face === 'object') ? face : {ideal: face});\n            var getSupportedFacingModeLies = browserDetails.version < 66;\n\n            if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                face.ideal === 'user' || face.ideal === 'environment')) &&\n                !(navigator.mediaDevices.getSupportedConstraints &&\n                    navigator.mediaDevices.getSupportedConstraints().facingMode &&\n                    !getSupportedFacingModeLies)) {\n                delete constraints.video.facingMode;\n                var matches;\n                if (face.exact === 'environment' || face.ideal === 'environment') {\n                    matches = ['back', 'rear'];\n                } else if (face.exact === 'user' || face.ideal === 'user') {\n                    matches = ['front'];\n                }\n                if (matches) {\n                    // Look for matches in label, or use last cam for back (typical).\n                    return navigator.mediaDevices.enumerateDevices()\n                        .then(function(devices) {\n                            devices = devices.filter(function(d) {\n                                return d.kind === 'videoinput';\n                            });\n                            var dev = devices.find(function(d) {\n                                return matches.some(function(match) {\n                                    return d.label.toLowerCase().indexOf(match) !== -1;\n                                });\n                            });\n                            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n                                dev = devices[devices.length - 1]; // more likely the back cam\n                            }\n                            if (dev) {\n                                constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                    {ideal: dev.deviceId};\n                            }\n                            constraints.video = constraintsToChrome_(constraints.video);\n                            logging('chrome: ' + JSON.stringify(constraints));\n                            return func(constraints);\n                        });\n                }\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n        }\n        logging('chrome: ' + JSON.stringify(constraints));\n        return func(constraints);\n    };\n\n    var shimError_ = function(e) {\n        return {\n            name: {\n                PermissionDeniedError: 'NotAllowedError',\n                PermissionDismissedError: 'NotAllowedError',\n                InvalidStateError: 'NotAllowedError',\n                DevicesNotFoundError: 'NotFoundError',\n                ConstraintNotSatisfiedError: 'OverconstrainedError',\n                TrackStartError: 'NotReadableError',\n                MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n                MediaDeviceKillSwitchOn: 'NotAllowedError',\n                TabCaptureError: 'AbortError',\n                ScreenCaptureError: 'AbortError',\n                DeviceCaptureError: 'AbortError'\n            }[e.name] || e.name,\n            message: e.message,\n            constraint: e.constraintName,\n            toString: function() {\n                return this.name + (this.message && ': ') + this.message;\n            }\n        };\n    };\n\n    var getUserMedia_ = function(constraints, onSuccess, onError) {\n        shimConstraints_(constraints, function(c) {\n            navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n                if (onError) {\n                    onError(shimError_(e));\n                }\n            });\n        });\n    };\n\n    navigator.getUserMedia = getUserMedia_;\n\n    // Returns the result of getUserMedia as a Promise.\n    var getUserMediaPromise_ = function(constraints) {\n        return new Promise(function(resolve, reject) {\n            navigator.getUserMedia(constraints, resolve, reject);\n        });\n    };\n\n    if (!navigator.mediaDevices) {\n        navigator.mediaDevices = {\n            getUserMedia: getUserMediaPromise_,\n            enumerateDevices: function() {\n                return new Promise(function(resolve) {\n                    var kinds = {audio: 'audioinput', video: 'videoinput'};\n                    return window.MediaStreamTrack.getSources(function(devices) {\n                        resolve(devices.map(function(device) {\n                            return {label: device.label,\n                                kind: kinds[device.kind],\n                                deviceId: device.id,\n                                groupId: ''};\n                        }));\n                    });\n                });\n            },\n            getSupportedConstraints: function() {\n                return {\n                    deviceId: true, echoCancellation: true, facingMode: true,\n                    frameRate: true, height: true, width: true\n                };\n            }\n        };\n    }\n\n    // A shim for getUserMedia method on the mediaDevices object.\n    // TODO(KaptenJansson) remove once implemented in Chrome stable.\n    if (!navigator.mediaDevices.getUserMedia) {\n        navigator.mediaDevices.getUserMedia = function(constraints) {\n            return getUserMediaPromise_(constraints);\n        };\n    } else {\n        // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n        // function which returns a Promise, it does not accept spec-style\n        // constraints.\n        var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n        navigator.mediaDevices.getUserMedia = function(cs) {\n            return shimConstraints_(cs, function(c) {\n                return origGetUserMedia(c).then(function(stream) {\n                    if (c.audio && !stream.getAudioTracks().length ||\n                        c.video && !stream.getVideoTracks().length) {\n                        stream.getTracks().forEach(function(track) {\n                            track.stop();\n                        });\n                        throw new DOMException('', 'NotFoundError');\n                    }\n                    return stream;\n                }, function(e) {\n                    return Promise.reject(shimError_(e));\n                });\n            });\n        };\n    }\n\n    // Dummy devicechange event methods.\n    // TODO(KaptenJansson) remove once implemented in Chrome stable.\n    if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n        navigator.mediaDevices.addEventListener = function() {\n            logging('Dummy mediaDevices.addEventListener called.');\n        };\n    }\n    if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n        navigator.mediaDevices.removeEventListener = function() {\n            logging('Dummy mediaDevices.removeEventListener called.');\n        };\n    }\n};\n\n},{\"../utils.js\":13}],7:[function(require,module,exports){\n/*\n*  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\nvar utils = require('./utils');\n\nmodule.exports = {\n    shimRTCIceCandidate: function(window) {\n        // foundation is arbitrarily chosen as an indicator for full support for\n        // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n        if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n            window.RTCIceCandidate.prototype)) {\n            return;\n        }\n\n        var NativeRTCIceCandidate = window.RTCIceCandidate;\n        window.RTCIceCandidate = function(args) {\n            // Remove the a= which shouldn't be part of the candidate string.\n            if (typeof args === 'object' && args.candidate &&\n                args.candidate.indexOf('a=') === 0) {\n                args = JSON.parse(JSON.stringify(args));\n                args.candidate = args.candidate.substr(2);\n            }\n\n            if (args.candidate && args.candidate.length) {\n                // Augment the native candidate with the parsed fields.\n                var nativeCandidate = new NativeRTCIceCandidate(args);\n                var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n                var augmentedCandidate = Object.assign(nativeCandidate,\n                    parsedCandidate);\n\n                // Add a serializer that does not serialize the extra attributes.\n                augmentedCandidate.toJSON = function() {\n                    return {\n                        candidate: augmentedCandidate.candidate,\n                        sdpMid: augmentedCandidate.sdpMid,\n                        sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n                        usernameFragment: augmentedCandidate.usernameFragment,\n                    };\n                };\n                return augmentedCandidate;\n            }\n            return new NativeRTCIceCandidate(args);\n        };\n        window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n        // Hook up the augmented candidate in onicecandidate and\n        // addEventListener('icecandidate', ...)\n        utils.wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\n            if (e.candidate) {\n                Object.defineProperty(e, 'candidate', {\n                    value: new window.RTCIceCandidate(e.candidate),\n                    writable: 'false'\n                });\n            }\n            return e;\n        });\n    },\n\n    // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n    shimCreateObjectURL: function(window) {\n        var URL = window && window.URL;\n\n        if (!(typeof window === 'object' && window.HTMLMediaElement &&\n            'srcObject' in window.HTMLMediaElement.prototype &&\n            URL.createObjectURL && URL.revokeObjectURL)) {\n            // Only shim CreateObjectURL using srcObject if srcObject exists.\n            return undefined;\n        }\n\n        var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n        var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n        var streams = new Map(), newId = 0;\n\n        URL.createObjectURL = function(stream) {\n            if ('getTracks' in stream) {\n                var url = 'polyblob:' + (++newId);\n                streams.set(url, stream);\n                utils.deprecated('URL.createObjectURL(stream)',\n                    'elem.srcObject = stream');\n                return url;\n            }\n            return nativeCreateObjectURL(stream);\n        };\n        URL.revokeObjectURL = function(url) {\n            nativeRevokeObjectURL(url);\n            streams.delete(url);\n        };\n\n        var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n            'src');\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n            get: function() {\n                return dsc.get.apply(this);\n            },\n            set: function(url) {\n                this.srcObject = streams.get(url) || null;\n                return dsc.set.apply(this, [url]);\n            }\n        });\n\n        var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n        window.HTMLMediaElement.prototype.setAttribute = function() {\n            if (arguments.length === 2 &&\n                ('' + arguments[0]).toLowerCase() === 'src') {\n                this.srcObject = streams.get(arguments[1]) || null;\n            }\n            return nativeSetAttribute.apply(this, arguments);\n        };\n    },\n\n    shimMaxMessageSize: function(window) {\n        if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n            return;\n        }\n        var browserDetails = utils.detectBrowser(window);\n\n        if (!('sctp' in window.RTCPeerConnection.prototype)) {\n            Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n                get: function() {\n                    return typeof this._sctp === 'undefined' ? null : this._sctp;\n                }\n            });\n        }\n\n        var sctpInDescription = function(description) {\n            var sections = SDPUtils.splitSections(description.sdp);\n            sections.shift();\n            return sections.some(function(mediaSection) {\n                var mLine = SDPUtils.parseMLine(mediaSection);\n                return mLine && mLine.kind === 'application'\n                    && mLine.protocol.indexOf('SCTP') !== -1;\n            });\n        };\n\n        var getRemoteFirefoxVersion = function(description) {\n            // TODO: Is there a better solution for detecting Firefox?\n            var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n            if (match === null || match.length < 2) {\n                return -1;\n            }\n            var version = parseInt(match[1], 10);\n            // Test for NaN (yes, this is ugly)\n            return version !== version ? -1 : version;\n        };\n\n        var getCanSendMaxMessageSize = function(remoteIsFirefox) {\n            // Every implementation we know can send at least 64 KiB.\n            // Note: Although Chrome is technically able to send up to 256 KiB, the\n            //       data does not reach the other peer reliably.\n            //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n            var canSendMaxMessageSize = 65536;\n            if (browserDetails.browser === 'firefox') {\n                if (browserDetails.version < 57) {\n                    if (remoteIsFirefox === -1) {\n                        // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n                        // fragmentation.\n                        canSendMaxMessageSize = 16384;\n                    } else {\n                        // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n                        // messages. Thus, supporting ~2 GiB when sending.\n                        canSendMaxMessageSize = 2147483637;\n                    }\n                } else {\n                    // Currently, all FF >= 57 will reset the remote maximum message size\n                    // to the default value when a data channel is created at a later\n                    // stage. :(\n                    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n                    canSendMaxMessageSize =\n                        browserDetails.version === 57 ? 65535 : 65536;\n                }\n            }\n            return canSendMaxMessageSize;\n        };\n\n        var getMaxMessageSize = function(description, remoteIsFirefox) {\n            // Note: 65536 bytes is the default value from the SDP spec. Also,\n            //       every implementation we know supports receiving 65536 bytes.\n            var maxMessageSize = 65536;\n\n            // FF 57 has a slightly incorrect default remote max message size, so\n            // we need to adjust it here to avoid a failure when sending.\n            // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n            if (browserDetails.browser === 'firefox'\n                && browserDetails.version === 57) {\n                maxMessageSize = 65535;\n            }\n\n            var match = SDPUtils.matchPrefix(description.sdp, 'a=max-message-size:');\n            if (match.length > 0) {\n                maxMessageSize = parseInt(match[0].substr(19), 10);\n            } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n                // If the maximum message size is not present in the remote SDP and\n                // both local and remote are Firefox, the remote peer can receive\n                // ~2 GiB.\n                maxMessageSize = 2147483637;\n            }\n            return maxMessageSize;\n        };\n\n        var origSetRemoteDescription =\n            window.RTCPeerConnection.prototype.setRemoteDescription;\n        window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n            var pc = this;\n            pc._sctp = null;\n\n            if (sctpInDescription(arguments[0])) {\n                // Check if the remote is FF.\n                var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n                // Get the maximum message size the local peer is capable of sending\n                var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n                // Get the maximum message size of the remote peer.\n                var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n                // Determine final maximum message size\n                var maxMessageSize;\n                if (canSendMMS === 0 && remoteMMS === 0) {\n                    maxMessageSize = Number.POSITIVE_INFINITY;\n                } else if (canSendMMS === 0 || remoteMMS === 0) {\n                    maxMessageSize = Math.max(canSendMMS, remoteMMS);\n                } else {\n                    maxMessageSize = Math.min(canSendMMS, remoteMMS);\n                }\n\n                // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n                // attribute.\n                var sctp = {};\n                Object.defineProperty(sctp, 'maxMessageSize', {\n                    get: function() {\n                        return maxMessageSize;\n                    }\n                });\n                pc._sctp = sctp;\n            }\n\n            return origSetRemoteDescription.apply(pc, arguments);\n        };\n    },\n\n    shimSendThrowTypeError: function(window) {\n        if (!(window.RTCPeerConnection &&\n            'createDataChannel' in window.RTCPeerConnection.prototype)) {\n            return;\n        }\n\n        // Note: Although Firefox >= 57 has a native implementation, the maximum\n        //       message size can be reset for all data channels at a later stage.\n        //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n        var origCreateDataChannel =\n            window.RTCPeerConnection.prototype.createDataChannel;\n        window.RTCPeerConnection.prototype.createDataChannel = function() {\n            var pc = this;\n            var dataChannel = origCreateDataChannel.apply(pc, arguments);\n            var origDataChannelSend = dataChannel.send;\n\n            // Patch 'send' method\n            dataChannel.send = function() {\n                var dc = this;\n                var data = arguments[0];\n                var length = data.length || data.size || data.byteLength;\n                if (length > pc.sctp.maxMessageSize) {\n                    throw new DOMException('Message too large (can send a maximum of ' +\n                        pc.sctp.maxMessageSize + ' bytes)', 'TypeError');\n                }\n                return origDataChannelSend.apply(dc, arguments);\n            };\n\n            return dataChannel;\n        };\n    }\n};\n\n},{\"./utils\":13,\"sdp\":2}],8:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar shimRTCPeerConnection = require('rtcpeerconnection-shim');\n\nmodule.exports = {\n    shimGetUserMedia: require('./getusermedia'),\n    shimPeerConnection: function(window) {\n        var browserDetails = utils.detectBrowser(window);\n\n        if (window.RTCIceGatherer) {\n            if (!window.RTCIceCandidate) {\n                window.RTCIceCandidate = function(args) {\n                    return args;\n                };\n            }\n            if (!window.RTCSessionDescription) {\n                window.RTCSessionDescription = function(args) {\n                    return args;\n                };\n            }\n            // this adds an additional event listener to MediaStrackTrack that signals\n            // when a tracks enabled property was changed. Workaround for a bug in\n            // addStream, see below. No longer required in 15025+\n            if (browserDetails.version < 15025) {\n                var origMSTEnabled = Object.getOwnPropertyDescriptor(\n                    window.MediaStreamTrack.prototype, 'enabled');\n                Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n                    set: function(value) {\n                        origMSTEnabled.set.call(this, value);\n                        var ev = new Event('enabled');\n                        ev.enabled = value;\n                        this.dispatchEvent(ev);\n                    }\n                });\n            }\n        }\n\n        // ORTC defines the DTMF sender a bit different.\n        // https://github.com/w3c/ortc/issues/714\n        if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n            Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n                get: function() {\n                    if (this._dtmf === undefined) {\n                        if (this.track.kind === 'audio') {\n                            this._dtmf = new window.RTCDtmfSender(this);\n                        } else if (this.track.kind === 'video') {\n                            this._dtmf = null;\n                        }\n                    }\n                    return this._dtmf;\n                }\n            });\n        }\n        // Edge currently only implements the RTCDtmfSender, not the\n        // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n        if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n            window.RTCDTMFSender = window.RTCDtmfSender;\n        }\n\n        window.RTCPeerConnection =\n            shimRTCPeerConnection(window, browserDetails.version);\n    },\n    shimReplaceTrack: function(window) {\n        // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n        if (window.RTCRtpSender &&\n            !('replaceTrack' in window.RTCRtpSender.prototype)) {\n            window.RTCRtpSender.prototype.replaceTrack =\n                window.RTCRtpSender.prototype.setTrack;\n        }\n    }\n};\n\n},{\"../utils\":13,\"./getusermedia\":9,\"rtcpeerconnection-shim\":1}],9:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function(window) {\n    var navigator = window && window.navigator;\n\n    var shimError_ = function(e) {\n        return {\n            name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n            message: e.message,\n            constraint: e.constraint,\n            toString: function() {\n                return this.name;\n            }\n        };\n    };\n\n    // getUserMedia error shim.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n    bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n        return origGetUserMedia(c).catch(function(e) {\n            return Promise.reject(shimError_(e));\n        });\n    };\n};\n\n},{}],10:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = {\n    shimGetUserMedia: require('./getusermedia'),\n    shimOnTrack: function(window) {\n        if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n            window.RTCPeerConnection.prototype)) {\n            Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                get: function() {\n                    return this._ontrack;\n                },\n                set: function(f) {\n                    if (this._ontrack) {\n                        this.removeEventListener('track', this._ontrack);\n                        this.removeEventListener('addstream', this._ontrackpoly);\n                    }\n                    this.addEventListener('track', this._ontrack = f);\n                    this.addEventListener('addstream', this._ontrackpoly = function(e) {\n                        e.stream.getTracks().forEach(function(track) {\n                            var event = new Event('track');\n                            event.track = track;\n                            event.receiver = {track: track};\n                            event.transceiver = {receiver: event.receiver};\n                            event.streams = [e.stream];\n                            this.dispatchEvent(event);\n                        }.bind(this));\n                    }.bind(this));\n                }\n            });\n        }\n        if (typeof window === 'object' && window.RTCTrackEvent &&\n            ('receiver' in window.RTCTrackEvent.prototype) &&\n            !('transceiver' in window.RTCTrackEvent.prototype)) {\n            Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n                get: function() {\n                    return {receiver: this.receiver};\n                }\n            });\n        }\n    },\n\n    shimSourceObject: function(window) {\n        // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n        if (typeof window === 'object') {\n            if (window.HTMLMediaElement &&\n                !('srcObject' in window.HTMLMediaElement.prototype)) {\n                // Shim the srcObject property, once, when HTMLMediaElement is found.\n                Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                    get: function() {\n                        return this.mozSrcObject;\n                    },\n                    set: function(stream) {\n                        this.mozSrcObject = stream;\n                    }\n                });\n            }\n        }\n    },\n\n    shimPeerConnection: function(window) {\n        var browserDetails = utils.detectBrowser(window);\n\n        if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n            window.mozRTCPeerConnection)) {\n            return; // probably media.peerconnection.enabled=false in about:config\n        }\n        // The RTCPeerConnection object.\n        if (!window.RTCPeerConnection) {\n            window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                if (browserDetails.version < 38) {\n                    // .urls is not supported in FF < 38.\n                    // create RTCIceServers with a single url.\n                    if (pcConfig && pcConfig.iceServers) {\n                        var newIceServers = [];\n                        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                            var server = pcConfig.iceServers[i];\n                            if (server.hasOwnProperty('urls')) {\n                                for (var j = 0; j < server.urls.length; j++) {\n                                    var newServer = {\n                                        url: server.urls[j]\n                                    };\n                                    if (server.urls[j].indexOf('turn') === 0) {\n                                        newServer.username = server.username;\n                                        newServer.credential = server.credential;\n                                    }\n                                    newIceServers.push(newServer);\n                                }\n                            } else {\n                                newIceServers.push(pcConfig.iceServers[i]);\n                            }\n                        }\n                        pcConfig.iceServers = newIceServers;\n                    }\n                }\n                return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n            };\n            window.RTCPeerConnection.prototype =\n                window.mozRTCPeerConnection.prototype;\n\n            // wrap static methods. Currently just generateCertificate.\n            if (window.mozRTCPeerConnection.generateCertificate) {\n                Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                    get: function() {\n                        return window.mozRTCPeerConnection.generateCertificate;\n                    }\n                });\n            }\n\n            window.RTCSessionDescription = window.mozRTCSessionDescription;\n            window.RTCIceCandidate = window.mozRTCIceCandidate;\n        }\n\n        // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n        ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n            .forEach(function(method) {\n                var nativeMethod = window.RTCPeerConnection.prototype[method];\n                window.RTCPeerConnection.prototype[method] = function() {\n                    arguments[0] = new ((method === 'addIceCandidate') ?\n                        window.RTCIceCandidate :\n                        window.RTCSessionDescription)(arguments[0]);\n                    return nativeMethod.apply(this, arguments);\n                };\n            });\n\n        // support for addIceCandidate(null or undefined)\n        var nativeAddIceCandidate =\n            window.RTCPeerConnection.prototype.addIceCandidate;\n        window.RTCPeerConnection.prototype.addIceCandidate = function() {\n            if (!arguments[0]) {\n                if (arguments[1]) {\n                    arguments[1].apply(null);\n                }\n                return Promise.resolve();\n            }\n            return nativeAddIceCandidate.apply(this, arguments);\n        };\n\n        // shim getStats with maplike support\n        var makeMapStats = function(stats) {\n            var map = new Map();\n            Object.keys(stats).forEach(function(key) {\n                map.set(key, stats[key]);\n                map[key] = stats[key];\n            });\n            return map;\n        };\n\n        var modernStatsTypes = {\n            inboundrtp: 'inbound-rtp',\n            outboundrtp: 'outbound-rtp',\n            candidatepair: 'candidate-pair',\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n        };\n\n        var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n        window.RTCPeerConnection.prototype.getStats = function(\n            selector,\n            onSucc,\n            onErr\n        ) {\n            return nativeGetStats.apply(this, [selector || null])\n                .then(function(stats) {\n                    if (browserDetails.version < 48) {\n                        stats = makeMapStats(stats);\n                    }\n                    if (browserDetails.version < 53 && !onSucc) {\n                        // Shim only promise getStats with spec-hyphens in type names\n                        // Leave callback version alone; misc old uses of forEach before Map\n                        try {\n                            stats.forEach(function(stat) {\n                                stat.type = modernStatsTypes[stat.type] || stat.type;\n                            });\n                        } catch (e) {\n                            if (e.name !== 'TypeError') {\n                                throw e;\n                            }\n                            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n                            stats.forEach(function(stat, i) {\n                                stats.set(i, Object.assign({}, stat, {\n                                    type: modernStatsTypes[stat.type] || stat.type\n                                }));\n                            });\n                        }\n                    }\n                    return stats;\n                })\n                .then(onSucc, onErr);\n        };\n    },\n\n    shimRemoveStream: function(window) {\n        if (!window.RTCPeerConnection ||\n            'removeStream' in window.RTCPeerConnection.prototype) {\n            return;\n        }\n        window.RTCPeerConnection.prototype.removeStream = function(stream) {\n            var pc = this;\n            utils.deprecated('removeStream', 'removeTrack');\n            this.getSenders().forEach(function(sender) {\n                if (sender.track && stream.getTracks().indexOf(sender.track) !== -1) {\n                    pc.removeTrack(sender);\n                }\n            });\n        };\n    }\n};\n\n},{\"../utils\":13,\"./getusermedia\":11}],11:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n    var browserDetails = utils.detectBrowser(window);\n    var navigator = window && window.navigator;\n    var MediaStreamTrack = window && window.MediaStreamTrack;\n\n    var shimError_ = function(e) {\n        return {\n            name: {\n                InternalError: 'NotReadableError',\n                NotSupportedError: 'TypeError',\n                PermissionDeniedError: 'NotAllowedError',\n                SecurityError: 'NotAllowedError'\n            }[e.name] || e.name,\n            message: {\n                'The operation is insecure.': 'The request is not allowed by the ' +\n                'user agent or the platform in the current context.'\n            }[e.message] || e.message,\n            constraint: e.constraint,\n            toString: function() {\n                return this.name + (this.message && ': ') + this.message;\n            }\n        };\n    };\n\n    // getUserMedia constraints shim.\n    var getUserMedia_ = function(constraints, onSuccess, onError) {\n        var constraintsToFF37_ = function(c) {\n            if (typeof c !== 'object' || c.require) {\n                return c;\n            }\n            var require = [];\n            Object.keys(c).forEach(function(key) {\n                if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                    return;\n                }\n                var r = c[key] = (typeof c[key] === 'object') ?\n                    c[key] : {ideal: c[key]};\n                if (r.min !== undefined ||\n                    r.max !== undefined || r.exact !== undefined) {\n                    require.push(key);\n                }\n                if (r.exact !== undefined) {\n                    if (typeof r.exact === 'number') {\n                        r. min = r.max = r.exact;\n                    } else {\n                        c[key] = r.exact;\n                    }\n                    delete r.exact;\n                }\n                if (r.ideal !== undefined) {\n                    c.advanced = c.advanced || [];\n                    var oc = {};\n                    if (typeof r.ideal === 'number') {\n                        oc[key] = {min: r.ideal, max: r.ideal};\n                    } else {\n                        oc[key] = r.ideal;\n                    }\n                    c.advanced.push(oc);\n                    delete r.ideal;\n                    if (!Object.keys(r).length) {\n                        delete c[key];\n                    }\n                }\n            });\n            if (require.length) {\n                c.require = require;\n            }\n            return c;\n        };\n        constraints = JSON.parse(JSON.stringify(constraints));\n        if (browserDetails.version < 38) {\n            logging('spec: ' + JSON.stringify(constraints));\n            if (constraints.audio) {\n                constraints.audio = constraintsToFF37_(constraints.audio);\n            }\n            if (constraints.video) {\n                constraints.video = constraintsToFF37_(constraints.video);\n            }\n            logging('ff37: ' + JSON.stringify(constraints));\n        }\n        return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n            onError(shimError_(e));\n        });\n    };\n\n    // Returns the result of getUserMedia as a Promise.\n    var getUserMediaPromise_ = function(constraints) {\n        return new Promise(function(resolve, reject) {\n            getUserMedia_(constraints, resolve, reject);\n        });\n    };\n\n    // Shim for mediaDevices on older versions.\n    if (!navigator.mediaDevices) {\n        navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n            addEventListener: function() { },\n            removeEventListener: function() { }\n        };\n    }\n    navigator.mediaDevices.enumerateDevices =\n        navigator.mediaDevices.enumerateDevices || function() {\n            return new Promise(function(resolve) {\n                var infos = [\n                    {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n                    {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n                ];\n                resolve(infos);\n            });\n        };\n\n    if (browserDetails.version < 41) {\n        // Work around http://bugzil.la/1169665\n        var orgEnumerateDevices =\n            navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n        navigator.mediaDevices.enumerateDevices = function() {\n            return orgEnumerateDevices().then(undefined, function(e) {\n                if (e.name === 'NotFoundError') {\n                    return [];\n                }\n                throw e;\n            });\n        };\n    }\n    if (browserDetails.version < 49) {\n        var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n        navigator.mediaDevices.getUserMedia = function(c) {\n            return origGetUserMedia(c).then(function(stream) {\n                // Work around https://bugzil.la/802326\n                if (c.audio && !stream.getAudioTracks().length ||\n                    c.video && !stream.getVideoTracks().length) {\n                    stream.getTracks().forEach(function(track) {\n                        track.stop();\n                    });\n                    throw new DOMException('The object can not be found here.',\n                        'NotFoundError');\n                }\n                return stream;\n            }, function(e) {\n                return Promise.reject(shimError_(e));\n            });\n        };\n    }\n    if (!(browserDetails.version > 55 &&\n        'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n        var remap = function(obj, a, b) {\n            if (a in obj && !(b in obj)) {\n                obj[b] = obj[a];\n                delete obj[a];\n            }\n        };\n\n        var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n        navigator.mediaDevices.getUserMedia = function(c) {\n            if (typeof c === 'object' && typeof c.audio === 'object') {\n                c = JSON.parse(JSON.stringify(c));\n                remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n                remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n            }\n            return nativeGetUserMedia(c);\n        };\n\n        if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n            var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n            MediaStreamTrack.prototype.getSettings = function() {\n                var obj = nativeGetSettings.apply(this, arguments);\n                remap(obj, 'mozAutoGainControl', 'autoGainControl');\n                remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n                return obj;\n            };\n        }\n\n        if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n            var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n            MediaStreamTrack.prototype.applyConstraints = function(c) {\n                if (this.kind === 'audio' && typeof c === 'object') {\n                    c = JSON.parse(JSON.stringify(c));\n                    remap(c, 'autoGainControl', 'mozAutoGainControl');\n                    remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n                }\n                return nativeApplyConstraints.apply(this, [c]);\n            };\n        }\n    }\n    navigator.getUserMedia = function(constraints, onSuccess, onError) {\n        if (browserDetails.version < 44) {\n            return getUserMedia_(constraints, onSuccess, onError);\n        }\n        // Replace Firefox 44+'s deprecation warning with unprefixed version.\n        utils.deprecated('navigator.getUserMedia',\n            'navigator.mediaDevices.getUserMedia');\n        navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n    };\n};\n\n},{\"../utils\":13}],12:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n'use strict';\nvar utils = require('../utils');\n\nmodule.exports = {\n    shimLocalStreamsAPI: function(window) {\n        if (typeof window !== 'object' || !window.RTCPeerConnection) {\n            return;\n        }\n        if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n            window.RTCPeerConnection.prototype.getLocalStreams = function() {\n                if (!this._localStreams) {\n                    this._localStreams = [];\n                }\n                return this._localStreams;\n            };\n        }\n        if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n            window.RTCPeerConnection.prototype.getStreamById = function(id) {\n                var result = null;\n                if (this._localStreams) {\n                    this._localStreams.forEach(function(stream) {\n                        if (stream.id === id) {\n                            result = stream;\n                        }\n                    });\n                }\n                if (this._remoteStreams) {\n                    this._remoteStreams.forEach(function(stream) {\n                        if (stream.id === id) {\n                            result = stream;\n                        }\n                    });\n                }\n                return result;\n            };\n        }\n        if (!('addStream' in window.RTCPeerConnection.prototype)) {\n            var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n            window.RTCPeerConnection.prototype.addStream = function(stream) {\n                if (!this._localStreams) {\n                    this._localStreams = [];\n                }\n                if (this._localStreams.indexOf(stream) === -1) {\n                    this._localStreams.push(stream);\n                }\n                var pc = this;\n                stream.getTracks().forEach(function(track) {\n                    _addTrack.call(pc, track, stream);\n                });\n            };\n\n            window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                if (stream) {\n                    if (!this._localStreams) {\n                        this._localStreams = [stream];\n                    } else if (this._localStreams.indexOf(stream) === -1) {\n                        this._localStreams.push(stream);\n                    }\n                }\n                return _addTrack.call(this, track, stream);\n            };\n        }\n        if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n            window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                if (!this._localStreams) {\n                    this._localStreams = [];\n                }\n                var index = this._localStreams.indexOf(stream);\n                if (index === -1) {\n                    return;\n                }\n                this._localStreams.splice(index, 1);\n                var pc = this;\n                var tracks = stream.getTracks();\n                this.getSenders().forEach(function(sender) {\n                    if (tracks.indexOf(sender.track) !== -1) {\n                        pc.removeTrack(sender);\n                    }\n                });\n            };\n        }\n    },\n    shimRemoteStreamsAPI: function(window) {\n        if (typeof window !== 'object' || !window.RTCPeerConnection) {\n            return;\n        }\n        if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n            window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n                return this._remoteStreams ? this._remoteStreams : [];\n            };\n        }\n        if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n            Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n                get: function() {\n                    return this._onaddstream;\n                },\n                set: function(f) {\n                    var pc = this;\n                    if (this._onaddstream) {\n                        this.removeEventListener('addstream', this._onaddstream);\n                        this.removeEventListener('track', this._onaddstreampoly);\n                    }\n                    this.addEventListener('addstream', this._onaddstream = f);\n                    this.addEventListener('track', this._onaddstreampoly = function(e) {\n                        e.streams.forEach(function(stream) {\n                            if (!pc._remoteStreams) {\n                                pc._remoteStreams = [];\n                            }\n                            if (pc._remoteStreams.indexOf(stream) >= 0) {\n                                return;\n                            }\n                            pc._remoteStreams.push(stream);\n                            var event = new Event('addstream');\n                            event.stream = stream;\n                            pc.dispatchEvent(event);\n                        });\n                    });\n                }\n            });\n        }\n    },\n    shimCallbacksAPI: function(window) {\n        if (typeof window !== 'object' || !window.RTCPeerConnection) {\n            return;\n        }\n        var prototype = window.RTCPeerConnection.prototype;\n        var createOffer = prototype.createOffer;\n        var createAnswer = prototype.createAnswer;\n        var setLocalDescription = prototype.setLocalDescription;\n        var setRemoteDescription = prototype.setRemoteDescription;\n        var addIceCandidate = prototype.addIceCandidate;\n\n        prototype.createOffer = function(successCallback, failureCallback) {\n            var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n            var promise = createOffer.apply(this, [options]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n\n        prototype.createAnswer = function(successCallback, failureCallback) {\n            var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n            var promise = createAnswer.apply(this, [options]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n\n        var withCallback = function(description, successCallback, failureCallback) {\n            var promise = setLocalDescription.apply(this, [description]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n        prototype.setLocalDescription = withCallback;\n\n        withCallback = function(description, successCallback, failureCallback) {\n            var promise = setRemoteDescription.apply(this, [description]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n        prototype.setRemoteDescription = withCallback;\n\n        withCallback = function(candidate, successCallback, failureCallback) {\n            var promise = addIceCandidate.apply(this, [candidate]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n        prototype.addIceCandidate = withCallback;\n    },\n    shimGetUserMedia: function(window) {\n        var navigator = window && window.navigator;\n\n        if (!navigator.getUserMedia) {\n            if (navigator.webkitGetUserMedia) {\n                navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n            } else if (navigator.mediaDevices &&\n                navigator.mediaDevices.getUserMedia) {\n                navigator.getUserMedia = function(constraints, cb, errcb) {\n                    navigator.mediaDevices.getUserMedia(constraints)\n                        .then(cb, errcb);\n                }.bind(navigator);\n            }\n        }\n    },\n    shimRTCIceServerUrls: function(window) {\n        // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n        var OrigPeerConnection = window.RTCPeerConnection;\n        window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n            if (pcConfig && pcConfig.iceServers) {\n                var newIceServers = [];\n                for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                    var server = pcConfig.iceServers[i];\n                    if (!server.hasOwnProperty('urls') &&\n                        server.hasOwnProperty('url')) {\n                        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n                        server = JSON.parse(JSON.stringify(server));\n                        server.urls = server.url;\n                        delete server.url;\n                        newIceServers.push(server);\n                    } else {\n                        newIceServers.push(pcConfig.iceServers[i]);\n                    }\n                }\n                pcConfig.iceServers = newIceServers;\n            }\n            return new OrigPeerConnection(pcConfig, pcConstraints);\n        };\n        window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n        // wrap static methods. Currently just generateCertificate.\n        if ('generateCertificate' in window.RTCPeerConnection) {\n            Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                get: function() {\n                    return OrigPeerConnection.generateCertificate;\n                }\n            });\n        }\n    },\n    shimTrackEventTransceiver: function(window) {\n        // Add event.transceiver member over deprecated event.receiver\n        if (typeof window === 'object' && window.RTCPeerConnection &&\n            ('receiver' in window.RTCTrackEvent.prototype) &&\n            // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n            // defined for some reason even when window.RTCTransceiver is not.\n            !window.RTCTransceiver) {\n            Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n                get: function() {\n                    return {receiver: this.receiver};\n                }\n            });\n        }\n    },\n\n    shimCreateOfferLegacy: function(window) {\n        var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n        window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n            var pc = this;\n            if (offerOptions) {\n                if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n                    // support bit values\n                    offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n                }\n                var audioTransceiver = pc.getTransceivers().find(function(transceiver) {\n                    return transceiver.sender.track &&\n                        transceiver.sender.track.kind === 'audio';\n                });\n                if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n                    if (audioTransceiver.direction === 'sendrecv') {\n                        if (audioTransceiver.setDirection) {\n                            audioTransceiver.setDirection('sendonly');\n                        } else {\n                            audioTransceiver.direction = 'sendonly';\n                        }\n                    } else if (audioTransceiver.direction === 'recvonly') {\n                        if (audioTransceiver.setDirection) {\n                            audioTransceiver.setDirection('inactive');\n                        } else {\n                            audioTransceiver.direction = 'inactive';\n                        }\n                    }\n                } else if (offerOptions.offerToReceiveAudio === true &&\n                    !audioTransceiver) {\n                    pc.addTransceiver('audio');\n                }\n\n\n                if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n                    // support bit values\n                    offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n                }\n                var videoTransceiver = pc.getTransceivers().find(function(transceiver) {\n                    return transceiver.sender.track &&\n                        transceiver.sender.track.kind === 'video';\n                });\n                if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n                    if (videoTransceiver.direction === 'sendrecv') {\n                        videoTransceiver.setDirection('sendonly');\n                    } else if (videoTransceiver.direction === 'recvonly') {\n                        videoTransceiver.setDirection('inactive');\n                    }\n                } else if (offerOptions.offerToReceiveVideo === true &&\n                    !videoTransceiver) {\n                    pc.addTransceiver('video');\n                }\n            }\n            return origCreateOffer.apply(pc, arguments);\n        };\n    }\n};\n\n},{\"../utils\":13}],13:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object.\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n    if (!window.RTCPeerConnection) {\n        return;\n    }\n    var proto = window.RTCPeerConnection.prototype;\n    var nativeAddEventListener = proto.addEventListener;\n    proto.addEventListener = function(nativeEventName, cb) {\n        if (nativeEventName !== eventNameToWrap) {\n            return nativeAddEventListener.apply(this, arguments);\n        }\n        var wrappedCallback = function(e) {\n            cb(wrapper(e));\n        };\n        this._eventMap = this._eventMap || {};\n        this._eventMap[cb] = wrappedCallback;\n        return nativeAddEventListener.apply(this, [nativeEventName,\n            wrappedCallback]);\n    };\n\n    var nativeRemoveEventListener = proto.removeEventListener;\n    proto.removeEventListener = function(nativeEventName, cb) {\n        if (nativeEventName !== eventNameToWrap || !this._eventMap\n            || !this._eventMap[cb]) {\n            return nativeRemoveEventListener.apply(this, arguments);\n        }\n        var unwrappedCb = this._eventMap[cb];\n        delete this._eventMap[cb];\n        return nativeRemoveEventListener.apply(this, [nativeEventName,\n            unwrappedCb]);\n    };\n\n    Object.defineProperty(proto, 'on' + eventNameToWrap, {\n        get: function() {\n            return this['_on' + eventNameToWrap];\n        },\n        set: function(cb) {\n            if (this['_on' + eventNameToWrap]) {\n                this.removeEventListener(eventNameToWrap,\n                    this['_on' + eventNameToWrap]);\n                delete this['_on' + eventNameToWrap];\n            }\n            if (cb) {\n                this.addEventListener(eventNameToWrap,\n                    this['_on' + eventNameToWrap] = cb);\n            }\n        }\n    });\n}\n\n// Utility methods.\nmodule.exports = {\n    extractVersion: extractVersion,\n    wrapPeerConnectionEvent: wrapPeerConnectionEvent,\n    disableLog: function(bool) {\n        if (typeof bool !== 'boolean') {\n            return new Error('Argument type: ' + typeof bool +\n                '. Please use a boolean.');\n        }\n        logDisabled_ = bool;\n        return (bool) ? 'adapter.js logging disabled' :\n            'adapter.js logging enabled';\n    },\n\n    /**\n     * Disable or enable deprecation warnings\n     * @param {!boolean} bool set to true to disable warnings.\n     */\n    disableWarnings: function(bool) {\n        if (typeof bool !== 'boolean') {\n            return new Error('Argument type: ' + typeof bool +\n                '. Please use a boolean.');\n        }\n        deprecationWarnings_ = !bool;\n        return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n    },\n\n    log: function() {\n        if (typeof window === 'object') {\n            if (logDisabled_) {\n                return;\n            }\n            if (typeof console !== 'undefined' && typeof console.log === 'function') {\n                console.log.apply(console, arguments);\n            }\n        }\n    },\n\n    /**\n     * Shows a deprecation warning suggesting the modern and spec-compatible API.\n     */\n    deprecated: function(oldMethod, newMethod) {\n        if (!deprecationWarnings_) {\n            return;\n        }\n        console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n            ' instead.');\n    },\n\n    /**\n     * Browser detector.\n     *\n     * @return {object} result containing browser and version\n     *     properties.\n     */\n    detectBrowser: function(window) {\n        var navigator = window && window.navigator;\n\n        // Returned result object.\n        var result = {};\n        result.browser = null;\n        result.version = null;\n\n        // Fail early if it's not a browser\n        if (typeof window === 'undefined' || !window.navigator) {\n            result.browser = 'Not a browser.';\n            return result;\n        }\n\n        if (navigator.mozGetUserMedia) { // Firefox.\n            result.browser = 'firefox';\n            result.version = extractVersion(navigator.userAgent,\n                /Firefox\\/(\\d+)\\./, 1);\n        } else if (navigator.webkitGetUserMedia) {\n            // Chrome, Chromium, Webview, Opera.\n            // Version matches Chrome/WebRTC version.\n            result.browser = 'chrome';\n            result.version = extractVersion(navigator.userAgent,\n                /Chrom(e|ium)\\/(\\d+)\\./, 2);\n        } else if (navigator.mediaDevices &&\n            navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n            result.browser = 'edge';\n            result.version = extractVersion(navigator.userAgent,\n                /Edge\\/(\\d+).(\\d+)$/, 2);\n        } else if (window.RTCPeerConnection &&\n            navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n            result.browser = 'safari';\n            result.version = extractVersion(navigator.userAgent,\n                /AppleWebKit\\/(\\d+)\\./, 1);\n        } else { // Default fallthrough: not supported.\n            result.browser = 'Not a supported browser.';\n            return result;\n        }\n\n        return result;\n    }\n};\n\n},{}]},{},[3])(3)\n});\n"],"file":"adapter.min.js"}