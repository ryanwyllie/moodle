{"version":3,"sources":["../src/adapter.js"],"names":["define","Math","min","e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","writeMediaSection","transceiver","caps","type","stream","dtlsRole","sdp","SDPUtils","writeRtpDescription","kind","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","trackId","_initialTrackId","track","id","msid","sendEncodingParameters","ssrc","rtx","localCName","filterIceServers","iceServers","edgeVersion","hasTurn","JSON","parse","stringify","filter","server","urls","url","console","warn","isString","validTurn","indexOf","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","parseInt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","name","toLowerCase","forEach","clockRate","numChannels","push","rtcpFeedback","fb","j","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","signalingState","offer","setLocalDescription","setRemoteDescription","answer","maybeAddCandidate","iceTransport","candidate","alreadyAdded","getRemoteCandidates","find","remoteCandidate","foundation","ip","port","priority","protocol","addRemoteCandidate","makeError","description","NotSupportedError","InvalidStateError","InvalidAccessError","TypeError","OperationError","window","addTrackToStreamAndFireEvent","addTrack","dispatchEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","removeTrack","fireAddTrack","pc","receiver","streams","trackEvent","Event","setTimeout","_dispatchEvent","RTCPeerConnection","config","_eventTarget","document","createDocumentFragment","method","bind","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","localDescription","remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","prototype","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","event","_emitGatheringStateChange","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","alreadyExists","_maybeFireNegotiationNeeded","RTCRtpSender","addStream","getTracks","clonedStream","clone","idx","clonedTrack","addEventListener","enabled","sender","stop","map","splice","removeStream","getSenders","getReceivers","_createIceGatherer","sdpMLineIndex","shift","Object","defineProperty","value","writable","bufferedCandidateEvents","bufferCandidates","end","keys","state","_gather","onlocalcandidate","removeEventListener","evt","sdpMid","cand","component","ufrag","usernameFragment","serializedCandidate","writeCandidate","assign","parseCandidate","toJSON","sections","getMediaSections","getDescription","join","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","send","recv","params","encodings","rtcp","cname","compound","rtcpParameters","p","receive","Promise","reject","sessionpart","splitSections","mediaSection","parseRtpParameters","isIceLite","matchPrefix","rejected","isRejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","start","_updateSignalingState","resolve","receiverList","iceOptions","substr","split","lines","splitLines","getKind","direction","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","RTCRtpReceiver","getCapabilities","codec","isNewTrack","nativeTrack","MediaStream","get","default","sid","item","close","newState","states","closed","checking","connected","completed","disconnected","failed","new","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","arguments","mandatory","optional","offerToReceiveAudio","offerToReceiveVideo","writeSessionBoilerplate","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","desc","RTCSessionDescription","createAnswer","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","hasRtx","c","reducedSize","addIceCandidate","candidateString","trim","getStats","promises","fixStatsType","stat","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","results","Map","all","then","res","result","set","methods","nativeMethod","args","apply","error","random","toString","blob","line","parts","part","index","prefix","substring","relatedAddress","relatedPort","tcpType","toUpperCase","parseIceOptions","parseRtpMap","parsed","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseFingerprint","algorithm","fingerprints","setupType","fp","concat","iceParameters","password","mline","rtpmapline","fmtps","maxptime","extension","secondarySsrc","encodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","obj","rsize","mux","spec","planB","sessId","sessVer","sessionId","version","parseMLine","fmt","slice","parseOLine","username","sessionVersion","netType","addressType","address","global","adapterFactory","self","utils","dependencies","opts","options","shimChrome","shimFirefox","shimEdge","shimSafari","key","hasOwnProperty","logging","log","browserDetails","detectBrowser","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","adapter","extractVersion","disableLog","disableWarnings","browser","shimPeerConnection","browserShim","shimCreateObjectURL","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimRTCIceCandidate","shimMaxMessageSize","shimSendThrowTypeError","shimRemoveStream","shimReplaceTrack","shimRTCIceServerUrls","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimCreateOfferLegacy","webkitMediaStream","_ontrack","origSetRemoteDescription","_ontrackpoly","te","wrapPeerConnectionEvent","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","senders","URL","HTMLMediaElement","_srcObject","src","revokeObjectURL","createObjectURL","shimAddTrackRemoveTrackWithNative","_shimmedLocalStreams","streamId","DOMException","existingSenders","newSenders","newSender","replaceInternalStreamId","_reverseStreams","internalId","externalStream","internalStream","_streams","replace","RegExp","replaceExternalStreamId","origGetLocalStreams","nativeStreams","newStream","oldStream","isLegacyCall","err","origSetLocalDescription","origLocalDescription","getOwnPropertyDescriptor","isLocal","streamid","hasTrack","webkitRTCPeerConnection","pcConfig","pcConstraints","iceTransports","generateCertificate","OrigPeerConnection","newIceServers","deprecated","origGetStats","selector","successCallback","errorCallback","fixChromeStats_","response","standardReport","reports","report","standardStats","timestamp","names","makeMapStats","stats","successCallbackWrapper_","promise","RTCIceCandidate","nativeAddIceCandidate","navigator","constraintsToChrome_","cc","ideal","exact","max","oldname_","charAt","oc","mix","advanced","shimConstraints_","constraints","func","audio","remap","b","video","face","facingMode","getSupportedFacingModeLies","mediaDevices","getSupportedConstraints","matches","enumerateDevices","devices","d","dev","some","match","label","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia","getUserMedia_","onSuccess","onError","webkitGetUserMedia","getUserMediaPromise_","kinds","MediaStreamTrack","getSources","device","groupId","echoCancellation","frameRate","height","width","origGetUserMedia","cs","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","nativeCreateObjectURL","nativeRevokeObjectURL","newId","delete","dsc","srcObject","nativeSetAttribute","setAttribute","RTCSctpTransport","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","sctp","origCreateDataChannel","createDataChannel","dataChannel","origDataChannelSend","dc","data","size","byteLength","shimRTCPeerConnection","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","replaceTrack","setTrack","catch","RTCTrackEvent","mozSrcObject","mozRTCPeerConnection","newServer","credential","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","InternalError","SecurityError","constraintsToFF37_","mozGetUserMedia","orgEnumerateDevices","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","_localStreams","getStreamById","_remoteStreams","_addTrack","tracks","_onaddstream","_onaddstreampoly","failureCallback","withCallback","cb","errcb","RTCTransceiver","origCreateOffer","audioTransceiver","getTransceivers","setDirection","addTransceiver","videoTransceiver","uastring","expr","pos","logDisabled_","deprecationWarnings_","eventNameToWrap","wrapper","proto","nativeAddEventListener","nativeEventName","wrappedCallback","_eventMap","nativeRemoveEventListener","unwrappedCb","bool","oldMethod","newMethod","userAgent"],"mappings":"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","file":"adapter.min.js","sourcesContent":["/**\n * Description of import/upgrade into Moodle:\n *\n * 1. Visit https://github.com/webrtc/adapter/releases.\n * 2. Check if the version has been updated from what is listed in lib/thirdpartylibs.xml in the Moodle wwwroot.\n * 3. If it has -\n *    1. Download the source code.\n *    2. Copy the content of the file release/adapter.js from the archive (ignore the first line).\n *    3. Replace the content below \"return (function e(t,n,r) ..\" in this file with the content you copied.\n *    4. Ensure to update lib/thirdpartylibs.xml with any changes.\n */\n\n// ESLint directives.\n/* eslint-disable */\n\n// JSHint directives.\n/* jshint ignore:start */\n\ndefine([], function() {\nreturn (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n    var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n    // Map ICE parameters (ufrag, pwd) to SDP.\n    sdp += SDPUtils.writeIceParameters(\n        transceiver.iceGatherer.getLocalParameters());\n\n    // Map DTLS parameters to SDP.\n    sdp += SDPUtils.writeDtlsParameters(\n        transceiver.dtlsTransport.getLocalParameters(),\n        type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n    sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n    if (transceiver.rtpSender && transceiver.rtpReceiver) {\n        sdp += 'a=sendrecv\\r\\n';\n    } else if (transceiver.rtpSender) {\n        sdp += 'a=sendonly\\r\\n';\n    } else if (transceiver.rtpReceiver) {\n        sdp += 'a=recvonly\\r\\n';\n    } else {\n        sdp += 'a=inactive\\r\\n';\n    }\n\n    if (transceiver.rtpSender) {\n        var trackId = transceiver.rtpSender._initialTrackId ||\n            transceiver.rtpSender.track.id;\n        transceiver.rtpSender._initialTrackId = trackId;\n        // spec.\n        var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n            trackId + '\\r\\n';\n        sdp += 'a=' + msid;\n        // for Chrome. Legacy should no longer be required.\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n            ' ' + msid;\n\n        // RTX\n        if (transceiver.sendEncodingParameters[0].rtx) {\n            sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                ' ' + msid;\n            sdp += 'a=ssrc-group:FID ' +\n                transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                transceiver.sendEncodingParameters[0].rtx.ssrc +\n                '\\r\\n';\n        }\n    }\n    // FIXME: this should be written by writeRtpDescription.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n    if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n            ' cname:' + SDPUtils.localCName + '\\r\\n';\n    }\n    return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n    var hasTurn = false;\n    iceServers = JSON.parse(JSON.stringify(iceServers));\n    return iceServers.filter(function(server) {\n        if (server && (server.urls || server.url)) {\n            var urls = server.urls || server.url;\n            if (server.url && !server.urls) {\n                console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n            }\n            var isString = typeof urls === 'string';\n            if (isString) {\n                urls = [urls];\n            }\n            urls = urls.filter(function(url) {\n                var validTurn = url.indexOf('turn:') === 0 &&\n                    url.indexOf('transport=udp') !== -1 &&\n                    url.indexOf('turn:[') === -1 &&\n                    !hasTurn;\n\n                if (validTurn) {\n                    hasTurn = true;\n                    return true;\n                }\n                return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n                    url.indexOf('?transport=udp') === -1;\n            });\n\n            delete server.url;\n            server.urls = isString ? urls[0] : urls;\n            return !!urls.length;\n        }\n    });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n    var commonCapabilities = {\n        codecs: [],\n        headerExtensions: [],\n        fecMechanisms: []\n    };\n\n    var findCodecByPayloadType = function(pt, codecs) {\n        pt = parseInt(pt, 10);\n        for (var i = 0; i < codecs.length; i++) {\n            if (codecs[i].payloadType === pt ||\n                codecs[i].preferredPayloadType === pt) {\n                return codecs[i];\n            }\n        }\n    };\n\n    var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n        var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n        var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n        return lCodec && rCodec &&\n            lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n    };\n\n    localCapabilities.codecs.forEach(function(lCodec) {\n        for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n            var rCodec = remoteCapabilities.codecs[i];\n            if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                lCodec.clockRate === rCodec.clockRate) {\n                if (lCodec.name.toLowerCase() === 'rtx' &&\n                    lCodec.parameters && rCodec.parameters.apt) {\n                    // for RTX we need to find the local rtx that has a apt\n                    // which points to the same local codec as the remote one.\n                    if (!rtxCapabilityMatches(lCodec, rCodec,\n                        localCapabilities.codecs, remoteCapabilities.codecs)) {\n                        continue;\n                    }\n                }\n                rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n                // number of channels is the highest common number of channels\n                rCodec.numChannels = Math.min(lCodec.numChannels,\n                    rCodec.numChannels);\n                // push rCodec so we reply with offerer payload type\n                commonCapabilities.codecs.push(rCodec);\n\n                // determine common feedback mechanisms\n                rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n                    for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                        if (lCodec.rtcpFeedback[j].type === fb.type &&\n                            lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                            return true;\n                        }\n                    }\n                    return false;\n                });\n                // FIXME: also need to determine .parameters\n                //  see https://github.com/openpeer/ortc/issues/569\n                break;\n            }\n        }\n    });\n\n    localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n        for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n             i++) {\n            var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n            if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                commonCapabilities.headerExtensions.push(rHeaderExtension);\n                break;\n            }\n        }\n    });\n\n    // FIXME: fecMechanisms\n    return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n    return {\n        offer: {\n            setLocalDescription: ['stable', 'have-local-offer'],\n            setRemoteDescription: ['stable', 'have-remote-offer']\n        },\n        answer: {\n            setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n            setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n        }\n    }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n    // Edge's internal representation adds some fields therefore\n    // not all field are taken into account.\n    var alreadyAdded = iceTransport.getRemoteCandidates()\n        .find(function(remoteCandidate) {\n            return candidate.foundation === remoteCandidate.foundation &&\n                candidate.ip === remoteCandidate.ip &&\n                candidate.port === remoteCandidate.port &&\n                candidate.priority === remoteCandidate.priority &&\n                candidate.protocol === remoteCandidate.protocol &&\n                candidate.type === remoteCandidate.type;\n        });\n    if (!alreadyAdded) {\n        iceTransport.addRemoteCandidate(candidate);\n    }\n    return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n    var e = new Error(description);\n    e.name = name;\n    // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n    e.code = {\n        NotSupportedError: 9,\n        InvalidStateError: 11,\n        InvalidAccessError: 15,\n        TypeError: undefined,\n        OperationError: undefined\n    }[name];\n    return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n    // https://w3c.github.io/mediacapture-main/#mediastream\n    // Helper function to add the track to the stream and\n    // dispatch the event ourselves.\n    function addTrackToStreamAndFireEvent(track, stream) {\n        stream.addTrack(track);\n        stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n            {track: track}));\n    }\n\n    function removeTrackFromStreamAndFireEvent(track, stream) {\n        stream.removeTrack(track);\n        stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n            {track: track}));\n    }\n\n    function fireAddTrack(pc, track, receiver, streams) {\n        var trackEvent = new Event('track');\n        trackEvent.track = track;\n        trackEvent.receiver = receiver;\n        trackEvent.transceiver = {receiver: receiver};\n        trackEvent.streams = streams;\n        window.setTimeout(function() {\n            pc._dispatchEvent('track', trackEvent);\n        });\n    }\n\n    var RTCPeerConnection = function(config) {\n        var pc = this;\n\n        var _eventTarget = document.createDocumentFragment();\n        ['addEventListener', 'removeEventListener', 'dispatchEvent']\n            .forEach(function(method) {\n                pc[method] = _eventTarget[method].bind(_eventTarget);\n            });\n\n        this.canTrickleIceCandidates = null;\n\n        this.needNegotiation = false;\n\n        this.localStreams = [];\n        this.remoteStreams = [];\n\n        this.localDescription = null;\n        this.remoteDescription = null;\n\n        this.signalingState = 'stable';\n        this.iceConnectionState = 'new';\n        this.connectionState = 'new';\n        this.iceGatheringState = 'new';\n\n        config = JSON.parse(JSON.stringify(config || {}));\n\n        this.usingBundle = config.bundlePolicy === 'max-bundle';\n        if (config.rtcpMuxPolicy === 'negotiate') {\n            throw(makeError('NotSupportedError',\n                'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n        } else if (!config.rtcpMuxPolicy) {\n            config.rtcpMuxPolicy = 'require';\n        }\n\n        switch (config.iceTransportPolicy) {\n            case 'all':\n            case 'relay':\n                break;\n            default:\n                config.iceTransportPolicy = 'all';\n                break;\n        }\n\n        switch (config.bundlePolicy) {\n            case 'balanced':\n            case 'max-compat':\n            case 'max-bundle':\n                break;\n            default:\n                config.bundlePolicy = 'balanced';\n                break;\n        }\n\n        config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n        this._iceGatherers = [];\n        if (config.iceCandidatePoolSize) {\n            for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n                this._iceGatherers.push(new window.RTCIceGatherer({\n                    iceServers: config.iceServers,\n                    gatherPolicy: config.iceTransportPolicy\n                }));\n            }\n        } else {\n            config.iceCandidatePoolSize = 0;\n        }\n\n        this._config = config;\n\n        // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n        // everything that is needed to describe a SDP m-line.\n        this.transceivers = [];\n\n        this._sdpSessionId = SDPUtils.generateSessionId();\n        this._sdpSessionVersion = 0;\n\n        this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n        this._isClosed = false;\n    };\n\n    // set up event handlers on prototype\n    RTCPeerConnection.prototype.onicecandidate = null;\n    RTCPeerConnection.prototype.onaddstream = null;\n    RTCPeerConnection.prototype.ontrack = null;\n    RTCPeerConnection.prototype.onremovestream = null;\n    RTCPeerConnection.prototype.onsignalingstatechange = null;\n    RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n    RTCPeerConnection.prototype.onconnectionstatechange = null;\n    RTCPeerConnection.prototype.onicegatheringstatechange = null;\n    RTCPeerConnection.prototype.onnegotiationneeded = null;\n    RTCPeerConnection.prototype.ondatachannel = null;\n\n    RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n        if (this._isClosed) {\n            return;\n        }\n        this.dispatchEvent(event);\n        if (typeof this['on' + name] === 'function') {\n            this['on' + name](event);\n        }\n    };\n\n    RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n        var event = new Event('icegatheringstatechange');\n        this._dispatchEvent('icegatheringstatechange', event);\n    };\n\n    RTCPeerConnection.prototype.getConfiguration = function() {\n        return this._config;\n    };\n\n    RTCPeerConnection.prototype.getLocalStreams = function() {\n        return this.localStreams;\n    };\n\n    RTCPeerConnection.prototype.getRemoteStreams = function() {\n        return this.remoteStreams;\n    };\n\n    // internal helper to create a transceiver object.\n    // (which is not yet the same as the WebRTC 1.0 transceiver)\n    RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n        var hasBundleTransport = this.transceivers.length > 0;\n        var transceiver = {\n            track: null,\n            iceGatherer: null,\n            iceTransport: null,\n            dtlsTransport: null,\n            localCapabilities: null,\n            remoteCapabilities: null,\n            rtpSender: null,\n            rtpReceiver: null,\n            kind: kind,\n            mid: null,\n            sendEncodingParameters: null,\n            recvEncodingParameters: null,\n            stream: null,\n            associatedRemoteMediaStreams: [],\n            wantReceive: true\n        };\n        if (this.usingBundle && hasBundleTransport) {\n            transceiver.iceTransport = this.transceivers[0].iceTransport;\n            transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n        } else {\n            var transports = this._createIceAndDtlsTransports();\n            transceiver.iceTransport = transports.iceTransport;\n            transceiver.dtlsTransport = transports.dtlsTransport;\n        }\n        if (!doNotAdd) {\n            this.transceivers.push(transceiver);\n        }\n        return transceiver;\n    };\n\n    RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        if (this._isClosed) {\n            throw makeError('InvalidStateError',\n                'Attempted to call addTrack on a closed peerconnection.');\n        }\n\n        var alreadyExists = this.transceivers.find(function(s) {\n            return s.track === track;\n        });\n\n        if (alreadyExists) {\n            throw makeError('InvalidAccessError', 'Track already exists.');\n        }\n\n        var transceiver;\n        for (var i = 0; i < this.transceivers.length; i++) {\n            if (!this.transceivers[i].track &&\n                this.transceivers[i].kind === track.kind) {\n                transceiver = this.transceivers[i];\n            }\n        }\n        if (!transceiver) {\n            transceiver = this._createTransceiver(track.kind);\n        }\n\n        this._maybeFireNegotiationNeeded();\n\n        if (this.localStreams.indexOf(stream) === -1) {\n            this.localStreams.push(stream);\n        }\n\n        transceiver.track = track;\n        transceiver.stream = stream;\n        transceiver.rtpSender = new window.RTCRtpSender(track,\n            transceiver.dtlsTransport);\n        return transceiver.rtpSender;\n    };\n\n    RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        if (edgeVersion >= 15025) {\n            stream.getTracks().forEach(function(track) {\n                pc.addTrack(track, stream);\n            });\n        } else {\n            // Clone is necessary for local demos mostly, attaching directly\n            // to two different senders does not work (build 10547).\n            // Fixed in 15025 (or earlier)\n            var clonedStream = stream.clone();\n            stream.getTracks().forEach(function(track, idx) {\n                var clonedTrack = clonedStream.getTracks()[idx];\n                track.addEventListener('enabled', function(event) {\n                    clonedTrack.enabled = event.enabled;\n                });\n            });\n            clonedStream.getTracks().forEach(function(track) {\n                pc.addTrack(track, clonedStream);\n            });\n        }\n    };\n\n    RTCPeerConnection.prototype.removeTrack = function(sender) {\n        if (this._isClosed) {\n            throw makeError('InvalidStateError',\n                'Attempted to call removeTrack on a closed peerconnection.');\n        }\n\n        if (!(sender instanceof window.RTCRtpSender)) {\n            throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n                'does not implement interface RTCRtpSender.');\n        }\n\n        var transceiver = this.transceivers.find(function(t) {\n            return t.rtpSender === sender;\n        });\n\n        if (!transceiver) {\n            throw makeError('InvalidAccessError',\n                'Sender was not created by this connection.');\n        }\n        var stream = transceiver.stream;\n\n        transceiver.rtpSender.stop();\n        transceiver.rtpSender = null;\n        transceiver.track = null;\n        transceiver.stream = null;\n\n        // remove the stream from the set of local streams\n        var localStreams = this.transceivers.map(function(t) {\n            return t.stream;\n        });\n        if (localStreams.indexOf(stream) === -1 &&\n            this.localStreams.indexOf(stream) > -1) {\n            this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n        }\n\n        this._maybeFireNegotiationNeeded();\n    };\n\n    RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        stream.getTracks().forEach(function(track) {\n            var sender = pc.getSenders().find(function(s) {\n                return s.track === track;\n            });\n            if (sender) {\n                pc.removeTrack(sender);\n            }\n        });\n    };\n\n    RTCPeerConnection.prototype.getSenders = function() {\n        return this.transceivers.filter(function(transceiver) {\n            return !!transceiver.rtpSender;\n        })\n            .map(function(transceiver) {\n                return transceiver.rtpSender;\n            });\n    };\n\n    RTCPeerConnection.prototype.getReceivers = function() {\n        return this.transceivers.filter(function(transceiver) {\n            return !!transceiver.rtpReceiver;\n        })\n            .map(function(transceiver) {\n                return transceiver.rtpReceiver;\n            });\n    };\n\n\n    RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n                                                              usingBundle) {\n        var pc = this;\n        if (usingBundle && sdpMLineIndex > 0) {\n            return this.transceivers[0].iceGatherer;\n        } else if (this._iceGatherers.length) {\n            return this._iceGatherers.shift();\n        }\n        var iceGatherer = new window.RTCIceGatherer({\n            iceServers: this._config.iceServers,\n            gatherPolicy: this._config.iceTransportPolicy\n        });\n        Object.defineProperty(iceGatherer, 'state',\n            {value: 'new', writable: true}\n        );\n\n        this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n        this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n            var end = !event.candidate || Object.keys(event.candidate).length === 0;\n            // polyfill since RTCIceGatherer.state is not implemented in\n            // Edge 10547 yet.\n            iceGatherer.state = end ? 'completed' : 'gathering';\n            if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n                pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n            }\n        };\n        iceGatherer.addEventListener('localcandidate',\n            this.transceivers[sdpMLineIndex].bufferCandidates);\n        return iceGatherer;\n    };\n\n    // start gathering from an RTCIceGatherer.\n    RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n        var pc = this;\n        var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n        if (iceGatherer.onlocalcandidate) {\n            return;\n        }\n        var bufferedCandidateEvents =\n            this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n        this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n        iceGatherer.removeEventListener('localcandidate',\n            this.transceivers[sdpMLineIndex].bufferCandidates);\n        iceGatherer.onlocalcandidate = function(evt) {\n            if (pc.usingBundle && sdpMLineIndex > 0) {\n                // if we know that we use bundle we can drop candidates with\n                // dpMLineIndex > 0. If we don't do this then our state gets\n                // confused since we dispose the extra ice gatherer.\n                return;\n            }\n            var event = new Event('icecandidate');\n            event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n            var cand = evt.candidate;\n            // Edge emits an empty object for RTCIceCandidateComplete\n            var end = !cand || Object.keys(cand).length === 0;\n            if (end) {\n                // polyfill since RTCIceGatherer.state is not implemented in\n                // Edge 10547 yet.\n                if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n                    iceGatherer.state = 'completed';\n                }\n            } else {\n                if (iceGatherer.state === 'new') {\n                    iceGatherer.state = 'gathering';\n                }\n                // RTCIceCandidate doesn't have a component, needs to be added\n                cand.component = 1;\n                // also the usernameFragment. TODO: update SDP to take both variants.\n                cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n                var serializedCandidate = SDPUtils.writeCandidate(cand);\n                event.candidate = Object.assign(event.candidate,\n                    SDPUtils.parseCandidate(serializedCandidate));\n\n                event.candidate.candidate = serializedCandidate;\n                event.candidate.toJSON = function() {\n                    return {\n                        candidate: event.candidate.candidate,\n                        sdpMid: event.candidate.sdpMid,\n                        sdpMLineIndex: event.candidate.sdpMLineIndex,\n                        usernameFragment: event.candidate.usernameFragment\n                    };\n                };\n            }\n\n            // update local description.\n            var sections = SDPUtils.getMediaSections(pc.localDescription.sdp);\n            if (!end) {\n                sections[event.candidate.sdpMLineIndex] +=\n                    'a=' + event.candidate.candidate + '\\r\\n';\n            } else {\n                sections[event.candidate.sdpMLineIndex] +=\n                    'a=end-of-candidates\\r\\n';\n            }\n            pc.localDescription.sdp =\n                SDPUtils.getDescription(pc.localDescription.sdp) +\n                sections.join('');\n            var complete = pc.transceivers.every(function(transceiver) {\n                return transceiver.iceGatherer &&\n                    transceiver.iceGatherer.state === 'completed';\n            });\n\n            if (pc.iceGatheringState !== 'gathering') {\n                pc.iceGatheringState = 'gathering';\n                pc._emitGatheringStateChange();\n            }\n\n            // Emit candidate. Also emit null candidate when all gatherers are\n            // complete.\n            if (!end) {\n                pc._dispatchEvent('icecandidate', event);\n            }\n            if (complete) {\n                pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n                pc.iceGatheringState = 'complete';\n                pc._emitGatheringStateChange();\n            }\n        };\n\n        // emit already gathered candidates.\n        window.setTimeout(function() {\n            bufferedCandidateEvents.forEach(function(e) {\n                iceGatherer.onlocalcandidate(e);\n            });\n        }, 0);\n    };\n\n    // Create ICE transport and DTLS transport.\n    RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n        var pc = this;\n        var iceTransport = new window.RTCIceTransport(null);\n        iceTransport.onicestatechange = function() {\n            pc._updateIceConnectionState();\n            pc._updateConnectionState();\n        };\n\n        var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n        dtlsTransport.ondtlsstatechange = function() {\n            pc._updateConnectionState();\n        };\n        dtlsTransport.onerror = function() {\n            // onerror does not set state to failed by itself.\n            Object.defineProperty(dtlsTransport, 'state',\n                {value: 'failed', writable: true});\n            pc._updateConnectionState();\n        };\n\n        return {\n            iceTransport: iceTransport,\n            dtlsTransport: dtlsTransport\n        };\n    };\n\n    // Destroy ICE gatherer, ICE transport and DTLS transport.\n    // Without triggering the callbacks.\n    RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n        sdpMLineIndex) {\n        var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n        if (iceGatherer) {\n            delete iceGatherer.onlocalcandidate;\n            delete this.transceivers[sdpMLineIndex].iceGatherer;\n        }\n        var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n        if (iceTransport) {\n            delete iceTransport.onicestatechange;\n            delete this.transceivers[sdpMLineIndex].iceTransport;\n        }\n        var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n        if (dtlsTransport) {\n            delete dtlsTransport.ondtlsstatechange;\n            delete dtlsTransport.onerror;\n            delete this.transceivers[sdpMLineIndex].dtlsTransport;\n        }\n    };\n\n    // Start the RTP Sender and Receiver for a transceiver.\n    RTCPeerConnection.prototype._transceive = function(transceiver,\n                                                       send, recv) {\n        var params = getCommonCapabilities(transceiver.localCapabilities,\n            transceiver.remoteCapabilities);\n        if (send && transceiver.rtpSender) {\n            params.encodings = transceiver.sendEncodingParameters;\n            params.rtcp = {\n                cname: SDPUtils.localCName,\n                compound: transceiver.rtcpParameters.compound\n            };\n            if (transceiver.recvEncodingParameters.length) {\n                params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n            }\n            transceiver.rtpSender.send(params);\n        }\n        if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n            // remove RTX field in Edge 14942\n            if (transceiver.kind === 'video'\n                && transceiver.recvEncodingParameters\n                && edgeVersion < 15019) {\n                transceiver.recvEncodingParameters.forEach(function(p) {\n                    delete p.rtx;\n                });\n            }\n            if (transceiver.recvEncodingParameters.length) {\n                params.encodings = transceiver.recvEncodingParameters;\n            } else {\n                params.encodings = [{}];\n            }\n            params.rtcp = {\n                compound: transceiver.rtcpParameters.compound\n            };\n            if (transceiver.rtcpParameters.cname) {\n                params.rtcp.cname = transceiver.rtcpParameters.cname;\n            }\n            if (transceiver.sendEncodingParameters.length) {\n                params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n            }\n            transceiver.rtpReceiver.receive(params);\n        }\n    };\n\n    RTCPeerConnection.prototype.setLocalDescription = function(description) {\n        var pc = this;\n\n        // Note: pranswer is not supported.\n        if (['offer', 'answer'].indexOf(description.type) === -1) {\n            return Promise.reject(makeError('TypeError',\n                'Unsupported type \"' + description.type + '\"'));\n        }\n\n        if (!isActionAllowedInSignalingState('setLocalDescription',\n            description.type, pc.signalingState) || pc._isClosed) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not set local ' + description.type +\n                ' in state ' + pc.signalingState));\n        }\n\n        var sections;\n        var sessionpart;\n        if (description.type === 'offer') {\n            // VERY limited support for SDP munging. Limited to:\n            // * changing the order of codecs\n            sections = SDPUtils.splitSections(description.sdp);\n            sessionpart = sections.shift();\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var caps = SDPUtils.parseRtpParameters(mediaSection);\n                pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n            });\n\n            pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n                pc._gather(transceiver.mid, sdpMLineIndex);\n            });\n        } else if (description.type === 'answer') {\n            sections = SDPUtils.splitSections(pc.remoteDescription.sdp);\n            sessionpart = sections.shift();\n            var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                'a=ice-lite').length > 0;\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var transceiver = pc.transceivers[sdpMLineIndex];\n                var iceGatherer = transceiver.iceGatherer;\n                var iceTransport = transceiver.iceTransport;\n                var dtlsTransport = transceiver.dtlsTransport;\n                var localCapabilities = transceiver.localCapabilities;\n                var remoteCapabilities = transceiver.remoteCapabilities;\n\n                // treat bundle-only as not-rejected.\n                var rejected = SDPUtils.isRejected(mediaSection) &&\n                    SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n                if (!rejected && !transceiver.rejected) {\n                    var remoteIceParameters = SDPUtils.getIceParameters(\n                        mediaSection, sessionpart);\n                    var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                        mediaSection, sessionpart);\n                    if (isIceLite) {\n                        remoteDtlsParameters.role = 'server';\n                    }\n\n                    if (!pc.usingBundle || sdpMLineIndex === 0) {\n                        pc._gather(transceiver.mid, sdpMLineIndex);\n                        if (iceTransport.state === 'new') {\n                            iceTransport.start(iceGatherer, remoteIceParameters,\n                                isIceLite ? 'controlling' : 'controlled');\n                        }\n                        if (dtlsTransport.state === 'new') {\n                            dtlsTransport.start(remoteDtlsParameters);\n                        }\n                    }\n\n                    // Calculate intersection of capabilities.\n                    var params = getCommonCapabilities(localCapabilities,\n                        remoteCapabilities);\n\n                    // Start the RTCRtpSender. The RTCRtpReceiver for this\n                    // transceiver has already been started in setRemoteDescription.\n                    pc._transceive(transceiver,\n                        params.codecs.length > 0,\n                        false);\n                }\n            });\n        }\n\n        pc.localDescription = {\n            type: description.type,\n            sdp: description.sdp\n        };\n        if (description.type === 'offer') {\n            pc._updateSignalingState('have-local-offer');\n        } else {\n            pc._updateSignalingState('stable');\n        }\n\n        return Promise.resolve();\n    };\n\n    RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n        var pc = this;\n\n        // Note: pranswer is not supported.\n        if (['offer', 'answer'].indexOf(description.type) === -1) {\n            return Promise.reject(makeError('TypeError',\n                'Unsupported type \"' + description.type + '\"'));\n        }\n\n        if (!isActionAllowedInSignalingState('setRemoteDescription',\n            description.type, pc.signalingState) || pc._isClosed) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not set remote ' + description.type +\n                ' in state ' + pc.signalingState));\n        }\n\n        var streams = {};\n        pc.remoteStreams.forEach(function(stream) {\n            streams[stream.id] = stream;\n        });\n        var receiverList = [];\n        var sections = SDPUtils.splitSections(description.sdp);\n        var sessionpart = sections.shift();\n        var isIceLite = SDPUtils.matchPrefix(sessionpart,\n            'a=ice-lite').length > 0;\n        var usingBundle = SDPUtils.matchPrefix(sessionpart,\n            'a=group:BUNDLE ').length > 0;\n        pc.usingBundle = usingBundle;\n        var iceOptions = SDPUtils.matchPrefix(sessionpart,\n            'a=ice-options:')[0];\n        if (iceOptions) {\n            pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n                .indexOf('trickle') >= 0;\n        } else {\n            pc.canTrickleIceCandidates = false;\n        }\n\n        sections.forEach(function(mediaSection, sdpMLineIndex) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var kind = SDPUtils.getKind(mediaSection);\n            // treat bundle-only as not-rejected.\n            var rejected = SDPUtils.isRejected(mediaSection) &&\n                SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n            var protocol = lines[0].substr(2).split(' ')[2];\n\n            var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n            var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n            var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n            // Reject datachannels which are not implemented yet.\n            if ((kind === 'application' && protocol === 'DTLS/SCTP') || rejected) {\n                // TODO: this is dangerous in the case where a non-rejected m-line\n                //     becomes rejected.\n                pc.transceivers[sdpMLineIndex] = {\n                    mid: mid,\n                    kind: kind,\n                    rejected: true\n                };\n                return;\n            }\n\n            if (!rejected && pc.transceivers[sdpMLineIndex] &&\n                pc.transceivers[sdpMLineIndex].rejected) {\n                // recycle a rejected transceiver.\n                pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n            }\n\n            var transceiver;\n            var iceGatherer;\n            var iceTransport;\n            var dtlsTransport;\n            var rtpReceiver;\n            var sendEncodingParameters;\n            var recvEncodingParameters;\n            var localCapabilities;\n\n            var track;\n            // FIXME: ensure the mediaSection has rtcp-mux set.\n            var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n            var remoteIceParameters;\n            var remoteDtlsParameters;\n            if (!rejected) {\n                remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                    sessionpart);\n                remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                    sessionpart);\n                remoteDtlsParameters.role = 'client';\n            }\n            recvEncodingParameters =\n                SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n            var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n            var isComplete = SDPUtils.matchPrefix(mediaSection,\n                'a=end-of-candidates', sessionpart).length > 0;\n            var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                .map(function(cand) {\n                    return SDPUtils.parseCandidate(cand);\n                })\n                .filter(function(cand) {\n                    return cand.component === 1;\n                });\n\n            // Check if we can use BUNDLE and dispose transports.\n            if ((description.type === 'offer' || description.type === 'answer') &&\n                !rejected && usingBundle && sdpMLineIndex > 0 &&\n                pc.transceivers[sdpMLineIndex]) {\n                pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n                pc.transceivers[sdpMLineIndex].iceGatherer =\n                    pc.transceivers[0].iceGatherer;\n                pc.transceivers[sdpMLineIndex].iceTransport =\n                    pc.transceivers[0].iceTransport;\n                pc.transceivers[sdpMLineIndex].dtlsTransport =\n                    pc.transceivers[0].dtlsTransport;\n                if (pc.transceivers[sdpMLineIndex].rtpSender) {\n                    pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n                        pc.transceivers[0].dtlsTransport);\n                }\n                if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n                    pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n                        pc.transceivers[0].dtlsTransport);\n                }\n            }\n            if (description.type === 'offer' && !rejected) {\n                transceiver = pc.transceivers[sdpMLineIndex] ||\n                    pc._createTransceiver(kind);\n                transceiver.mid = mid;\n\n                if (!transceiver.iceGatherer) {\n                    transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n                        usingBundle);\n                }\n\n                if (cands.length && transceiver.iceTransport.state === 'new') {\n                    if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n                        transceiver.iceTransport.setRemoteCandidates(cands);\n                    } else {\n                        cands.forEach(function(candidate) {\n                            maybeAddCandidate(transceiver.iceTransport, candidate);\n                        });\n                    }\n                }\n\n                localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n                // filter RTX until additional stuff needed for RTX is implemented\n                // in adapter.js\n                if (edgeVersion < 15019) {\n                    localCapabilities.codecs = localCapabilities.codecs.filter(\n                        function(codec) {\n                            return codec.name !== 'rtx';\n                        });\n                }\n\n                sendEncodingParameters = transceiver.sendEncodingParameters || [{\n                    ssrc: (2 * sdpMLineIndex + 2) * 1001\n                }];\n\n                // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                var isNewTrack = false;\n                if (direction === 'sendrecv' || direction === 'sendonly') {\n                    isNewTrack = !transceiver.rtpReceiver;\n                    rtpReceiver = transceiver.rtpReceiver ||\n                        new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n                    if (isNewTrack) {\n                        var stream;\n                        track = rtpReceiver.track;\n                        // FIXME: does not work with Plan B.\n                        if (remoteMsid && remoteMsid.stream === '-') {\n                            // no-op. a stream id of '-' means: no associated stream.\n                        } else if (remoteMsid) {\n                            if (!streams[remoteMsid.stream]) {\n                                streams[remoteMsid.stream] = new window.MediaStream();\n                                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                                    get: function() {\n                                        return remoteMsid.stream;\n                                    }\n                                });\n                            }\n                            Object.defineProperty(track, 'id', {\n                                get: function() {\n                                    return remoteMsid.track;\n                                }\n                            });\n                            stream = streams[remoteMsid.stream];\n                        } else {\n                            if (!streams.default) {\n                                streams.default = new window.MediaStream();\n                            }\n                            stream = streams.default;\n                        }\n                        if (stream) {\n                            addTrackToStreamAndFireEvent(track, stream);\n                            transceiver.associatedRemoteMediaStreams.push(stream);\n                        }\n                        receiverList.push([track, rtpReceiver, stream]);\n                    }\n                } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n                    transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n                        var nativeTrack = s.getTracks().find(function(t) {\n                            return t.id === transceiver.rtpReceiver.track.id;\n                        });\n                        if (nativeTrack) {\n                            removeTrackFromStreamAndFireEvent(nativeTrack, s);\n                        }\n                    });\n                    transceiver.associatedRemoteMediaStreams = [];\n                }\n\n                transceiver.localCapabilities = localCapabilities;\n                transceiver.remoteCapabilities = remoteCapabilities;\n                transceiver.rtpReceiver = rtpReceiver;\n                transceiver.rtcpParameters = rtcpParameters;\n                transceiver.sendEncodingParameters = sendEncodingParameters;\n                transceiver.recvEncodingParameters = recvEncodingParameters;\n\n                // Start the RTCRtpReceiver now. The RTPSender is started in\n                // setLocalDescription.\n                pc._transceive(pc.transceivers[sdpMLineIndex],\n                    false,\n                    isNewTrack);\n            } else if (description.type === 'answer' && !rejected) {\n                transceiver = pc.transceivers[sdpMLineIndex];\n                iceGatherer = transceiver.iceGatherer;\n                iceTransport = transceiver.iceTransport;\n                dtlsTransport = transceiver.dtlsTransport;\n                rtpReceiver = transceiver.rtpReceiver;\n                sendEncodingParameters = transceiver.sendEncodingParameters;\n                localCapabilities = transceiver.localCapabilities;\n\n                pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n                    recvEncodingParameters;\n                pc.transceivers[sdpMLineIndex].remoteCapabilities =\n                    remoteCapabilities;\n                pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n                if (cands.length && iceTransport.state === 'new') {\n                    if ((isIceLite || isComplete) &&\n                        (!usingBundle || sdpMLineIndex === 0)) {\n                        iceTransport.setRemoteCandidates(cands);\n                    } else {\n                        cands.forEach(function(candidate) {\n                            maybeAddCandidate(transceiver.iceTransport, candidate);\n                        });\n                    }\n                }\n\n                if (!usingBundle || sdpMLineIndex === 0) {\n                    if (iceTransport.state === 'new') {\n                        iceTransport.start(iceGatherer, remoteIceParameters,\n                            'controlling');\n                    }\n                    if (dtlsTransport.state === 'new') {\n                        dtlsTransport.start(remoteDtlsParameters);\n                    }\n                }\n\n                pc._transceive(transceiver,\n                    direction === 'sendrecv' || direction === 'recvonly',\n                    direction === 'sendrecv' || direction === 'sendonly');\n\n                // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                if (rtpReceiver &&\n                    (direction === 'sendrecv' || direction === 'sendonly')) {\n                    track = rtpReceiver.track;\n                    if (remoteMsid) {\n                        if (!streams[remoteMsid.stream]) {\n                            streams[remoteMsid.stream] = new window.MediaStream();\n                        }\n                        addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n                        receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n                    } else {\n                        if (!streams.default) {\n                            streams.default = new window.MediaStream();\n                        }\n                        addTrackToStreamAndFireEvent(track, streams.default);\n                        receiverList.push([track, rtpReceiver, streams.default]);\n                    }\n                } else {\n                    // FIXME: actually the receiver should be created later.\n                    delete transceiver.rtpReceiver;\n                }\n            }\n        });\n\n        if (pc._dtlsRole === undefined) {\n            pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n        }\n\n        pc.remoteDescription = {\n            type: description.type,\n            sdp: description.sdp\n        };\n        if (description.type === 'offer') {\n            pc._updateSignalingState('have-remote-offer');\n        } else {\n            pc._updateSignalingState('stable');\n        }\n        Object.keys(streams).forEach(function(sid) {\n            var stream = streams[sid];\n            if (stream.getTracks().length) {\n                if (pc.remoteStreams.indexOf(stream) === -1) {\n                    pc.remoteStreams.push(stream);\n                    var event = new Event('addstream');\n                    event.stream = stream;\n                    window.setTimeout(function() {\n                        pc._dispatchEvent('addstream', event);\n                    });\n                }\n\n                receiverList.forEach(function(item) {\n                    var track = item[0];\n                    var receiver = item[1];\n                    if (stream.id !== item[2].id) {\n                        return;\n                    }\n                    fireAddTrack(pc, track, receiver, [stream]);\n                });\n            }\n        });\n        receiverList.forEach(function(item) {\n            if (item[2]) {\n                return;\n            }\n            fireAddTrack(pc, item[0], item[1], []);\n        });\n\n        // check whether addIceCandidate({}) was called within four seconds after\n        // setRemoteDescription.\n        window.setTimeout(function() {\n            if (!(pc && pc.transceivers)) {\n                return;\n            }\n            pc.transceivers.forEach(function(transceiver) {\n                if (transceiver.iceTransport &&\n                    transceiver.iceTransport.state === 'new' &&\n                    transceiver.iceTransport.getRemoteCandidates().length > 0) {\n                    console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n                        'an end-of-candidates notification');\n                    transceiver.iceTransport.addRemoteCandidate({});\n                }\n            });\n        }, 4000);\n\n        return Promise.resolve();\n    };\n\n    RTCPeerConnection.prototype.close = function() {\n        this.transceivers.forEach(function(transceiver) {\n            /* not yet\nif (transceiver.iceGatherer) {\ntransceiver.iceGatherer.close();\n}\n*/\n            if (transceiver.iceTransport) {\n                transceiver.iceTransport.stop();\n            }\n            if (transceiver.dtlsTransport) {\n                transceiver.dtlsTransport.stop();\n            }\n            if (transceiver.rtpSender) {\n                transceiver.rtpSender.stop();\n            }\n            if (transceiver.rtpReceiver) {\n                transceiver.rtpReceiver.stop();\n            }\n        });\n        // FIXME: clean up tracks, local streams, remote streams, etc\n        this._isClosed = true;\n        this._updateSignalingState('closed');\n    };\n\n    // Update the signaling state.\n    RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n        this.signalingState = newState;\n        var event = new Event('signalingstatechange');\n        this._dispatchEvent('signalingstatechange', event);\n    };\n\n    // Determine whether to fire the negotiationneeded event.\n    RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n        var pc = this;\n        if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n            return;\n        }\n        this.needNegotiation = true;\n        window.setTimeout(function() {\n            if (pc.needNegotiation) {\n                pc.needNegotiation = false;\n                var event = new Event('negotiationneeded');\n                pc._dispatchEvent('negotiationneeded', event);\n            }\n        }, 0);\n    };\n\n    // Update the ice connection state.\n    RTCPeerConnection.prototype._updateIceConnectionState = function() {\n        var newState;\n        var states = {\n            'new': 0,\n            closed: 0,\n            checking: 0,\n            connected: 0,\n            completed: 0,\n            disconnected: 0,\n            failed: 0\n        };\n        this.transceivers.forEach(function(transceiver) {\n            states[transceiver.iceTransport.state]++;\n        });\n\n        newState = 'new';\n        if (states.failed > 0) {\n            newState = 'failed';\n        } else if (states.checking > 0) {\n            newState = 'checking';\n        } else if (states.disconnected > 0) {\n            newState = 'disconnected';\n        } else if (states.new > 0) {\n            newState = 'new';\n        } else if (states.connected > 0) {\n            newState = 'connected';\n        } else if (states.completed > 0) {\n            newState = 'completed';\n        }\n\n        if (newState !== this.iceConnectionState) {\n            this.iceConnectionState = newState;\n            var event = new Event('iceconnectionstatechange');\n            this._dispatchEvent('iceconnectionstatechange', event);\n        }\n    };\n\n    // Update the connection state.\n    RTCPeerConnection.prototype._updateConnectionState = function() {\n        var newState;\n        var states = {\n            'new': 0,\n            closed: 0,\n            connecting: 0,\n            connected: 0,\n            completed: 0,\n            disconnected: 0,\n            failed: 0\n        };\n        this.transceivers.forEach(function(transceiver) {\n            states[transceiver.iceTransport.state]++;\n            states[transceiver.dtlsTransport.state]++;\n        });\n        // ICETransport.completed and connected are the same for this purpose.\n        states.connected += states.completed;\n\n        newState = 'new';\n        if (states.failed > 0) {\n            newState = 'failed';\n        } else if (states.connecting > 0) {\n            newState = 'connecting';\n        } else if (states.disconnected > 0) {\n            newState = 'disconnected';\n        } else if (states.new > 0) {\n            newState = 'new';\n        } else if (states.connected > 0) {\n            newState = 'connected';\n        }\n\n        if (newState !== this.connectionState) {\n            this.connectionState = newState;\n            var event = new Event('connectionstatechange');\n            this._dispatchEvent('connectionstatechange', event);\n        }\n    };\n\n    RTCPeerConnection.prototype.createOffer = function() {\n        var pc = this;\n\n        if (pc._isClosed) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not call createOffer after close'));\n        }\n\n        var numAudioTracks = pc.transceivers.filter(function(t) {\n            return t.kind === 'audio';\n        }).length;\n        var numVideoTracks = pc.transceivers.filter(function(t) {\n            return t.kind === 'video';\n        }).length;\n\n        // Determine number of audio and video tracks we need to send/recv.\n        var offerOptions = arguments[0];\n        if (offerOptions) {\n            // Reject Chrome legacy constraints.\n            if (offerOptions.mandatory || offerOptions.optional) {\n                throw new TypeError(\n                    'Legacy mandatory/optional constraints not supported.');\n            }\n            if (offerOptions.offerToReceiveAudio !== undefined) {\n                if (offerOptions.offerToReceiveAudio === true) {\n                    numAudioTracks = 1;\n                } else if (offerOptions.offerToReceiveAudio === false) {\n                    numAudioTracks = 0;\n                } else {\n                    numAudioTracks = offerOptions.offerToReceiveAudio;\n                }\n            }\n            if (offerOptions.offerToReceiveVideo !== undefined) {\n                if (offerOptions.offerToReceiveVideo === true) {\n                    numVideoTracks = 1;\n                } else if (offerOptions.offerToReceiveVideo === false) {\n                    numVideoTracks = 0;\n                } else {\n                    numVideoTracks = offerOptions.offerToReceiveVideo;\n                }\n            }\n        }\n\n        pc.transceivers.forEach(function(transceiver) {\n            if (transceiver.kind === 'audio') {\n                numAudioTracks--;\n                if (numAudioTracks < 0) {\n                    transceiver.wantReceive = false;\n                }\n            } else if (transceiver.kind === 'video') {\n                numVideoTracks--;\n                if (numVideoTracks < 0) {\n                    transceiver.wantReceive = false;\n                }\n            }\n        });\n\n        // Create M-lines for recvonly streams.\n        while (numAudioTracks > 0 || numVideoTracks > 0) {\n            if (numAudioTracks > 0) {\n                pc._createTransceiver('audio');\n                numAudioTracks--;\n            }\n            if (numVideoTracks > 0) {\n                pc._createTransceiver('video');\n                numVideoTracks--;\n            }\n        }\n\n        var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n            pc._sdpSessionVersion++);\n        pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n            // For each track, create an ice gatherer, ice transport,\n            // dtls transport, potentially rtpsender and rtpreceiver.\n            var track = transceiver.track;\n            var kind = transceiver.kind;\n            var mid = transceiver.mid || SDPUtils.generateIdentifier();\n            transceiver.mid = mid;\n\n            if (!transceiver.iceGatherer) {\n                transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n                    pc.usingBundle);\n            }\n\n            var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n            // filter RTX until additional stuff needed for RTX is implemented\n            // in adapter.js\n            if (edgeVersion < 15019) {\n                localCapabilities.codecs = localCapabilities.codecs.filter(\n                    function(codec) {\n                        return codec.name !== 'rtx';\n                    });\n            }\n            localCapabilities.codecs.forEach(function(codec) {\n                // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n                // by adding level-asymmetry-allowed=1\n                if (codec.name === 'H264' &&\n                    codec.parameters['level-asymmetry-allowed'] === undefined) {\n                    codec.parameters['level-asymmetry-allowed'] = '1';\n                }\n\n                // for subsequent offers, we might have to re-use the payload\n                // type of the last offer.\n                if (transceiver.remoteCapabilities &&\n                    transceiver.remoteCapabilities.codecs) {\n                    transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n                        if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                            codec.clockRate === remoteCodec.clockRate) {\n                            codec.preferredPayloadType = remoteCodec.payloadType;\n                        }\n                    });\n                }\n            });\n            localCapabilities.headerExtensions.forEach(function(hdrExt) {\n                var remoteExtensions = transceiver.remoteCapabilities &&\n                    transceiver.remoteCapabilities.headerExtensions || [];\n                remoteExtensions.forEach(function(rHdrExt) {\n                    if (hdrExt.uri === rHdrExt.uri) {\n                        hdrExt.id = rHdrExt.id;\n                    }\n                });\n            });\n\n            // generate an ssrc now, to be used later in rtpSender.send\n            var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n                ssrc: (2 * sdpMLineIndex + 1) * 1001\n            }];\n            if (track) {\n                // add RTX\n                if (edgeVersion >= 15019 && kind === 'video' &&\n                    !sendEncodingParameters[0].rtx) {\n                    sendEncodingParameters[0].rtx = {\n                        ssrc: sendEncodingParameters[0].ssrc + 1\n                    };\n                }\n            }\n\n            if (transceiver.wantReceive) {\n                transceiver.rtpReceiver = new window.RTCRtpReceiver(\n                    transceiver.dtlsTransport, kind);\n            }\n\n            transceiver.localCapabilities = localCapabilities;\n            transceiver.sendEncodingParameters = sendEncodingParameters;\n        });\n\n        // always offer BUNDLE and dispose on return if not supported.\n        if (pc._config.bundlePolicy !== 'max-compat') {\n            sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n                return t.mid;\n            }).join(' ') + '\\r\\n';\n        }\n        sdp += 'a=ice-options:trickle\\r\\n';\n\n        pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n            sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n                'offer', transceiver.stream, pc._dtlsRole);\n            sdp += 'a=rtcp-rsize\\r\\n';\n\n            if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n                (sdpMLineIndex === 0 || !pc.usingBundle)) {\n                transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n                    cand.component = 1;\n                    sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n                });\n\n                if (transceiver.iceGatherer.state === 'completed') {\n                    sdp += 'a=end-of-candidates\\r\\n';\n                }\n            }\n        });\n\n        var desc = new window.RTCSessionDescription({\n            type: 'offer',\n            sdp: sdp\n        });\n        return Promise.resolve(desc);\n    };\n\n    RTCPeerConnection.prototype.createAnswer = function() {\n        var pc = this;\n\n        if (pc._isClosed) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not call createAnswer after close'));\n        }\n\n        if (!(pc.signalingState === 'have-remote-offer' ||\n            pc.signalingState === 'have-local-pranswer')) {\n            return Promise.reject(makeError('InvalidStateError',\n                'Can not call createAnswer in signalingState ' + pc.signalingState));\n        }\n\n        var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n            pc._sdpSessionVersion++);\n        if (pc.usingBundle) {\n            sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n                return t.mid;\n            }).join(' ') + '\\r\\n';\n        }\n        var mediaSectionsInOffer = SDPUtils.getMediaSections(\n            pc.remoteDescription.sdp).length;\n        pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n            if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n                return;\n            }\n            if (transceiver.rejected) {\n                if (transceiver.kind === 'application') {\n                    sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n                } else if (transceiver.kind === 'audio') {\n                    sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n                        'a=rtpmap:0 PCMU/8000\\r\\n';\n                } else if (transceiver.kind === 'video') {\n                    sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n                        'a=rtpmap:120 VP8/90000\\r\\n';\n                }\n                sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n                    'a=inactive\\r\\n' +\n                    'a=mid:' + transceiver.mid + '\\r\\n';\n                return;\n            }\n\n            // FIXME: look at direction.\n            if (transceiver.stream) {\n                var localTrack;\n                if (transceiver.kind === 'audio') {\n                    localTrack = transceiver.stream.getAudioTracks()[0];\n                } else if (transceiver.kind === 'video') {\n                    localTrack = transceiver.stream.getVideoTracks()[0];\n                }\n                if (localTrack) {\n                    // add RTX\n                    if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n                        !transceiver.sendEncodingParameters[0].rtx) {\n                        transceiver.sendEncodingParameters[0].rtx = {\n                            ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n                        };\n                    }\n                }\n            }\n\n            // Calculate intersection of capabilities.\n            var commonCapabilities = getCommonCapabilities(\n                transceiver.localCapabilities,\n                transceiver.remoteCapabilities);\n\n            var hasRtx = commonCapabilities.codecs.filter(function(c) {\n                return c.name.toLowerCase() === 'rtx';\n            }).length;\n            if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n                delete transceiver.sendEncodingParameters[0].rtx;\n            }\n\n            sdp += writeMediaSection(transceiver, commonCapabilities,\n                'answer', transceiver.stream, pc._dtlsRole);\n            if (transceiver.rtcpParameters &&\n                transceiver.rtcpParameters.reducedSize) {\n                sdp += 'a=rtcp-rsize\\r\\n';\n            }\n        });\n\n        var desc = new window.RTCSessionDescription({\n            type: 'answer',\n            sdp: sdp\n        });\n        return Promise.resolve(desc);\n    };\n\n    RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n        var pc = this;\n        var sections;\n        if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n            candidate.sdpMid)) {\n            return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n        }\n\n        // TODO: needs to go into ops queue.\n        return new Promise(function(resolve, reject) {\n            if (!pc.remoteDescription) {\n                return reject(makeError('InvalidStateError',\n                    'Can not add ICE candidate without a remote description'));\n            } else if (!candidate || candidate.candidate === '') {\n                for (var j = 0; j < pc.transceivers.length; j++) {\n                    if (pc.transceivers[j].rejected) {\n                        continue;\n                    }\n                    pc.transceivers[j].iceTransport.addRemoteCandidate({});\n                    sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n                    sections[j] += 'a=end-of-candidates\\r\\n';\n                    pc.remoteDescription.sdp =\n                        SDPUtils.getDescription(pc.remoteDescription.sdp) +\n                        sections.join('');\n                    if (pc.usingBundle) {\n                        break;\n                    }\n                }\n            } else {\n                var sdpMLineIndex = candidate.sdpMLineIndex;\n                if (candidate.sdpMid) {\n                    for (var i = 0; i < pc.transceivers.length; i++) {\n                        if (pc.transceivers[i].mid === candidate.sdpMid) {\n                            sdpMLineIndex = i;\n                            break;\n                        }\n                    }\n                }\n                var transceiver = pc.transceivers[sdpMLineIndex];\n                if (transceiver) {\n                    if (transceiver.rejected) {\n                        return resolve();\n                    }\n                    var cand = Object.keys(candidate.candidate).length > 0 ?\n                        SDPUtils.parseCandidate(candidate.candidate) : {};\n                    // Ignore Chrome's invalid candidates since Edge does not like them.\n                    if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n                        return resolve();\n                    }\n                    // Ignore RTCP candidates, we assume RTCP-MUX.\n                    if (cand.component && cand.component !== 1) {\n                        return resolve();\n                    }\n                    // when using bundle, avoid adding candidates to the wrong\n                    // ice transport. And avoid adding candidates added in the SDP.\n                    if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n                        transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n                        if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n                            return reject(makeError('OperationError',\n                                'Can not add ICE candidate'));\n                        }\n                    }\n\n                    // update the remoteDescription.\n                    var candidateString = candidate.candidate.trim();\n                    if (candidateString.indexOf('a=') === 0) {\n                        candidateString = candidateString.substr(2);\n                    }\n                    sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n                    sections[sdpMLineIndex] += 'a=' +\n                        (cand.type ? candidateString : 'end-of-candidates')\n                        + '\\r\\n';\n                    pc.remoteDescription.sdp =\n                        SDPUtils.getDescription(pc.remoteDescription.sdp) +\n                        sections.join('');\n                } else {\n                    return reject(makeError('OperationError',\n                        'Can not add ICE candidate'));\n                }\n            }\n            resolve();\n        });\n    };\n\n    RTCPeerConnection.prototype.getStats = function() {\n        var promises = [];\n        this.transceivers.forEach(function(transceiver) {\n            ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n                'dtlsTransport'].forEach(function(method) {\n                if (transceiver[method]) {\n                    promises.push(transceiver[method].getStats());\n                }\n            });\n        });\n        var fixStatsType = function(stat) {\n            return {\n                inboundrtp: 'inbound-rtp',\n                outboundrtp: 'outbound-rtp',\n                candidatepair: 'candidate-pair',\n                localcandidate: 'local-candidate',\n                remotecandidate: 'remote-candidate'\n            }[stat.type] || stat.type;\n        };\n        return new Promise(function(resolve) {\n            // shim getStats with maplike support\n            var results = new Map();\n            Promise.all(promises).then(function(res) {\n                res.forEach(function(result) {\n                    Object.keys(result).forEach(function(id) {\n                        result[id].type = fixStatsType(result[id]);\n                        results.set(id, result[id]);\n                    });\n                });\n                resolve(results);\n            });\n        });\n    };\n\n    // legacy callback shims. Should be moved to adapter.js some days.\n    var methods = ['createOffer', 'createAnswer'];\n    methods.forEach(function(method) {\n        var nativeMethod = RTCPeerConnection.prototype[method];\n        RTCPeerConnection.prototype[method] = function() {\n            var args = arguments;\n            if (typeof args[0] === 'function' ||\n                typeof args[1] === 'function') { // legacy\n                return nativeMethod.apply(this, [arguments[2]])\n                    .then(function(description) {\n                        if (typeof args[0] === 'function') {\n                            args[0].apply(null, [description]);\n                        }\n                    }, function(error) {\n                        if (typeof args[1] === 'function') {\n                            args[1].apply(null, [error]);\n                        }\n                    });\n            }\n            return nativeMethod.apply(this, arguments);\n        };\n    });\n\n    methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n    methods.forEach(function(method) {\n        var nativeMethod = RTCPeerConnection.prototype[method];\n        RTCPeerConnection.prototype[method] = function() {\n            var args = arguments;\n            if (typeof args[1] === 'function' ||\n                typeof args[2] === 'function') { // legacy\n                return nativeMethod.apply(this, arguments)\n                    .then(function() {\n                        if (typeof args[1] === 'function') {\n                            args[1].apply(null);\n                        }\n                    }, function(error) {\n                        if (typeof args[2] === 'function') {\n                            args[2].apply(null, [error]);\n                        }\n                    });\n            }\n            return nativeMethod.apply(this, arguments);\n        };\n    });\n\n    // getStats is special. It doesn't have a spec legacy method yet we support\n    // getStats(something, cb) without error callbacks.\n    ['getStats'].forEach(function(method) {\n        var nativeMethod = RTCPeerConnection.prototype[method];\n        RTCPeerConnection.prototype[method] = function() {\n            var args = arguments;\n            if (typeof args[1] === 'function') {\n                return nativeMethod.apply(this, arguments)\n                    .then(function() {\n                        if (typeof args[1] === 'function') {\n                            args[1].apply(null);\n                        }\n                    });\n            }\n            return nativeMethod.apply(this, arguments);\n        };\n    });\n\n    return RTCPeerConnection;\n};\n\n},{\"sdp\":2}],2:[function(require,module,exports){\n/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n    return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n    return blob.trim().split('\\n').map(function(line) {\n        return line.trim();\n    });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n    var parts = blob.split('\\nm=');\n    return parts.map(function(part, index) {\n        return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n    });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n    var sections = SDPUtils.splitSections(blob);\n    return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n    var sections = SDPUtils.splitSections(blob);\n    sections.shift();\n    return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n    return SDPUtils.splitLines(blob).filter(function(line) {\n        return line.indexOf(prefix) === 0;\n    });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n    var parts;\n    // Parse both variants.\n    if (line.indexOf('a=candidate:') === 0) {\n        parts = line.substring(12).split(' ');\n    } else {\n        parts = line.substring(10).split(' ');\n    }\n\n    var candidate = {\n        foundation: parts[0],\n        component: parseInt(parts[1], 10),\n        protocol: parts[2].toLowerCase(),\n        priority: parseInt(parts[3], 10),\n        ip: parts[4],\n        port: parseInt(parts[5], 10),\n        // skip parts[6] == 'typ'\n        type: parts[7]\n    };\n\n    for (var i = 8; i < parts.length; i += 2) {\n        switch (parts[i]) {\n            case 'raddr':\n                candidate.relatedAddress = parts[i + 1];\n                break;\n            case 'rport':\n                candidate.relatedPort = parseInt(parts[i + 1], 10);\n                break;\n            case 'tcptype':\n                candidate.tcpType = parts[i + 1];\n                break;\n            case 'ufrag':\n                candidate.ufrag = parts[i + 1]; // for backward compability.\n                candidate.usernameFragment = parts[i + 1];\n                break;\n            default: // extension handling, in particular ufrag\n                candidate[parts[i]] = parts[i + 1];\n                break;\n        }\n    }\n    return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n    var sdp = [];\n    sdp.push(candidate.foundation);\n    sdp.push(candidate.component);\n    sdp.push(candidate.protocol.toUpperCase());\n    sdp.push(candidate.priority);\n    sdp.push(candidate.ip);\n    sdp.push(candidate.port);\n\n    var type = candidate.type;\n    sdp.push('typ');\n    sdp.push(type);\n    if (type !== 'host' && candidate.relatedAddress &&\n        candidate.relatedPort) {\n        sdp.push('raddr');\n        sdp.push(candidate.relatedAddress); // was: relAddr\n        sdp.push('rport');\n        sdp.push(candidate.relatedPort); // was: relPort\n    }\n    if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n        sdp.push('tcptype');\n        sdp.push(candidate.tcpType);\n    }\n    if (candidate.usernameFragment || candidate.ufrag) {\n        sdp.push('ufrag');\n        sdp.push(candidate.usernameFragment || candidate.ufrag);\n    }\n    return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n    return line.substr(14).split(' ');\n}\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n    var parts = line.substr(9).split(' ');\n    var parsed = {\n        payloadType: parseInt(parts.shift(), 10) // was: id\n    };\n\n    parts = parts[0].split('/');\n\n    parsed.name = parts[0];\n    parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n    // was: channels\n    parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n    return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n        pt = codec.preferredPayloadType;\n    }\n    return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n        (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n    var parts = line.substr(9).split(' ');\n    return {\n        id: parseInt(parts[0], 10),\n        direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n        uri: parts[1]\n    };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n    return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n        (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n            ? '/' + headerExtension.direction\n            : '') +\n        ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n    var parsed = {};\n    var kv;\n    var parts = line.substr(line.indexOf(' ') + 1).split(';');\n    for (var j = 0; j < parts.length; j++) {\n        kv = parts[j].trim().split('=');\n        parsed[kv[0].trim()] = kv[1];\n    }\n    return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n    var line = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n        pt = codec.preferredPayloadType;\n    }\n    if (codec.parameters && Object.keys(codec.parameters).length) {\n        var params = [];\n        Object.keys(codec.parameters).forEach(function(param) {\n            params.push(param + '=' + codec.parameters[param]);\n        });\n        line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n    }\n    return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n    var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n    return {\n        type: parts.shift(),\n        parameter: parts.join(' ')\n    };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n    var lines = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n        pt = codec.preferredPayloadType;\n    }\n    if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n        // FIXME: special handling for trr-int?\n        codec.rtcpFeedback.forEach(function(fb) {\n            lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n                (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n                '\\r\\n';\n        });\n    }\n    return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n    var sp = line.indexOf(' ');\n    var parts = {\n        ssrc: parseInt(line.substr(7, sp - 7), 10)\n    };\n    var colon = line.indexOf(':', sp);\n    if (colon > -1) {\n        parts.attribute = line.substr(sp + 1, colon - sp - 1);\n        parts.value = line.substr(colon + 1);\n    } else {\n        parts.attribute = line.substr(sp + 1);\n    }\n    return parts;\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n    var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n    if (mid) {\n        return mid.substr(6);\n    }\n}\n\nSDPUtils.parseFingerprint = function(line) {\n    var parts = line.substr(14).split(' ');\n    return {\n        algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n        value: parts[1]\n    };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n        'a=fingerprint:');\n    // Note: a=setup line is ignored since we use the 'auto' role.\n    // Note2: 'algorithm' is not case sensitive except in Edge.\n    return {\n        role: 'auto',\n        fingerprints: lines.map(SDPUtils.parseFingerprint)\n    };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n    var sdp = 'a=setup:' + setupType + '\\r\\n';\n    params.fingerprints.forEach(function(fp) {\n        sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n    });\n    return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    // Search in session part, too.\n    lines = lines.concat(SDPUtils.splitLines(sessionpart));\n    var iceParameters = {\n        usernameFragment: lines.filter(function(line) {\n            return line.indexOf('a=ice-ufrag:') === 0;\n        })[0].substr(12),\n        password: lines.filter(function(line) {\n            return line.indexOf('a=ice-pwd:') === 0;\n        })[0].substr(10)\n    };\n    return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n    return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n        'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n    var description = {\n        codecs: [],\n        headerExtensions: [],\n        fecMechanisms: [],\n        rtcp: []\n    };\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n        var pt = mline[i];\n        var rtpmapline = SDPUtils.matchPrefix(\n            mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n        if (rtpmapline) {\n            var codec = SDPUtils.parseRtpMap(rtpmapline);\n            var fmtps = SDPUtils.matchPrefix(\n                mediaSection, 'a=fmtp:' + pt + ' ');\n            // Only the first a=fmtp:<pt> is considered.\n            codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n            codec.rtcpFeedback = SDPUtils.matchPrefix(\n                mediaSection, 'a=rtcp-fb:' + pt + ' ')\n                .map(SDPUtils.parseRtcpFb);\n            description.codecs.push(codec);\n            // parse FEC mechanisms from rtpmap lines.\n            switch (codec.name.toUpperCase()) {\n                case 'RED':\n                case 'ULPFEC':\n                    description.fecMechanisms.push(codec.name.toUpperCase());\n                    break;\n                default: // only RED and ULPFEC are recognized as FEC mechanisms.\n                    break;\n            }\n        }\n    }\n    SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n        description.headerExtensions.push(SDPUtils.parseExtmap(line));\n    });\n    // FIXME: parse rtcp.\n    return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n    var sdp = '';\n\n    // Build the mline.\n    sdp += 'm=' + kind + ' ';\n    sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n    sdp += ' UDP/TLS/RTP/SAVPF ';\n    sdp += caps.codecs.map(function(codec) {\n        if (codec.preferredPayloadType !== undefined) {\n            return codec.preferredPayloadType;\n        }\n        return codec.payloadType;\n    }).join(' ') + '\\r\\n';\n\n    sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n    sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n    // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n    caps.codecs.forEach(function(codec) {\n        sdp += SDPUtils.writeRtpMap(codec);\n        sdp += SDPUtils.writeFmtp(codec);\n        sdp += SDPUtils.writeRtcpFb(codec);\n    });\n    var maxptime = 0;\n    caps.codecs.forEach(function(codec) {\n        if (codec.maxptime > maxptime) {\n            maxptime = codec.maxptime;\n        }\n    });\n    if (maxptime > 0) {\n        sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n    }\n    sdp += 'a=rtcp-mux\\r\\n';\n\n    caps.headerExtensions.forEach(function(extension) {\n        sdp += SDPUtils.writeExtmap(extension);\n    });\n    // FIXME: write fecMechanisms.\n    return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n    var encodingParameters = [];\n    var description = SDPUtils.parseRtpParameters(mediaSection);\n    var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n    var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n    // filter a=ssrc:... cname:, ignore PlanB-msid\n    var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n        .map(function(line) {\n            return SDPUtils.parseSsrcMedia(line);\n        })\n        .filter(function(parts) {\n            return parts.attribute === 'cname';\n        });\n    var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n    var secondarySsrc;\n\n    var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n        .map(function(line) {\n            var parts = line.split(' ');\n            parts.shift();\n            return parts.map(function(part) {\n                return parseInt(part, 10);\n            });\n        });\n    if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n        secondarySsrc = flows[0][1];\n    }\n\n    description.codecs.forEach(function(codec) {\n        if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n            var encParam = {\n                ssrc: primarySsrc,\n                codecPayloadType: parseInt(codec.parameters.apt, 10),\n                rtx: {\n                    ssrc: secondarySsrc\n                }\n            };\n            encodingParameters.push(encParam);\n            if (hasRed) {\n                encParam = JSON.parse(JSON.stringify(encParam));\n                encParam.fec = {\n                    ssrc: secondarySsrc,\n                    mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n                };\n                encodingParameters.push(encParam);\n            }\n        }\n    });\n    if (encodingParameters.length === 0 && primarySsrc) {\n        encodingParameters.push({\n            ssrc: primarySsrc\n        });\n    }\n\n    // we support both b=AS and b=TIAS but interpret AS as TIAS.\n    var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n    if (bandwidth.length) {\n        if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n            bandwidth = parseInt(bandwidth[0].substr(7), 10);\n        } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n            // use formula from JSEP to convert b=AS to TIAS value.\n            bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n                - (50 * 40 * 8);\n        } else {\n            bandwidth = undefined;\n        }\n        encodingParameters.forEach(function(params) {\n            params.maxBitrate = bandwidth;\n        });\n    }\n    return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n    var rtcpParameters = {};\n\n    var cname;\n    // Gets the first SSRC. Note that with RTX there might be multiple\n    // SSRCs.\n    var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n        .map(function(line) {\n            return SDPUtils.parseSsrcMedia(line);\n        })\n        .filter(function(obj) {\n            return obj.attribute === 'cname';\n        })[0];\n    if (remoteSsrc) {\n        rtcpParameters.cname = remoteSsrc.value;\n        rtcpParameters.ssrc = remoteSsrc.ssrc;\n    }\n\n    // Edge uses the compound attribute instead of reducedSize\n    // compound is !reducedSize\n    var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n    rtcpParameters.reducedSize = rsize.length > 0;\n    rtcpParameters.compound = rsize.length === 0;\n\n    // parses the rtcp-mux attrbute.\n    // Note that Edge does not support unmuxed RTCP.\n    var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n    rtcpParameters.mux = mux.length > 0;\n\n    return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n    var parts;\n    var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n    if (spec.length === 1) {\n        parts = spec[0].substr(7).split(' ');\n        return {stream: parts[0], track: parts[1]};\n    }\n    var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n        .map(function(line) {\n            return SDPUtils.parseSsrcMedia(line);\n        })\n        .filter(function(parts) {\n            return parts.attribute === 'msid';\n        });\n    if (planB.length > 0) {\n        parts = planB[0].value.split(' ');\n        return {stream: parts[0], track: parts[1]};\n    }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n    return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer) {\n    var sessionId;\n    var version = sessVer !== undefined ? sessVer : 2;\n    if (sessId) {\n        sessionId = sessId;\n    } else {\n        sessionId = SDPUtils.generateSessionId();\n    }\n    // FIXME: sess-id should be an NTP timestamp.\n    return 'v=0\\r\\n' +\n        'o=thisisadapterortc ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' +\n        's=-\\r\\n' +\n        't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n    var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n    // Map ICE parameters (ufrag, pwd) to SDP.\n    sdp += SDPUtils.writeIceParameters(\n        transceiver.iceGatherer.getLocalParameters());\n\n    // Map DTLS parameters to SDP.\n    sdp += SDPUtils.writeDtlsParameters(\n        transceiver.dtlsTransport.getLocalParameters(),\n        type === 'offer' ? 'actpass' : 'active');\n\n    sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n    if (transceiver.direction) {\n        sdp += 'a=' + transceiver.direction + '\\r\\n';\n    } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n        sdp += 'a=sendrecv\\r\\n';\n    } else if (transceiver.rtpSender) {\n        sdp += 'a=sendonly\\r\\n';\n    } else if (transceiver.rtpReceiver) {\n        sdp += 'a=recvonly\\r\\n';\n    } else {\n        sdp += 'a=inactive\\r\\n';\n    }\n\n    if (transceiver.rtpSender) {\n        // spec.\n        var msid = 'msid:' + stream.id + ' ' +\n            transceiver.rtpSender.track.id + '\\r\\n';\n        sdp += 'a=' + msid;\n\n        // for Chrome.\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n            ' ' + msid;\n        if (transceiver.sendEncodingParameters[0].rtx) {\n            sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                ' ' + msid;\n            sdp += 'a=ssrc-group:FID ' +\n                transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                transceiver.sendEncodingParameters[0].rtx.ssrc +\n                '\\r\\n';\n        }\n    }\n    // FIXME: this should be written by writeRtpDescription.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n    if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n            ' cname:' + SDPUtils.localCName + '\\r\\n';\n    }\n    return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n    // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n    var lines = SDPUtils.splitLines(mediaSection);\n    for (var i = 0; i < lines.length; i++) {\n        switch (lines[i]) {\n            case 'a=sendrecv':\n            case 'a=sendonly':\n            case 'a=recvonly':\n            case 'a=inactive':\n                return lines[i].substr(2);\n            default:\n            // FIXME: What should happen here?\n        }\n    }\n    if (sessionpart) {\n        return SDPUtils.getDirection(sessionpart);\n    }\n    return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n    return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var parts = lines[0].substr(2).split(' ');\n    return {\n        kind: parts[0],\n        port: parseInt(parts[1], 10),\n        protocol: parts[2],\n        fmt: parts.slice(3).join(' ')\n    };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n    var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n    var parts = line.substr(2).split(' ');\n    return {\n        username: parts[0],\n        sessionId: parts[1],\n        sessionVersion: parseInt(parts[2], 10),\n        netType: parts[3],\n        addressType: parts[4],\n        address: parts[5],\n    };\n}\n\n// Expose public methods.\nif (typeof module === 'object') {\n    module.exports = SDPUtils;\n}\n\n},{}],3:[function(require,module,exports){\n(function (global){\n    /*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n    /* eslint-env node */\n\n    'use strict';\n\n    var adapterFactory = require('./adapter_factory.js');\n    module.exports = adapterFactory({window: global.window});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./adapter_factory.js\":4}],4:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n\n'use strict';\n\nvar utils = require('./utils');\n// Shimming starts here.\nmodule.exports = function(dependencies, opts) {\n    var window = dependencies && dependencies.window;\n\n    var options = {\n        shimChrome: true,\n        shimFirefox: true,\n        shimEdge: true,\n        shimSafari: true,\n    };\n\n    for (var key in opts) {\n        if (hasOwnProperty.call(opts, key)) {\n            options[key] = opts[key];\n        }\n    }\n\n    // Utils.\n    var logging = utils.log;\n    var browserDetails = utils.detectBrowser(window);\n\n    // Uncomment the line below if you want logging to occur, including logging\n    // for the switch statement below. Can also be turned on in the browser via\n    // adapter.disableLog(false), but then logging from the switch statement below\n    // will not appear.\n    // require('./utils').disableLog(false);\n\n    // Browser shims.\n    var chromeShim = require('./chrome/chrome_shim') || null;\n    var edgeShim = require('./edge/edge_shim') || null;\n    var firefoxShim = require('./firefox/firefox_shim') || null;\n    var safariShim = require('./safari/safari_shim') || null;\n    var commonShim = require('./common_shim') || null;\n\n    // Export to the adapter global object visible in the browser.\n    var adapter = {\n        browserDetails: browserDetails,\n        commonShim: commonShim,\n        extractVersion: utils.extractVersion,\n        disableLog: utils.disableLog,\n        disableWarnings: utils.disableWarnings\n    };\n\n    // Shim browser if found.\n    switch (browserDetails.browser) {\n        case 'chrome':\n            if (!chromeShim || !chromeShim.shimPeerConnection ||\n                !options.shimChrome) {\n                logging('Chrome shim is not included in this adapter release.');\n                return adapter;\n            }\n            logging('adapter.js shimming chrome.');\n            // Export to the adapter global object visible in the browser.\n            adapter.browserShim = chromeShim;\n            commonShim.shimCreateObjectURL(window);\n\n            chromeShim.shimGetUserMedia(window);\n            chromeShim.shimMediaStream(window);\n            chromeShim.shimSourceObject(window);\n            chromeShim.shimPeerConnection(window);\n            chromeShim.shimOnTrack(window);\n            chromeShim.shimAddTrackRemoveTrack(window);\n            chromeShim.shimGetSendersWithDtmf(window);\n\n            commonShim.shimRTCIceCandidate(window);\n            commonShim.shimMaxMessageSize(window);\n            commonShim.shimSendThrowTypeError(window);\n            break;\n        case 'firefox':\n            if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n                !options.shimFirefox) {\n                logging('Firefox shim is not included in this adapter release.');\n                return adapter;\n            }\n            logging('adapter.js shimming firefox.');\n            // Export to the adapter global object visible in the browser.\n            adapter.browserShim = firefoxShim;\n            commonShim.shimCreateObjectURL(window);\n\n            firefoxShim.shimGetUserMedia(window);\n            firefoxShim.shimSourceObject(window);\n            firefoxShim.shimPeerConnection(window);\n            firefoxShim.shimOnTrack(window);\n            firefoxShim.shimRemoveStream(window);\n\n            commonShim.shimRTCIceCandidate(window);\n            commonShim.shimMaxMessageSize(window);\n            commonShim.shimSendThrowTypeError(window);\n            break;\n        case 'edge':\n            if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n                logging('MS edge shim is not included in this adapter release.');\n                return adapter;\n            }\n            logging('adapter.js shimming edge.');\n            // Export to the adapter global object visible in the browser.\n            adapter.browserShim = edgeShim;\n            commonShim.shimCreateObjectURL(window);\n\n            edgeShim.shimGetUserMedia(window);\n            edgeShim.shimPeerConnection(window);\n            edgeShim.shimReplaceTrack(window);\n\n            // the edge shim implements the full RTCIceCandidate object.\n\n            commonShim.shimMaxMessageSize(window);\n            commonShim.shimSendThrowTypeError(window);\n            break;\n        case 'safari':\n            if (!safariShim || !options.shimSafari) {\n                logging('Safari shim is not included in this adapter release.');\n                return adapter;\n            }\n            logging('adapter.js shimming safari.');\n            // Export to the adapter global object visible in the browser.\n            adapter.browserShim = safariShim;\n            commonShim.shimCreateObjectURL(window);\n\n            safariShim.shimRTCIceServerUrls(window);\n            safariShim.shimCallbacksAPI(window);\n            safariShim.shimLocalStreamsAPI(window);\n            safariShim.shimRemoteStreamsAPI(window);\n            safariShim.shimTrackEventTransceiver(window);\n            safariShim.shimGetUserMedia(window);\n            safariShim.shimCreateOfferLegacy(window);\n\n            commonShim.shimRTCIceCandidate(window);\n            commonShim.shimMaxMessageSize(window);\n            commonShim.shimSendThrowTypeError(window);\n            break;\n        default:\n            logging('Unsupported browser!');\n            break;\n    }\n\n    return adapter;\n};\n\n},{\"./chrome/chrome_shim\":5,\"./common_shim\":7,\"./edge/edge_shim\":8,\"./firefox/firefox_shim\":10,\"./safari/safari_shim\":12,\"./utils\":13}],5:[function(require,module,exports){\n\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\nmodule.exports = {\n    shimGetUserMedia: require('./getusermedia'),\n    shimMediaStream: function(window) {\n        window.MediaStream = window.MediaStream || window.webkitMediaStream;\n    },\n\n    shimOnTrack: function(window) {\n        if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n            window.RTCPeerConnection.prototype)) {\n            Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                get: function() {\n                    return this._ontrack;\n                },\n                set: function(f) {\n                    if (this._ontrack) {\n                        this.removeEventListener('track', this._ontrack);\n                    }\n                    this.addEventListener('track', this._ontrack = f);\n                }\n            });\n            var origSetRemoteDescription =\n                window.RTCPeerConnection.prototype.setRemoteDescription;\n            window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n                var pc = this;\n                if (!pc._ontrackpoly) {\n                    pc._ontrackpoly = function(e) {\n                        // onaddstream does not fire when a track is added to an existing\n                        // stream. But stream.onaddtrack is implemented so we use that.\n                        e.stream.addEventListener('addtrack', function(te) {\n                            var receiver;\n                            if (window.RTCPeerConnection.prototype.getReceivers) {\n                                receiver = pc.getReceivers().find(function(r) {\n                                    return r.track && r.track.id === te.track.id;\n                                });\n                            } else {\n                                receiver = {track: te.track};\n                            }\n\n                            var event = new Event('track');\n                            event.track = te.track;\n                            event.receiver = receiver;\n                            event.transceiver = {receiver: receiver};\n                            event.streams = [e.stream];\n                            pc.dispatchEvent(event);\n                        });\n                        e.stream.getTracks().forEach(function(track) {\n                            var receiver;\n                            if (window.RTCPeerConnection.prototype.getReceivers) {\n                                receiver = pc.getReceivers().find(function(r) {\n                                    return r.track && r.track.id === track.id;\n                                });\n                            } else {\n                                receiver = {track: track};\n                            }\n                            var event = new Event('track');\n                            event.track = track;\n                            event.receiver = receiver;\n                            event.transceiver = {receiver: receiver};\n                            event.streams = [e.stream];\n                            pc.dispatchEvent(event);\n                        });\n                    };\n                    pc.addEventListener('addstream', pc._ontrackpoly);\n                }\n                return origSetRemoteDescription.apply(pc, arguments);\n            };\n        } else if (!('RTCRtpTransceiver' in window)) {\n            utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n                if (!e.transceiver) {\n                    e.transceiver = {receiver: e.receiver};\n                }\n                return e;\n            });\n        }\n    },\n\n    shimGetSendersWithDtmf: function(window) {\n        // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n        if (typeof window === 'object' && window.RTCPeerConnection &&\n            !('getSenders' in window.RTCPeerConnection.prototype) &&\n            'createDTMFSender' in window.RTCPeerConnection.prototype) {\n            var shimSenderWithDtmf = function(pc, track) {\n                return {\n                    track: track,\n                    get dtmf() {\n                        if (this._dtmf === undefined) {\n                            if (track.kind === 'audio') {\n                                this._dtmf = pc.createDTMFSender(track);\n                            } else {\n                                this._dtmf = null;\n                            }\n                        }\n                        return this._dtmf;\n                    },\n                    _pc: pc\n                };\n            };\n\n            // augment addTrack when getSenders is not available.\n            if (!window.RTCPeerConnection.prototype.getSenders) {\n                window.RTCPeerConnection.prototype.getSenders = function() {\n                    this._senders = this._senders || [];\n                    return this._senders.slice(); // return a copy of the internal state.\n                };\n                var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n                window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                    var pc = this;\n                    var sender = origAddTrack.apply(pc, arguments);\n                    if (!sender) {\n                        sender = shimSenderWithDtmf(pc, track);\n                        pc._senders.push(sender);\n                    }\n                    return sender;\n                };\n\n                var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n                window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n                    var pc = this;\n                    origRemoveTrack.apply(pc, arguments);\n                    var idx = pc._senders.indexOf(sender);\n                    if (idx !== -1) {\n                        pc._senders.splice(idx, 1);\n                    }\n                };\n            }\n            var origAddStream = window.RTCPeerConnection.prototype.addStream;\n            window.RTCPeerConnection.prototype.addStream = function(stream) {\n                var pc = this;\n                pc._senders = pc._senders || [];\n                origAddStream.apply(pc, [stream]);\n                stream.getTracks().forEach(function(track) {\n                    pc._senders.push(shimSenderWithDtmf(pc, track));\n                });\n            };\n\n            var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n            window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                var pc = this;\n                pc._senders = pc._senders || [];\n                origRemoveStream.apply(pc, [stream]);\n\n                stream.getTracks().forEach(function(track) {\n                    var sender = pc._senders.find(function(s) {\n                        return s.track === track;\n                    });\n                    if (sender) {\n                        pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n                    }\n                });\n            };\n        } else if (typeof window === 'object' && window.RTCPeerConnection &&\n            'getSenders' in window.RTCPeerConnection.prototype &&\n            'createDTMFSender' in window.RTCPeerConnection.prototype &&\n            window.RTCRtpSender &&\n            !('dtmf' in window.RTCRtpSender.prototype)) {\n            var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n            window.RTCPeerConnection.prototype.getSenders = function() {\n                var pc = this;\n                var senders = origGetSenders.apply(pc, []);\n                senders.forEach(function(sender) {\n                    sender._pc = pc;\n                });\n                return senders;\n            };\n\n            Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n                get: function() {\n                    if (this._dtmf === undefined) {\n                        if (this.track.kind === 'audio') {\n                            this._dtmf = this._pc.createDTMFSender(this.track);\n                        } else {\n                            this._dtmf = null;\n                        }\n                    }\n                    return this._dtmf;\n                }\n            });\n        }\n    },\n\n    shimSourceObject: function(window) {\n        var URL = window && window.URL;\n\n        if (typeof window === 'object') {\n            if (window.HTMLMediaElement &&\n                !('srcObject' in window.HTMLMediaElement.prototype)) {\n                // Shim the srcObject property, once, when HTMLMediaElement is found.\n                Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                    get: function() {\n                        return this._srcObject;\n                    },\n                    set: function(stream) {\n                        var self = this;\n                        // Use _srcObject as a private property for this shim\n                        this._srcObject = stream;\n                        if (this.src) {\n                            URL.revokeObjectURL(this.src);\n                        }\n\n                        if (!stream) {\n                            this.src = '';\n                            return undefined;\n                        }\n                        this.src = URL.createObjectURL(stream);\n                        // We need to recreate the blob url when a track is added or\n                        // removed. Doing it manually since we want to avoid a recursion.\n                        stream.addEventListener('addtrack', function() {\n                            if (self.src) {\n                                URL.revokeObjectURL(self.src);\n                            }\n                            self.src = URL.createObjectURL(stream);\n                        });\n                        stream.addEventListener('removetrack', function() {\n                            if (self.src) {\n                                URL.revokeObjectURL(self.src);\n                            }\n                            self.src = URL.createObjectURL(stream);\n                        });\n                    }\n                });\n            }\n        }\n    },\n\n    shimAddTrackRemoveTrackWithNative: function(window) {\n        // shim addTrack/removeTrack with native variants in order to make\n        // the interactions with legacy getLocalStreams behave as in other browsers.\n        // Keeps a mapping stream.id => [stream, rtpsenders...]\n        window.RTCPeerConnection.prototype.getLocalStreams = function() {\n            var pc = this;\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n            return Object.keys(this._shimmedLocalStreams).map(function(streamId) {\n                return pc._shimmedLocalStreams[streamId][0];\n            });\n        };\n\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n            if (!stream) {\n                return origAddTrack.apply(this, arguments);\n            }\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n            var sender = origAddTrack.apply(this, arguments);\n            if (!this._shimmedLocalStreams[stream.id]) {\n                this._shimmedLocalStreams[stream.id] = [stream, sender];\n            } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n                this._shimmedLocalStreams[stream.id].push(sender);\n            }\n            return sender;\n        };\n\n        var origAddStream = window.RTCPeerConnection.prototype.addStream;\n        window.RTCPeerConnection.prototype.addStream = function(stream) {\n            var pc = this;\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n            stream.getTracks().forEach(function(track) {\n                var alreadyExists = pc.getSenders().find(function(s) {\n                    return s.track === track;\n                });\n                if (alreadyExists) {\n                    throw new DOMException('Track already exists.',\n                        'InvalidAccessError');\n                }\n            });\n            var existingSenders = pc.getSenders();\n            origAddStream.apply(this, arguments);\n            var newSenders = pc.getSenders().filter(function(newSender) {\n                return existingSenders.indexOf(newSender) === -1;\n            });\n            this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n        };\n\n        var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n        window.RTCPeerConnection.prototype.removeStream = function(stream) {\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n            delete this._shimmedLocalStreams[stream.id];\n            return origRemoveStream.apply(this, arguments);\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n            var pc = this;\n            this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n            if (sender) {\n                Object.keys(this._shimmedLocalStreams).forEach(function(streamId) {\n                    var idx = pc._shimmedLocalStreams[streamId].indexOf(sender);\n                    if (idx !== -1) {\n                        pc._shimmedLocalStreams[streamId].splice(idx, 1);\n                    }\n                    if (pc._shimmedLocalStreams[streamId].length === 1) {\n                        delete pc._shimmedLocalStreams[streamId];\n                    }\n                });\n            }\n            return origRemoveTrack.apply(this, arguments);\n        };\n    },\n\n    shimAddTrackRemoveTrack: function(window) {\n        var browserDetails = utils.detectBrowser(window);\n        // shim addTrack and removeTrack.\n        if (window.RTCPeerConnection.prototype.addTrack &&\n            browserDetails.version >= 65) {\n            return this.shimAddTrackRemoveTrackWithNative(window);\n        }\n\n        // also shim pc.getLocalStreams when addTrack is shimmed\n        // to return the original streams.\n        var origGetLocalStreams = window.RTCPeerConnection.prototype\n            .getLocalStreams;\n        window.RTCPeerConnection.prototype.getLocalStreams = function() {\n            var pc = this;\n            var nativeStreams = origGetLocalStreams.apply(this);\n            pc._reverseStreams = pc._reverseStreams || {};\n            return nativeStreams.map(function(stream) {\n                return pc._reverseStreams[stream.id];\n            });\n        };\n\n        var origAddStream = window.RTCPeerConnection.prototype.addStream;\n        window.RTCPeerConnection.prototype.addStream = function(stream) {\n            var pc = this;\n            pc._streams = pc._streams || {};\n            pc._reverseStreams = pc._reverseStreams || {};\n\n            stream.getTracks().forEach(function(track) {\n                var alreadyExists = pc.getSenders().find(function(s) {\n                    return s.track === track;\n                });\n                if (alreadyExists) {\n                    throw new DOMException('Track already exists.',\n                        'InvalidAccessError');\n                }\n            });\n            // Add identity mapping for consistency with addTrack.\n            // Unless this is being used with a stream from addTrack.\n            if (!pc._reverseStreams[stream.id]) {\n                var newStream = new window.MediaStream(stream.getTracks());\n                pc._streams[stream.id] = newStream;\n                pc._reverseStreams[newStream.id] = stream;\n                stream = newStream;\n            }\n            origAddStream.apply(pc, [stream]);\n        };\n\n        var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n        window.RTCPeerConnection.prototype.removeStream = function(stream) {\n            var pc = this;\n            pc._streams = pc._streams || {};\n            pc._reverseStreams = pc._reverseStreams || {};\n\n            origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n            delete pc._reverseStreams[(pc._streams[stream.id] ?\n                pc._streams[stream.id].id : stream.id)];\n            delete pc._streams[stream.id];\n        };\n\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n            var pc = this;\n            if (pc.signalingState === 'closed') {\n                throw new DOMException(\n                    'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n                    'InvalidStateError');\n            }\n            var streams = [].slice.call(arguments, 1);\n            if (streams.length !== 1 ||\n                !streams[0].getTracks().find(function(t) {\n                    return t === track;\n                })) {\n                // this is not fully correct but all we can manage without\n                // [[associated MediaStreams]] internal slot.\n                throw new DOMException(\n                    'The adapter.js addTrack polyfill only supports a single ' +\n                    ' stream which is associated with the specified track.',\n                    'NotSupportedError');\n            }\n\n            var alreadyExists = pc.getSenders().find(function(s) {\n                return s.track === track;\n            });\n            if (alreadyExists) {\n                throw new DOMException('Track already exists.',\n                    'InvalidAccessError');\n            }\n\n            pc._streams = pc._streams || {};\n            pc._reverseStreams = pc._reverseStreams || {};\n            var oldStream = pc._streams[stream.id];\n            if (oldStream) {\n                // this is using odd Chrome behaviour, use with caution:\n                // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n                // Note: we rely on the high-level addTrack/dtmf shim to\n                // create the sender with a dtmf sender.\n                oldStream.addTrack(track);\n\n                // Trigger ONN async.\n                Promise.resolve().then(function() {\n                    pc.dispatchEvent(new Event('negotiationneeded'));\n                });\n            } else {\n                var newStream = new window.MediaStream([track]);\n                pc._streams[stream.id] = newStream;\n                pc._reverseStreams[newStream.id] = stream;\n                pc.addStream(newStream);\n            }\n            return pc.getSenders().find(function(s) {\n                return s.track === track;\n            });\n        };\n\n        // replace the internal stream id with the external one and\n        // vice versa.\n        function replaceInternalStreamId(pc, description) {\n            var sdp = description.sdp;\n            Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n                var externalStream = pc._reverseStreams[internalId];\n                var internalStream = pc._streams[externalStream.id];\n                sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n                    externalStream.id);\n            });\n            return new RTCSessionDescription({\n                type: description.type,\n                sdp: sdp\n            });\n        }\n        function replaceExternalStreamId(pc, description) {\n            var sdp = description.sdp;\n            Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n                var externalStream = pc._reverseStreams[internalId];\n                var internalStream = pc._streams[externalStream.id];\n                sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n                    internalStream.id);\n            });\n            return new RTCSessionDescription({\n                type: description.type,\n                sdp: sdp\n            });\n        }\n        ['createOffer', 'createAnswer'].forEach(function(method) {\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\n            window.RTCPeerConnection.prototype[method] = function() {\n                var pc = this;\n                var args = arguments;\n                var isLegacyCall = arguments.length &&\n                    typeof arguments[0] === 'function';\n                if (isLegacyCall) {\n                    return nativeMethod.apply(pc, [\n                        function(description) {\n                            var desc = replaceInternalStreamId(pc, description);\n                            args[0].apply(null, [desc]);\n                        },\n                        function(err) {\n                            if (args[1]) {\n                                args[1].apply(null, err);\n                            }\n                        }, arguments[2]\n                    ]);\n                }\n                return nativeMethod.apply(pc, arguments)\n                    .then(function(description) {\n                        return replaceInternalStreamId(pc, description);\n                    });\n            };\n        });\n\n        var origSetLocalDescription =\n            window.RTCPeerConnection.prototype.setLocalDescription;\n        window.RTCPeerConnection.prototype.setLocalDescription = function() {\n            var pc = this;\n            if (!arguments.length || !arguments[0].type) {\n                return origSetLocalDescription.apply(pc, arguments);\n            }\n            arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n            return origSetLocalDescription.apply(pc, arguments);\n        };\n\n        // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n        var origLocalDescription = Object.getOwnPropertyDescriptor(\n            window.RTCPeerConnection.prototype, 'localDescription');\n        Object.defineProperty(window.RTCPeerConnection.prototype,\n            'localDescription', {\n                get: function() {\n                    var pc = this;\n                    var description = origLocalDescription.get.apply(this);\n                    if (description.type === '') {\n                        return description;\n                    }\n                    return replaceInternalStreamId(pc, description);\n                }\n            });\n\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n            var pc = this;\n            if (pc.signalingState === 'closed') {\n                throw new DOMException(\n                    'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n                    'InvalidStateError');\n            }\n            // We can not yet check for sender instanceof RTCRtpSender\n            // since we shim RTPSender. So we check if sender._pc is set.\n            if (!sender._pc) {\n                throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n                    'does not implement interface RTCRtpSender.', 'TypeError');\n            }\n            var isLocal = sender._pc === pc;\n            if (!isLocal) {\n                throw new DOMException('Sender was not created by this connection.',\n                    'InvalidAccessError');\n            }\n\n            // Search for the native stream the senders track belongs to.\n            pc._streams = pc._streams || {};\n            var stream;\n            Object.keys(pc._streams).forEach(function(streamid) {\n                var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n                    return sender.track === track;\n                });\n                if (hasTrack) {\n                    stream = pc._streams[streamid];\n                }\n            });\n\n            if (stream) {\n                if (stream.getTracks().length === 1) {\n                    // if this is the last track of the stream, remove the stream. This\n                    // takes care of any shimmed _senders.\n                    pc.removeStream(pc._reverseStreams[stream.id]);\n                } else {\n                    // relying on the same odd chrome behaviour as above.\n                    stream.removeTrack(sender.track);\n                }\n                pc.dispatchEvent(new Event('negotiationneeded'));\n            }\n        };\n    },\n\n    shimPeerConnection: function(window) {\n        var browserDetails = utils.detectBrowser(window);\n\n        // The RTCPeerConnection object.\n        if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n            window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                // Translate iceTransportPolicy to iceTransports,\n                // see https://code.google.com/p/webrtc/issues/detail?id=4869\n                // this was fixed in M56 along with unprefixing RTCPeerConnection.\n                logging('PeerConnection');\n                if (pcConfig && pcConfig.iceTransportPolicy) {\n                    pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n                }\n\n                return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n            };\n            window.RTCPeerConnection.prototype =\n                window.webkitRTCPeerConnection.prototype;\n            // wrap static methods. Currently just generateCertificate.\n            if (window.webkitRTCPeerConnection.generateCertificate) {\n                Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                    get: function() {\n                        return window.webkitRTCPeerConnection.generateCertificate;\n                    }\n                });\n            }\n        } else {\n            // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n            var OrigPeerConnection = window.RTCPeerConnection;\n            window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                if (pcConfig && pcConfig.iceServers) {\n                    var newIceServers = [];\n                    for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                        var server = pcConfig.iceServers[i];\n                        if (!server.hasOwnProperty('urls') &&\n                            server.hasOwnProperty('url')) {\n                            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n                            server = JSON.parse(JSON.stringify(server));\n                            server.urls = server.url;\n                            newIceServers.push(server);\n                        } else {\n                            newIceServers.push(pcConfig.iceServers[i]);\n                        }\n                    }\n                    pcConfig.iceServers = newIceServers;\n                }\n                return new OrigPeerConnection(pcConfig, pcConstraints);\n            };\n            window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n            // wrap static methods. Currently just generateCertificate.\n            Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                get: function() {\n                    return OrigPeerConnection.generateCertificate;\n                }\n            });\n        }\n\n        var origGetStats = window.RTCPeerConnection.prototype.getStats;\n        window.RTCPeerConnection.prototype.getStats = function(selector,\n                                                               successCallback, errorCallback) {\n            var pc = this;\n            var args = arguments;\n\n            // If selector is a function then we are in the old style stats so just\n            // pass back the original getStats format to avoid breaking old users.\n            if (arguments.length > 0 && typeof selector === 'function') {\n                return origGetStats.apply(this, arguments);\n            }\n\n            // When spec-style getStats is supported, return those when called with\n            // either no arguments or the selector argument is null.\n            if (origGetStats.length === 0 && (arguments.length === 0 ||\n                typeof arguments[0] !== 'function')) {\n                return origGetStats.apply(this, []);\n            }\n\n            var fixChromeStats_ = function(response) {\n                var standardReport = {};\n                var reports = response.result();\n                reports.forEach(function(report) {\n                    var standardStats = {\n                        id: report.id,\n                        timestamp: report.timestamp,\n                        type: {\n                            localcandidate: 'local-candidate',\n                            remotecandidate: 'remote-candidate'\n                        }[report.type] || report.type\n                    };\n                    report.names().forEach(function(name) {\n                        standardStats[name] = report.stat(name);\n                    });\n                    standardReport[standardStats.id] = standardStats;\n                });\n\n                return standardReport;\n            };\n\n            // shim getStats with maplike support\n            var makeMapStats = function(stats) {\n                return new Map(Object.keys(stats).map(function(key) {\n                    return [key, stats[key]];\n                }));\n            };\n\n            if (arguments.length >= 2) {\n                var successCallbackWrapper_ = function(response) {\n                    args[1](makeMapStats(fixChromeStats_(response)));\n                };\n\n                return origGetStats.apply(this, [successCallbackWrapper_,\n                    arguments[0]]);\n            }\n\n            // promise-support\n            return new Promise(function(resolve, reject) {\n                origGetStats.apply(pc, [\n                    function(response) {\n                        resolve(makeMapStats(fixChromeStats_(response)));\n                    }, reject]);\n            }).then(successCallback, errorCallback);\n        };\n\n        // add promise support -- natively available in Chrome 51\n        if (browserDetails.version < 51) {\n            ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                .forEach(function(method) {\n                    var nativeMethod = window.RTCPeerConnection.prototype[method];\n                    window.RTCPeerConnection.prototype[method] = function() {\n                        var args = arguments;\n                        var pc = this;\n                        var promise = new Promise(function(resolve, reject) {\n                            nativeMethod.apply(pc, [args[0], resolve, reject]);\n                        });\n                        if (args.length < 2) {\n                            return promise;\n                        }\n                        return promise.then(function() {\n                                args[1].apply(null, []);\n                            },\n                            function(err) {\n                                if (args.length >= 3) {\n                                    args[2].apply(null, [err]);\n                                }\n                            });\n                    };\n                });\n        }\n\n        // promise support for createOffer and createAnswer. Available (without\n        // bugs) since M52: crbug/619289\n        if (browserDetails.version < 52) {\n            ['createOffer', 'createAnswer'].forEach(function(method) {\n                var nativeMethod = window.RTCPeerConnection.prototype[method];\n                window.RTCPeerConnection.prototype[method] = function() {\n                    var pc = this;\n                    if (arguments.length < 1 || (arguments.length === 1 &&\n                        typeof arguments[0] === 'object')) {\n                        var opts = arguments.length === 1 ? arguments[0] : undefined;\n                        return new Promise(function(resolve, reject) {\n                            nativeMethod.apply(pc, [resolve, reject, opts]);\n                        });\n                    }\n                    return nativeMethod.apply(this, arguments);\n                };\n            });\n        }\n\n        // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n        ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n            .forEach(function(method) {\n                var nativeMethod = window.RTCPeerConnection.prototype[method];\n                window.RTCPeerConnection.prototype[method] = function() {\n                    arguments[0] = new ((method === 'addIceCandidate') ?\n                        window.RTCIceCandidate :\n                        window.RTCSessionDescription)(arguments[0]);\n                    return nativeMethod.apply(this, arguments);\n                };\n            });\n\n        // support for addIceCandidate(null or undefined)\n        var nativeAddIceCandidate =\n            window.RTCPeerConnection.prototype.addIceCandidate;\n        window.RTCPeerConnection.prototype.addIceCandidate = function() {\n            if (!arguments[0]) {\n                if (arguments[1]) {\n                    arguments[1].apply(null);\n                }\n                return Promise.resolve();\n            }\n            return nativeAddIceCandidate.apply(this, arguments);\n        };\n    }\n};\n\n},{\"../utils.js\":13,\"./getusermedia\":6}],6:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n    var browserDetails = utils.detectBrowser(window);\n    var navigator = window && window.navigator;\n\n    var constraintsToChrome_ = function(c) {\n        if (typeof c !== 'object' || c.mandatory || c.optional) {\n            return c;\n        }\n        var cc = {};\n        Object.keys(c).forEach(function(key) {\n            if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                return;\n            }\n            var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n            if (r.exact !== undefined && typeof r.exact === 'number') {\n                r.min = r.max = r.exact;\n            }\n            var oldname_ = function(prefix, name) {\n                if (prefix) {\n                    return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n                }\n                return (name === 'deviceId') ? 'sourceId' : name;\n            };\n            if (r.ideal !== undefined) {\n                cc.optional = cc.optional || [];\n                var oc = {};\n                if (typeof r.ideal === 'number') {\n                    oc[oldname_('min', key)] = r.ideal;\n                    cc.optional.push(oc);\n                    oc = {};\n                    oc[oldname_('max', key)] = r.ideal;\n                    cc.optional.push(oc);\n                } else {\n                    oc[oldname_('', key)] = r.ideal;\n                    cc.optional.push(oc);\n                }\n            }\n            if (r.exact !== undefined && typeof r.exact !== 'number') {\n                cc.mandatory = cc.mandatory || {};\n                cc.mandatory[oldname_('', key)] = r.exact;\n            } else {\n                ['min', 'max'].forEach(function(mix) {\n                    if (r[mix] !== undefined) {\n                        cc.mandatory = cc.mandatory || {};\n                        cc.mandatory[oldname_(mix, key)] = r[mix];\n                    }\n                });\n            }\n        });\n        if (c.advanced) {\n            cc.optional = (cc.optional || []).concat(c.advanced);\n        }\n        return cc;\n    };\n\n    var shimConstraints_ = function(constraints, func) {\n        if (browserDetails.version >= 61) {\n            return func(constraints);\n        }\n        constraints = JSON.parse(JSON.stringify(constraints));\n        if (constraints && typeof constraints.audio === 'object') {\n            var remap = function(obj, a, b) {\n                if (a in obj && !(b in obj)) {\n                    obj[b] = obj[a];\n                    delete obj[a];\n                }\n            };\n            constraints = JSON.parse(JSON.stringify(constraints));\n            remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n            remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n            constraints.audio = constraintsToChrome_(constraints.audio);\n        }\n        if (constraints && typeof constraints.video === 'object') {\n            // Shim facingMode for mobile & surface pro.\n            var face = constraints.video.facingMode;\n            face = face && ((typeof face === 'object') ? face : {ideal: face});\n            var getSupportedFacingModeLies = browserDetails.version < 66;\n\n            if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                face.ideal === 'user' || face.ideal === 'environment')) &&\n                !(navigator.mediaDevices.getSupportedConstraints &&\n                    navigator.mediaDevices.getSupportedConstraints().facingMode &&\n                    !getSupportedFacingModeLies)) {\n                delete constraints.video.facingMode;\n                var matches;\n                if (face.exact === 'environment' || face.ideal === 'environment') {\n                    matches = ['back', 'rear'];\n                } else if (face.exact === 'user' || face.ideal === 'user') {\n                    matches = ['front'];\n                }\n                if (matches) {\n                    // Look for matches in label, or use last cam for back (typical).\n                    return navigator.mediaDevices.enumerateDevices()\n                        .then(function(devices) {\n                            devices = devices.filter(function(d) {\n                                return d.kind === 'videoinput';\n                            });\n                            var dev = devices.find(function(d) {\n                                return matches.some(function(match) {\n                                    return d.label.toLowerCase().indexOf(match) !== -1;\n                                });\n                            });\n                            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n                                dev = devices[devices.length - 1]; // more likely the back cam\n                            }\n                            if (dev) {\n                                constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                    {ideal: dev.deviceId};\n                            }\n                            constraints.video = constraintsToChrome_(constraints.video);\n                            logging('chrome: ' + JSON.stringify(constraints));\n                            return func(constraints);\n                        });\n                }\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n        }\n        logging('chrome: ' + JSON.stringify(constraints));\n        return func(constraints);\n    };\n\n    var shimError_ = function(e) {\n        return {\n            name: {\n                PermissionDeniedError: 'NotAllowedError',\n                PermissionDismissedError: 'NotAllowedError',\n                InvalidStateError: 'NotAllowedError',\n                DevicesNotFoundError: 'NotFoundError',\n                ConstraintNotSatisfiedError: 'OverconstrainedError',\n                TrackStartError: 'NotReadableError',\n                MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n                MediaDeviceKillSwitchOn: 'NotAllowedError',\n                TabCaptureError: 'AbortError',\n                ScreenCaptureError: 'AbortError',\n                DeviceCaptureError: 'AbortError'\n            }[e.name] || e.name,\n            message: e.message,\n            constraint: e.constraintName,\n            toString: function() {\n                return this.name + (this.message && ': ') + this.message;\n            }\n        };\n    };\n\n    var getUserMedia_ = function(constraints, onSuccess, onError) {\n        shimConstraints_(constraints, function(c) {\n            navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n                if (onError) {\n                    onError(shimError_(e));\n                }\n            });\n        });\n    };\n\n    navigator.getUserMedia = getUserMedia_;\n\n    // Returns the result of getUserMedia as a Promise.\n    var getUserMediaPromise_ = function(constraints) {\n        return new Promise(function(resolve, reject) {\n            navigator.getUserMedia(constraints, resolve, reject);\n        });\n    };\n\n    if (!navigator.mediaDevices) {\n        navigator.mediaDevices = {\n            getUserMedia: getUserMediaPromise_,\n            enumerateDevices: function() {\n                return new Promise(function(resolve) {\n                    var kinds = {audio: 'audioinput', video: 'videoinput'};\n                    return window.MediaStreamTrack.getSources(function(devices) {\n                        resolve(devices.map(function(device) {\n                            return {label: device.label,\n                                kind: kinds[device.kind],\n                                deviceId: device.id,\n                                groupId: ''};\n                        }));\n                    });\n                });\n            },\n            getSupportedConstraints: function() {\n                return {\n                    deviceId: true, echoCancellation: true, facingMode: true,\n                    frameRate: true, height: true, width: true\n                };\n            }\n        };\n    }\n\n    // A shim for getUserMedia method on the mediaDevices object.\n    // TODO(KaptenJansson) remove once implemented in Chrome stable.\n    if (!navigator.mediaDevices.getUserMedia) {\n        navigator.mediaDevices.getUserMedia = function(constraints) {\n            return getUserMediaPromise_(constraints);\n        };\n    } else {\n        // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n        // function which returns a Promise, it does not accept spec-style\n        // constraints.\n        var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n        navigator.mediaDevices.getUserMedia = function(cs) {\n            return shimConstraints_(cs, function(c) {\n                return origGetUserMedia(c).then(function(stream) {\n                    if (c.audio && !stream.getAudioTracks().length ||\n                        c.video && !stream.getVideoTracks().length) {\n                        stream.getTracks().forEach(function(track) {\n                            track.stop();\n                        });\n                        throw new DOMException('', 'NotFoundError');\n                    }\n                    return stream;\n                }, function(e) {\n                    return Promise.reject(shimError_(e));\n                });\n            });\n        };\n    }\n\n    // Dummy devicechange event methods.\n    // TODO(KaptenJansson) remove once implemented in Chrome stable.\n    if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n        navigator.mediaDevices.addEventListener = function() {\n            logging('Dummy mediaDevices.addEventListener called.');\n        };\n    }\n    if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n        navigator.mediaDevices.removeEventListener = function() {\n            logging('Dummy mediaDevices.removeEventListener called.');\n        };\n    }\n};\n\n},{\"../utils.js\":13}],7:[function(require,module,exports){\n/*\n*  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\nvar utils = require('./utils');\n\nmodule.exports = {\n    shimRTCIceCandidate: function(window) {\n        // foundation is arbitrarily chosen as an indicator for full support for\n        // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n        if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n            window.RTCIceCandidate.prototype)) {\n            return;\n        }\n\n        var NativeRTCIceCandidate = window.RTCIceCandidate;\n        window.RTCIceCandidate = function(args) {\n            // Remove the a= which shouldn't be part of the candidate string.\n            if (typeof args === 'object' && args.candidate &&\n                args.candidate.indexOf('a=') === 0) {\n                args = JSON.parse(JSON.stringify(args));\n                args.candidate = args.candidate.substr(2);\n            }\n\n            if (args.candidate && args.candidate.length) {\n                // Augment the native candidate with the parsed fields.\n                var nativeCandidate = new NativeRTCIceCandidate(args);\n                var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n                var augmentedCandidate = Object.assign(nativeCandidate,\n                    parsedCandidate);\n\n                // Add a serializer that does not serialize the extra attributes.\n                augmentedCandidate.toJSON = function() {\n                    return {\n                        candidate: augmentedCandidate.candidate,\n                        sdpMid: augmentedCandidate.sdpMid,\n                        sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n                        usernameFragment: augmentedCandidate.usernameFragment,\n                    };\n                };\n                return augmentedCandidate;\n            }\n            return new NativeRTCIceCandidate(args);\n        };\n        window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n        // Hook up the augmented candidate in onicecandidate and\n        // addEventListener('icecandidate', ...)\n        utils.wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\n            if (e.candidate) {\n                Object.defineProperty(e, 'candidate', {\n                    value: new window.RTCIceCandidate(e.candidate),\n                    writable: 'false'\n                });\n            }\n            return e;\n        });\n    },\n\n    // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n    shimCreateObjectURL: function(window) {\n        var URL = window && window.URL;\n\n        if (!(typeof window === 'object' && window.HTMLMediaElement &&\n            'srcObject' in window.HTMLMediaElement.prototype &&\n            URL.createObjectURL && URL.revokeObjectURL)) {\n            // Only shim CreateObjectURL using srcObject if srcObject exists.\n            return undefined;\n        }\n\n        var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n        var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n        var streams = new Map(), newId = 0;\n\n        URL.createObjectURL = function(stream) {\n            if ('getTracks' in stream) {\n                var url = 'polyblob:' + (++newId);\n                streams.set(url, stream);\n                utils.deprecated('URL.createObjectURL(stream)',\n                    'elem.srcObject = stream');\n                return url;\n            }\n            return nativeCreateObjectURL(stream);\n        };\n        URL.revokeObjectURL = function(url) {\n            nativeRevokeObjectURL(url);\n            streams.delete(url);\n        };\n\n        var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n            'src');\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n            get: function() {\n                return dsc.get.apply(this);\n            },\n            set: function(url) {\n                this.srcObject = streams.get(url) || null;\n                return dsc.set.apply(this, [url]);\n            }\n        });\n\n        var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n        window.HTMLMediaElement.prototype.setAttribute = function() {\n            if (arguments.length === 2 &&\n                ('' + arguments[0]).toLowerCase() === 'src') {\n                this.srcObject = streams.get(arguments[1]) || null;\n            }\n            return nativeSetAttribute.apply(this, arguments);\n        };\n    },\n\n    shimMaxMessageSize: function(window) {\n        if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n            return;\n        }\n        var browserDetails = utils.detectBrowser(window);\n\n        if (!('sctp' in window.RTCPeerConnection.prototype)) {\n            Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n                get: function() {\n                    return typeof this._sctp === 'undefined' ? null : this._sctp;\n                }\n            });\n        }\n\n        var sctpInDescription = function(description) {\n            var sections = SDPUtils.splitSections(description.sdp);\n            sections.shift();\n            return sections.some(function(mediaSection) {\n                var mLine = SDPUtils.parseMLine(mediaSection);\n                return mLine && mLine.kind === 'application'\n                    && mLine.protocol.indexOf('SCTP') !== -1;\n            });\n        };\n\n        var getRemoteFirefoxVersion = function(description) {\n            // TODO: Is there a better solution for detecting Firefox?\n            var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n            if (match === null || match.length < 2) {\n                return -1;\n            }\n            var version = parseInt(match[1], 10);\n            // Test for NaN (yes, this is ugly)\n            return version !== version ? -1 : version;\n        };\n\n        var getCanSendMaxMessageSize = function(remoteIsFirefox) {\n            // Every implementation we know can send at least 64 KiB.\n            // Note: Although Chrome is technically able to send up to 256 KiB, the\n            //       data does not reach the other peer reliably.\n            //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n            var canSendMaxMessageSize = 65536;\n            if (browserDetails.browser === 'firefox') {\n                if (browserDetails.version < 57) {\n                    if (remoteIsFirefox === -1) {\n                        // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n                        // fragmentation.\n                        canSendMaxMessageSize = 16384;\n                    } else {\n                        // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n                        // messages. Thus, supporting ~2 GiB when sending.\n                        canSendMaxMessageSize = 2147483637;\n                    }\n                } else {\n                    // Currently, all FF >= 57 will reset the remote maximum message size\n                    // to the default value when a data channel is created at a later\n                    // stage. :(\n                    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n                    canSendMaxMessageSize =\n                        browserDetails.version === 57 ? 65535 : 65536;\n                }\n            }\n            return canSendMaxMessageSize;\n        };\n\n        var getMaxMessageSize = function(description, remoteIsFirefox) {\n            // Note: 65536 bytes is the default value from the SDP spec. Also,\n            //       every implementation we know supports receiving 65536 bytes.\n            var maxMessageSize = 65536;\n\n            // FF 57 has a slightly incorrect default remote max message size, so\n            // we need to adjust it here to avoid a failure when sending.\n            // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n            if (browserDetails.browser === 'firefox'\n                && browserDetails.version === 57) {\n                maxMessageSize = 65535;\n            }\n\n            var match = SDPUtils.matchPrefix(description.sdp, 'a=max-message-size:');\n            if (match.length > 0) {\n                maxMessageSize = parseInt(match[0].substr(19), 10);\n            } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n                // If the maximum message size is not present in the remote SDP and\n                // both local and remote are Firefox, the remote peer can receive\n                // ~2 GiB.\n                maxMessageSize = 2147483637;\n            }\n            return maxMessageSize;\n        };\n\n        var origSetRemoteDescription =\n            window.RTCPeerConnection.prototype.setRemoteDescription;\n        window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n            var pc = this;\n            pc._sctp = null;\n\n            if (sctpInDescription(arguments[0])) {\n                // Check if the remote is FF.\n                var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n                // Get the maximum message size the local peer is capable of sending\n                var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n                // Get the maximum message size of the remote peer.\n                var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n                // Determine final maximum message size\n                var maxMessageSize;\n                if (canSendMMS === 0 && remoteMMS === 0) {\n                    maxMessageSize = Number.POSITIVE_INFINITY;\n                } else if (canSendMMS === 0 || remoteMMS === 0) {\n                    maxMessageSize = Math.max(canSendMMS, remoteMMS);\n                } else {\n                    maxMessageSize = Math.min(canSendMMS, remoteMMS);\n                }\n\n                // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n                // attribute.\n                var sctp = {};\n                Object.defineProperty(sctp, 'maxMessageSize', {\n                    get: function() {\n                        return maxMessageSize;\n                    }\n                });\n                pc._sctp = sctp;\n            }\n\n            return origSetRemoteDescription.apply(pc, arguments);\n        };\n    },\n\n    shimSendThrowTypeError: function(window) {\n        if (!(window.RTCPeerConnection &&\n            'createDataChannel' in window.RTCPeerConnection.prototype)) {\n            return;\n        }\n\n        // Note: Although Firefox >= 57 has a native implementation, the maximum\n        //       message size can be reset for all data channels at a later stage.\n        //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n        var origCreateDataChannel =\n            window.RTCPeerConnection.prototype.createDataChannel;\n        window.RTCPeerConnection.prototype.createDataChannel = function() {\n            var pc = this;\n            var dataChannel = origCreateDataChannel.apply(pc, arguments);\n            var origDataChannelSend = dataChannel.send;\n\n            // Patch 'send' method\n            dataChannel.send = function() {\n                var dc = this;\n                var data = arguments[0];\n                var length = data.length || data.size || data.byteLength;\n                if (length > pc.sctp.maxMessageSize) {\n                    throw new DOMException('Message too large (can send a maximum of ' +\n                        pc.sctp.maxMessageSize + ' bytes)', 'TypeError');\n                }\n                return origDataChannelSend.apply(dc, arguments);\n            };\n\n            return dataChannel;\n        };\n    }\n};\n\n},{\"./utils\":13,\"sdp\":2}],8:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar shimRTCPeerConnection = require('rtcpeerconnection-shim');\n\nmodule.exports = {\n    shimGetUserMedia: require('./getusermedia'),\n    shimPeerConnection: function(window) {\n        var browserDetails = utils.detectBrowser(window);\n\n        if (window.RTCIceGatherer) {\n            if (!window.RTCIceCandidate) {\n                window.RTCIceCandidate = function(args) {\n                    return args;\n                };\n            }\n            if (!window.RTCSessionDescription) {\n                window.RTCSessionDescription = function(args) {\n                    return args;\n                };\n            }\n            // this adds an additional event listener to MediaStrackTrack that signals\n            // when a tracks enabled property was changed. Workaround for a bug in\n            // addStream, see below. No longer required in 15025+\n            if (browserDetails.version < 15025) {\n                var origMSTEnabled = Object.getOwnPropertyDescriptor(\n                    window.MediaStreamTrack.prototype, 'enabled');\n                Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n                    set: function(value) {\n                        origMSTEnabled.set.call(this, value);\n                        var ev = new Event('enabled');\n                        ev.enabled = value;\n                        this.dispatchEvent(ev);\n                    }\n                });\n            }\n        }\n\n        // ORTC defines the DTMF sender a bit different.\n        // https://github.com/w3c/ortc/issues/714\n        if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n            Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n                get: function() {\n                    if (this._dtmf === undefined) {\n                        if (this.track.kind === 'audio') {\n                            this._dtmf = new window.RTCDtmfSender(this);\n                        } else if (this.track.kind === 'video') {\n                            this._dtmf = null;\n                        }\n                    }\n                    return this._dtmf;\n                }\n            });\n        }\n        // Edge currently only implements the RTCDtmfSender, not the\n        // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n        if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n            window.RTCDTMFSender = window.RTCDtmfSender;\n        }\n\n        window.RTCPeerConnection =\n            shimRTCPeerConnection(window, browserDetails.version);\n    },\n    shimReplaceTrack: function(window) {\n        // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n        if (window.RTCRtpSender &&\n            !('replaceTrack' in window.RTCRtpSender.prototype)) {\n            window.RTCRtpSender.prototype.replaceTrack =\n                window.RTCRtpSender.prototype.setTrack;\n        }\n    }\n};\n\n},{\"../utils\":13,\"./getusermedia\":9,\"rtcpeerconnection-shim\":1}],9:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function(window) {\n    var navigator = window && window.navigator;\n\n    var shimError_ = function(e) {\n        return {\n            name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n            message: e.message,\n            constraint: e.constraint,\n            toString: function() {\n                return this.name;\n            }\n        };\n    };\n\n    // getUserMedia error shim.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n    bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n        return origGetUserMedia(c).catch(function(e) {\n            return Promise.reject(shimError_(e));\n        });\n    };\n};\n\n},{}],10:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = {\n    shimGetUserMedia: require('./getusermedia'),\n    shimOnTrack: function(window) {\n        if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n            window.RTCPeerConnection.prototype)) {\n            Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                get: function() {\n                    return this._ontrack;\n                },\n                set: function(f) {\n                    if (this._ontrack) {\n                        this.removeEventListener('track', this._ontrack);\n                        this.removeEventListener('addstream', this._ontrackpoly);\n                    }\n                    this.addEventListener('track', this._ontrack = f);\n                    this.addEventListener('addstream', this._ontrackpoly = function(e) {\n                        e.stream.getTracks().forEach(function(track) {\n                            var event = new Event('track');\n                            event.track = track;\n                            event.receiver = {track: track};\n                            event.transceiver = {receiver: event.receiver};\n                            event.streams = [e.stream];\n                            this.dispatchEvent(event);\n                        }.bind(this));\n                    }.bind(this));\n                }\n            });\n        }\n        if (typeof window === 'object' && window.RTCTrackEvent &&\n            ('receiver' in window.RTCTrackEvent.prototype) &&\n            !('transceiver' in window.RTCTrackEvent.prototype)) {\n            Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n                get: function() {\n                    return {receiver: this.receiver};\n                }\n            });\n        }\n    },\n\n    shimSourceObject: function(window) {\n        // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n        if (typeof window === 'object') {\n            if (window.HTMLMediaElement &&\n                !('srcObject' in window.HTMLMediaElement.prototype)) {\n                // Shim the srcObject property, once, when HTMLMediaElement is found.\n                Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                    get: function() {\n                        return this.mozSrcObject;\n                    },\n                    set: function(stream) {\n                        this.mozSrcObject = stream;\n                    }\n                });\n            }\n        }\n    },\n\n    shimPeerConnection: function(window) {\n        var browserDetails = utils.detectBrowser(window);\n\n        if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n            window.mozRTCPeerConnection)) {\n            return; // probably media.peerconnection.enabled=false in about:config\n        }\n        // The RTCPeerConnection object.\n        if (!window.RTCPeerConnection) {\n            window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                if (browserDetails.version < 38) {\n                    // .urls is not supported in FF < 38.\n                    // create RTCIceServers with a single url.\n                    if (pcConfig && pcConfig.iceServers) {\n                        var newIceServers = [];\n                        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                            var server = pcConfig.iceServers[i];\n                            if (server.hasOwnProperty('urls')) {\n                                for (var j = 0; j < server.urls.length; j++) {\n                                    var newServer = {\n                                        url: server.urls[j]\n                                    };\n                                    if (server.urls[j].indexOf('turn') === 0) {\n                                        newServer.username = server.username;\n                                        newServer.credential = server.credential;\n                                    }\n                                    newIceServers.push(newServer);\n                                }\n                            } else {\n                                newIceServers.push(pcConfig.iceServers[i]);\n                            }\n                        }\n                        pcConfig.iceServers = newIceServers;\n                    }\n                }\n                return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n            };\n            window.RTCPeerConnection.prototype =\n                window.mozRTCPeerConnection.prototype;\n\n            // wrap static methods. Currently just generateCertificate.\n            if (window.mozRTCPeerConnection.generateCertificate) {\n                Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                    get: function() {\n                        return window.mozRTCPeerConnection.generateCertificate;\n                    }\n                });\n            }\n\n            window.RTCSessionDescription = window.mozRTCSessionDescription;\n            window.RTCIceCandidate = window.mozRTCIceCandidate;\n        }\n\n        // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n        ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n            .forEach(function(method) {\n                var nativeMethod = window.RTCPeerConnection.prototype[method];\n                window.RTCPeerConnection.prototype[method] = function() {\n                    arguments[0] = new ((method === 'addIceCandidate') ?\n                        window.RTCIceCandidate :\n                        window.RTCSessionDescription)(arguments[0]);\n                    return nativeMethod.apply(this, arguments);\n                };\n            });\n\n        // support for addIceCandidate(null or undefined)\n        var nativeAddIceCandidate =\n            window.RTCPeerConnection.prototype.addIceCandidate;\n        window.RTCPeerConnection.prototype.addIceCandidate = function() {\n            if (!arguments[0]) {\n                if (arguments[1]) {\n                    arguments[1].apply(null);\n                }\n                return Promise.resolve();\n            }\n            return nativeAddIceCandidate.apply(this, arguments);\n        };\n\n        // shim getStats with maplike support\n        var makeMapStats = function(stats) {\n            var map = new Map();\n            Object.keys(stats).forEach(function(key) {\n                map.set(key, stats[key]);\n                map[key] = stats[key];\n            });\n            return map;\n        };\n\n        var modernStatsTypes = {\n            inboundrtp: 'inbound-rtp',\n            outboundrtp: 'outbound-rtp',\n            candidatepair: 'candidate-pair',\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n        };\n\n        var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n        window.RTCPeerConnection.prototype.getStats = function(\n            selector,\n            onSucc,\n            onErr\n        ) {\n            return nativeGetStats.apply(this, [selector || null])\n                .then(function(stats) {\n                    if (browserDetails.version < 48) {\n                        stats = makeMapStats(stats);\n                    }\n                    if (browserDetails.version < 53 && !onSucc) {\n                        // Shim only promise getStats with spec-hyphens in type names\n                        // Leave callback version alone; misc old uses of forEach before Map\n                        try {\n                            stats.forEach(function(stat) {\n                                stat.type = modernStatsTypes[stat.type] || stat.type;\n                            });\n                        } catch (e) {\n                            if (e.name !== 'TypeError') {\n                                throw e;\n                            }\n                            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n                            stats.forEach(function(stat, i) {\n                                stats.set(i, Object.assign({}, stat, {\n                                    type: modernStatsTypes[stat.type] || stat.type\n                                }));\n                            });\n                        }\n                    }\n                    return stats;\n                })\n                .then(onSucc, onErr);\n        };\n    },\n\n    shimRemoveStream: function(window) {\n        if (!window.RTCPeerConnection ||\n            'removeStream' in window.RTCPeerConnection.prototype) {\n            return;\n        }\n        window.RTCPeerConnection.prototype.removeStream = function(stream) {\n            var pc = this;\n            utils.deprecated('removeStream', 'removeTrack');\n            this.getSenders().forEach(function(sender) {\n                if (sender.track && stream.getTracks().indexOf(sender.track) !== -1) {\n                    pc.removeTrack(sender);\n                }\n            });\n        };\n    }\n};\n\n},{\"../utils\":13,\"./getusermedia\":11}],11:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n    var browserDetails = utils.detectBrowser(window);\n    var navigator = window && window.navigator;\n    var MediaStreamTrack = window && window.MediaStreamTrack;\n\n    var shimError_ = function(e) {\n        return {\n            name: {\n                InternalError: 'NotReadableError',\n                NotSupportedError: 'TypeError',\n                PermissionDeniedError: 'NotAllowedError',\n                SecurityError: 'NotAllowedError'\n            }[e.name] || e.name,\n            message: {\n                'The operation is insecure.': 'The request is not allowed by the ' +\n                'user agent or the platform in the current context.'\n            }[e.message] || e.message,\n            constraint: e.constraint,\n            toString: function() {\n                return this.name + (this.message && ': ') + this.message;\n            }\n        };\n    };\n\n    // getUserMedia constraints shim.\n    var getUserMedia_ = function(constraints, onSuccess, onError) {\n        var constraintsToFF37_ = function(c) {\n            if (typeof c !== 'object' || c.require) {\n                return c;\n            }\n            var require = [];\n            Object.keys(c).forEach(function(key) {\n                if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                    return;\n                }\n                var r = c[key] = (typeof c[key] === 'object') ?\n                    c[key] : {ideal: c[key]};\n                if (r.min !== undefined ||\n                    r.max !== undefined || r.exact !== undefined) {\n                    require.push(key);\n                }\n                if (r.exact !== undefined) {\n                    if (typeof r.exact === 'number') {\n                        r. min = r.max = r.exact;\n                    } else {\n                        c[key] = r.exact;\n                    }\n                    delete r.exact;\n                }\n                if (r.ideal !== undefined) {\n                    c.advanced = c.advanced || [];\n                    var oc = {};\n                    if (typeof r.ideal === 'number') {\n                        oc[key] = {min: r.ideal, max: r.ideal};\n                    } else {\n                        oc[key] = r.ideal;\n                    }\n                    c.advanced.push(oc);\n                    delete r.ideal;\n                    if (!Object.keys(r).length) {\n                        delete c[key];\n                    }\n                }\n            });\n            if (require.length) {\n                c.require = require;\n            }\n            return c;\n        };\n        constraints = JSON.parse(JSON.stringify(constraints));\n        if (browserDetails.version < 38) {\n            logging('spec: ' + JSON.stringify(constraints));\n            if (constraints.audio) {\n                constraints.audio = constraintsToFF37_(constraints.audio);\n            }\n            if (constraints.video) {\n                constraints.video = constraintsToFF37_(constraints.video);\n            }\n            logging('ff37: ' + JSON.stringify(constraints));\n        }\n        return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n            onError(shimError_(e));\n        });\n    };\n\n    // Returns the result of getUserMedia as a Promise.\n    var getUserMediaPromise_ = function(constraints) {\n        return new Promise(function(resolve, reject) {\n            getUserMedia_(constraints, resolve, reject);\n        });\n    };\n\n    // Shim for mediaDevices on older versions.\n    if (!navigator.mediaDevices) {\n        navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n            addEventListener: function() { },\n            removeEventListener: function() { }\n        };\n    }\n    navigator.mediaDevices.enumerateDevices =\n        navigator.mediaDevices.enumerateDevices || function() {\n            return new Promise(function(resolve) {\n                var infos = [\n                    {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n                    {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n                ];\n                resolve(infos);\n            });\n        };\n\n    if (browserDetails.version < 41) {\n        // Work around http://bugzil.la/1169665\n        var orgEnumerateDevices =\n            navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n        navigator.mediaDevices.enumerateDevices = function() {\n            return orgEnumerateDevices().then(undefined, function(e) {\n                if (e.name === 'NotFoundError') {\n                    return [];\n                }\n                throw e;\n            });\n        };\n    }\n    if (browserDetails.version < 49) {\n        var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n        navigator.mediaDevices.getUserMedia = function(c) {\n            return origGetUserMedia(c).then(function(stream) {\n                // Work around https://bugzil.la/802326\n                if (c.audio && !stream.getAudioTracks().length ||\n                    c.video && !stream.getVideoTracks().length) {\n                    stream.getTracks().forEach(function(track) {\n                        track.stop();\n                    });\n                    throw new DOMException('The object can not be found here.',\n                        'NotFoundError');\n                }\n                return stream;\n            }, function(e) {\n                return Promise.reject(shimError_(e));\n            });\n        };\n    }\n    if (!(browserDetails.version > 55 &&\n        'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n        var remap = function(obj, a, b) {\n            if (a in obj && !(b in obj)) {\n                obj[b] = obj[a];\n                delete obj[a];\n            }\n        };\n\n        var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n        navigator.mediaDevices.getUserMedia = function(c) {\n            if (typeof c === 'object' && typeof c.audio === 'object') {\n                c = JSON.parse(JSON.stringify(c));\n                remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n                remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n            }\n            return nativeGetUserMedia(c);\n        };\n\n        if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n            var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n            MediaStreamTrack.prototype.getSettings = function() {\n                var obj = nativeGetSettings.apply(this, arguments);\n                remap(obj, 'mozAutoGainControl', 'autoGainControl');\n                remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n                return obj;\n            };\n        }\n\n        if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n            var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n            MediaStreamTrack.prototype.applyConstraints = function(c) {\n                if (this.kind === 'audio' && typeof c === 'object') {\n                    c = JSON.parse(JSON.stringify(c));\n                    remap(c, 'autoGainControl', 'mozAutoGainControl');\n                    remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n                }\n                return nativeApplyConstraints.apply(this, [c]);\n            };\n        }\n    }\n    navigator.getUserMedia = function(constraints, onSuccess, onError) {\n        if (browserDetails.version < 44) {\n            return getUserMedia_(constraints, onSuccess, onError);\n        }\n        // Replace Firefox 44+'s deprecation warning with unprefixed version.\n        utils.deprecated('navigator.getUserMedia',\n            'navigator.mediaDevices.getUserMedia');\n        navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n    };\n};\n\n},{\"../utils\":13}],12:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n'use strict';\nvar utils = require('../utils');\n\nmodule.exports = {\n    shimLocalStreamsAPI: function(window) {\n        if (typeof window !== 'object' || !window.RTCPeerConnection) {\n            return;\n        }\n        if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n            window.RTCPeerConnection.prototype.getLocalStreams = function() {\n                if (!this._localStreams) {\n                    this._localStreams = [];\n                }\n                return this._localStreams;\n            };\n        }\n        if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n            window.RTCPeerConnection.prototype.getStreamById = function(id) {\n                var result = null;\n                if (this._localStreams) {\n                    this._localStreams.forEach(function(stream) {\n                        if (stream.id === id) {\n                            result = stream;\n                        }\n                    });\n                }\n                if (this._remoteStreams) {\n                    this._remoteStreams.forEach(function(stream) {\n                        if (stream.id === id) {\n                            result = stream;\n                        }\n                    });\n                }\n                return result;\n            };\n        }\n        if (!('addStream' in window.RTCPeerConnection.prototype)) {\n            var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n            window.RTCPeerConnection.prototype.addStream = function(stream) {\n                if (!this._localStreams) {\n                    this._localStreams = [];\n                }\n                if (this._localStreams.indexOf(stream) === -1) {\n                    this._localStreams.push(stream);\n                }\n                var pc = this;\n                stream.getTracks().forEach(function(track) {\n                    _addTrack.call(pc, track, stream);\n                });\n            };\n\n            window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                if (stream) {\n                    if (!this._localStreams) {\n                        this._localStreams = [stream];\n                    } else if (this._localStreams.indexOf(stream) === -1) {\n                        this._localStreams.push(stream);\n                    }\n                }\n                return _addTrack.call(this, track, stream);\n            };\n        }\n        if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n            window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                if (!this._localStreams) {\n                    this._localStreams = [];\n                }\n                var index = this._localStreams.indexOf(stream);\n                if (index === -1) {\n                    return;\n                }\n                this._localStreams.splice(index, 1);\n                var pc = this;\n                var tracks = stream.getTracks();\n                this.getSenders().forEach(function(sender) {\n                    if (tracks.indexOf(sender.track) !== -1) {\n                        pc.removeTrack(sender);\n                    }\n                });\n            };\n        }\n    },\n    shimRemoteStreamsAPI: function(window) {\n        if (typeof window !== 'object' || !window.RTCPeerConnection) {\n            return;\n        }\n        if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n            window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n                return this._remoteStreams ? this._remoteStreams : [];\n            };\n        }\n        if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n            Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n                get: function() {\n                    return this._onaddstream;\n                },\n                set: function(f) {\n                    var pc = this;\n                    if (this._onaddstream) {\n                        this.removeEventListener('addstream', this._onaddstream);\n                        this.removeEventListener('track', this._onaddstreampoly);\n                    }\n                    this.addEventListener('addstream', this._onaddstream = f);\n                    this.addEventListener('track', this._onaddstreampoly = function(e) {\n                        e.streams.forEach(function(stream) {\n                            if (!pc._remoteStreams) {\n                                pc._remoteStreams = [];\n                            }\n                            if (pc._remoteStreams.indexOf(stream) >= 0) {\n                                return;\n                            }\n                            pc._remoteStreams.push(stream);\n                            var event = new Event('addstream');\n                            event.stream = stream;\n                            pc.dispatchEvent(event);\n                        });\n                    });\n                }\n            });\n        }\n    },\n    shimCallbacksAPI: function(window) {\n        if (typeof window !== 'object' || !window.RTCPeerConnection) {\n            return;\n        }\n        var prototype = window.RTCPeerConnection.prototype;\n        var createOffer = prototype.createOffer;\n        var createAnswer = prototype.createAnswer;\n        var setLocalDescription = prototype.setLocalDescription;\n        var setRemoteDescription = prototype.setRemoteDescription;\n        var addIceCandidate = prototype.addIceCandidate;\n\n        prototype.createOffer = function(successCallback, failureCallback) {\n            var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n            var promise = createOffer.apply(this, [options]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n\n        prototype.createAnswer = function(successCallback, failureCallback) {\n            var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n            var promise = createAnswer.apply(this, [options]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n\n        var withCallback = function(description, successCallback, failureCallback) {\n            var promise = setLocalDescription.apply(this, [description]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n        prototype.setLocalDescription = withCallback;\n\n        withCallback = function(description, successCallback, failureCallback) {\n            var promise = setRemoteDescription.apply(this, [description]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n        prototype.setRemoteDescription = withCallback;\n\n        withCallback = function(candidate, successCallback, failureCallback) {\n            var promise = addIceCandidate.apply(this, [candidate]);\n            if (!failureCallback) {\n                return promise;\n            }\n            promise.then(successCallback, failureCallback);\n            return Promise.resolve();\n        };\n        prototype.addIceCandidate = withCallback;\n    },\n    shimGetUserMedia: function(window) {\n        var navigator = window && window.navigator;\n\n        if (!navigator.getUserMedia) {\n            if (navigator.webkitGetUserMedia) {\n                navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n            } else if (navigator.mediaDevices &&\n                navigator.mediaDevices.getUserMedia) {\n                navigator.getUserMedia = function(constraints, cb, errcb) {\n                    navigator.mediaDevices.getUserMedia(constraints)\n                        .then(cb, errcb);\n                }.bind(navigator);\n            }\n        }\n    },\n    shimRTCIceServerUrls: function(window) {\n        // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n        var OrigPeerConnection = window.RTCPeerConnection;\n        window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n            if (pcConfig && pcConfig.iceServers) {\n                var newIceServers = [];\n                for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                    var server = pcConfig.iceServers[i];\n                    if (!server.hasOwnProperty('urls') &&\n                        server.hasOwnProperty('url')) {\n                        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n                        server = JSON.parse(JSON.stringify(server));\n                        server.urls = server.url;\n                        delete server.url;\n                        newIceServers.push(server);\n                    } else {\n                        newIceServers.push(pcConfig.iceServers[i]);\n                    }\n                }\n                pcConfig.iceServers = newIceServers;\n            }\n            return new OrigPeerConnection(pcConfig, pcConstraints);\n        };\n        window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n        // wrap static methods. Currently just generateCertificate.\n        if ('generateCertificate' in window.RTCPeerConnection) {\n            Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                get: function() {\n                    return OrigPeerConnection.generateCertificate;\n                }\n            });\n        }\n    },\n    shimTrackEventTransceiver: function(window) {\n        // Add event.transceiver member over deprecated event.receiver\n        if (typeof window === 'object' && window.RTCPeerConnection &&\n            ('receiver' in window.RTCTrackEvent.prototype) &&\n            // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n            // defined for some reason even when window.RTCTransceiver is not.\n            !window.RTCTransceiver) {\n            Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n                get: function() {\n                    return {receiver: this.receiver};\n                }\n            });\n        }\n    },\n\n    shimCreateOfferLegacy: function(window) {\n        var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n        window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n            var pc = this;\n            if (offerOptions) {\n                if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n                    // support bit values\n                    offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n                }\n                var audioTransceiver = pc.getTransceivers().find(function(transceiver) {\n                    return transceiver.sender.track &&\n                        transceiver.sender.track.kind === 'audio';\n                });\n                if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n                    if (audioTransceiver.direction === 'sendrecv') {\n                        if (audioTransceiver.setDirection) {\n                            audioTransceiver.setDirection('sendonly');\n                        } else {\n                            audioTransceiver.direction = 'sendonly';\n                        }\n                    } else if (audioTransceiver.direction === 'recvonly') {\n                        if (audioTransceiver.setDirection) {\n                            audioTransceiver.setDirection('inactive');\n                        } else {\n                            audioTransceiver.direction = 'inactive';\n                        }\n                    }\n                } else if (offerOptions.offerToReceiveAudio === true &&\n                    !audioTransceiver) {\n                    pc.addTransceiver('audio');\n                }\n\n\n                if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n                    // support bit values\n                    offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n                }\n                var videoTransceiver = pc.getTransceivers().find(function(transceiver) {\n                    return transceiver.sender.track &&\n                        transceiver.sender.track.kind === 'video';\n                });\n                if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n                    if (videoTransceiver.direction === 'sendrecv') {\n                        videoTransceiver.setDirection('sendonly');\n                    } else if (videoTransceiver.direction === 'recvonly') {\n                        videoTransceiver.setDirection('inactive');\n                    }\n                } else if (offerOptions.offerToReceiveVideo === true &&\n                    !videoTransceiver) {\n                    pc.addTransceiver('video');\n                }\n            }\n            return origCreateOffer.apply(pc, arguments);\n        };\n    }\n};\n\n},{\"../utils\":13}],13:[function(require,module,exports){\n/*\n*  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n*\n*  Use of this source code is governed by a BSD-style license\n*  that can be found in the LICENSE file in the root of the source\n*  tree.\n*/\n/* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object.\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n    if (!window.RTCPeerConnection) {\n        return;\n    }\n    var proto = window.RTCPeerConnection.prototype;\n    var nativeAddEventListener = proto.addEventListener;\n    proto.addEventListener = function(nativeEventName, cb) {\n        if (nativeEventName !== eventNameToWrap) {\n            return nativeAddEventListener.apply(this, arguments);\n        }\n        var wrappedCallback = function(e) {\n            cb(wrapper(e));\n        };\n        this._eventMap = this._eventMap || {};\n        this._eventMap[cb] = wrappedCallback;\n        return nativeAddEventListener.apply(this, [nativeEventName,\n            wrappedCallback]);\n    };\n\n    var nativeRemoveEventListener = proto.removeEventListener;\n    proto.removeEventListener = function(nativeEventName, cb) {\n        if (nativeEventName !== eventNameToWrap || !this._eventMap\n            || !this._eventMap[cb]) {\n            return nativeRemoveEventListener.apply(this, arguments);\n        }\n        var unwrappedCb = this._eventMap[cb];\n        delete this._eventMap[cb];\n        return nativeRemoveEventListener.apply(this, [nativeEventName,\n            unwrappedCb]);\n    };\n\n    Object.defineProperty(proto, 'on' + eventNameToWrap, {\n        get: function() {\n            return this['_on' + eventNameToWrap];\n        },\n        set: function(cb) {\n            if (this['_on' + eventNameToWrap]) {\n                this.removeEventListener(eventNameToWrap,\n                    this['_on' + eventNameToWrap]);\n                delete this['_on' + eventNameToWrap];\n            }\n            if (cb) {\n                this.addEventListener(eventNameToWrap,\n                    this['_on' + eventNameToWrap] = cb);\n            }\n        }\n    });\n}\n\n// Utility methods.\nmodule.exports = {\n    extractVersion: extractVersion,\n    wrapPeerConnectionEvent: wrapPeerConnectionEvent,\n    disableLog: function(bool) {\n        if (typeof bool !== 'boolean') {\n            return new Error('Argument type: ' + typeof bool +\n                '. Please use a boolean.');\n        }\n        logDisabled_ = bool;\n        return (bool) ? 'adapter.js logging disabled' :\n            'adapter.js logging enabled';\n    },\n\n    /**\n     * Disable or enable deprecation warnings\n     * @param {!boolean} bool set to true to disable warnings.\n     */\n    disableWarnings: function(bool) {\n        if (typeof bool !== 'boolean') {\n            return new Error('Argument type: ' + typeof bool +\n                '. Please use a boolean.');\n        }\n        deprecationWarnings_ = !bool;\n        return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n    },\n\n    log: function() {\n        if (typeof window === 'object') {\n            if (logDisabled_) {\n                return;\n            }\n            if (typeof console !== 'undefined' && typeof console.log === 'function') {\n                console.log.apply(console, arguments);\n            }\n        }\n    },\n\n    /**\n     * Shows a deprecation warning suggesting the modern and spec-compatible API.\n     */\n    deprecated: function(oldMethod, newMethod) {\n        if (!deprecationWarnings_) {\n            return;\n        }\n        console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n            ' instead.');\n    },\n\n    /**\n     * Browser detector.\n     *\n     * @return {object} result containing browser and version\n     *     properties.\n     */\n    detectBrowser: function(window) {\n        var navigator = window && window.navigator;\n\n        // Returned result object.\n        var result = {};\n        result.browser = null;\n        result.version = null;\n\n        // Fail early if it's not a browser\n        if (typeof window === 'undefined' || !window.navigator) {\n            result.browser = 'Not a browser.';\n            return result;\n        }\n\n        if (navigator.mozGetUserMedia) { // Firefox.\n            result.browser = 'firefox';\n            result.version = extractVersion(navigator.userAgent,\n                /Firefox\\/(\\d+)\\./, 1);\n        } else if (navigator.webkitGetUserMedia) {\n            // Chrome, Chromium, Webview, Opera.\n            // Version matches Chrome/WebRTC version.\n            result.browser = 'chrome';\n            result.version = extractVersion(navigator.userAgent,\n                /Chrom(e|ium)\\/(\\d+)\\./, 2);\n        } else if (navigator.mediaDevices &&\n            navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n            result.browser = 'edge';\n            result.version = extractVersion(navigator.userAgent,\n                /Edge\\/(\\d+).(\\d+)$/, 2);\n        } else if (window.RTCPeerConnection &&\n            navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n            result.browser = 'safari';\n            result.version = extractVersion(navigator.userAgent,\n                /AppleWebKit\\/(\\d+)\\./, 1);\n        } else { // Default fallthrough: not supported.\n            result.browser = 'Not a supported browser.';\n            return result;\n        }\n\n        return result;\n    }\n};\n\n},{}]},{},[3])(3)\n});\n"]}