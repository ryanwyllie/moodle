{"version":3,"sources":["../src/defaultcustom.js"],"names":["define","$","on","onChangeSelect","event","element","target","defaultvalue","JSON","parse","attr","customvalue","type","form","closest","elementName","replace","newvalue","prop","find","val","day","month","year","hour","minute"],"mappings":"aAyBAA,iCAAO,CAAC,QAAD,CAAP,CAAmB,SAASC,CAAT,CAAY,CA0B3BA,EAAE,MAAF,EAAUC,EAAV,CAAa,QAAb,kCAzBqB,QAAjBC,eAAiB,CAASC,KAAT,CAAgB,CACjC,GAAIC,SAAUJ,EAAEG,MAAME,MAAR,CAAd,CACIC,aAAeC,KAAKC,KAAL,CAAWJ,QAAQK,IAAR,CAAa,mBAAb,CAAX,CADnB,CAEIC,YAAcH,KAAKC,KAAL,CAAWJ,QAAQK,IAAR,CAAa,kBAAb,CAAX,CAFlB,CAGIE,KAAOP,QAAQK,IAAR,CAAa,WAAb,CAHX,CAIIG,KAAOR,QAAQS,OAAR,CAAgB,MAAhB,CAJX,CAKIC,YAAcV,QAAQK,IAAR,CAAa,MAAb,EAAqBM,OAArB,CAA6B,gBAA7B,CAA+C,SAA/C,CALlB,CAMIC,SAAWZ,QAAQa,IAAR,CAAa,SAAb,EAA0BP,WAA1B,CAAwCJ,YANvD,CAQa,MAAT,OAT6B,CAU7BM,KAAKM,IAAL,CAAU,UAAYJ,WAAZ,CAA0B,IAApC,EAA0CK,GAA1C,CAA8CH,QAA9C,CAV6B,CAWb,eAAT,OAXsB,EAY7BJ,KAAKM,IAAL,CAAU,UAAYJ,WAAZ,CAA0B,SAApC,EAA+CK,GAA/C,CAAmDH,SAASI,GAA5D,CAZ6B,CAa7BR,KAAKM,IAAL,CAAU,UAAYJ,WAAZ,CAA0B,WAApC,EAAiDK,GAAjD,CAAqDH,SAASK,KAA9D,CAb6B,CAc7BT,KAAKM,IAAL,CAAU,UAAYJ,WAAZ,CAA0B,UAApC,EAAgDK,GAAhD,CAAoDH,SAASM,IAA7D,CAd6B,EAeb,oBAAT,OAfsB,GAgB7BV,KAAKM,IAAL,CAAU,UAAYJ,WAAZ,CAA0B,SAApC,EAA+CK,GAA/C,CAAmDH,SAASI,GAA5D,CAhB6B,CAiB7BR,KAAKM,IAAL,CAAU,UAAYJ,WAAZ,CAA0B,WAApC,EAAiDK,GAAjD,CAAqDH,SAASK,KAA9D,CAjB6B,CAkB7BT,KAAKM,IAAL,CAAU,UAAYJ,WAAZ,CAA0B,UAApC,EAAgDK,GAAhD,CAAoDH,SAASM,IAA7D,CAlB6B,CAmB7BV,KAAKM,IAAL,CAAU,UAAYJ,WAAZ,CAA0B,UAApC,EAAgDK,GAAhD,CAAoDH,SAASO,IAA7D,CAnB6B,CAoB7BX,KAAKM,IAAL,CAAU,UAAYJ,WAAZ,CAA0B,YAApC,EAAkDK,GAAlD,CAAsDH,SAASQ,MAA/D,CApB6B,CAsBpC,CAGD,CACH,CA3BD,C","file":"defaultcustom.min.js","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Functionality for the form element defaultcustom\n *\n * @module     core_form/defaultcustom\n * @package    core_form\n * @class      defaultcustom\n * @copyright  2017 Marina Glancy\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      3.3\n */\ndefine(['jquery'], function($) {\n    var onChangeSelect = function(event) {\n        var element = $(event.target),\n            defaultvalue = JSON.parse(element.attr('data-defaultvalue')),\n            customvalue = JSON.parse(element.attr('data-customvalue')),\n            type = element.attr('data-type'),\n            form = element.closest('form'),\n            elementName = element.attr('name').replace(/\\[customize\\]$/, '[value]'),\n            newvalue = element.prop('checked') ? customvalue : defaultvalue;\n\n        if (type === 'text') {\n            form.find('[name=\"' + elementName + '\"]').val(newvalue);\n        } else if (type === 'date_selector') {\n            form.find('[name=\"' + elementName + '[day]\"]').val(newvalue.day);\n            form.find('[name=\"' + elementName + '[month]\"]').val(newvalue.month);\n            form.find('[name=\"' + elementName + '[year]\"]').val(newvalue.year);\n        } else if (type === 'date_time_selector') {\n            form.find('[name=\"' + elementName + '[day]\"]').val(newvalue.day);\n            form.find('[name=\"' + elementName + '[month]\"]').val(newvalue.month);\n            form.find('[name=\"' + elementName + '[year]\"]').val(newvalue.year);\n            form.find('[name=\"' + elementName + '[hour]\"]').val(newvalue.hour);\n            form.find('[name=\"' + elementName + '[minute]\"]').val(newvalue.minute);\n        }\n    };\n\n    var selector = 'input[data-defaultcustom=true]';\n    $('body').on('change', selector, onChangeSelect);\n});\n"]}