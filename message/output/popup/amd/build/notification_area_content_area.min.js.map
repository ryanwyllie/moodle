{"version":3,"sources":["../src/notification_area_content_area.js"],"names":["define","$","Templates","DebugNotification","CustomEvents","NotificationRepo","NotificationAreaEvents","SELECTORS","CONTAINER","CONTENT","HEADER","FOOTER","TOGGLE_MODE","TEMPLATES","ContentArea","root","userId","container","closest","header","find","content","footer","registerEventListeners","prototype","getRoot","getContainer","getUserId","getHeader","getContent","getFooter","show","addClass","hide","removeClass","setHeaderHTML","html","empty","setContentHTML","setFooterHTML","showNotification","notification","headerPromise","render","done","bind","contentPromise","footerPromise","when","trigger","notificationShown","events","activate","on","VIEW_TOGGLE","e"],"mappings":"aAyBAA,sDAAO,CAAC,QAAD,CAAW,gBAAX,CAA6B,mBAA7B,CAAkD,gCAAlD,CACC,uCADD,CAC0C,wCAD1C,CAAP,CAEI,SAASC,CAAT,CAAYC,SAAZ,CAAuBC,iBAAvB,CAA0CC,YAA1C,CAAwDC,gBAAxD,CAA0EC,sBAA1E,CAAkG,IAE9FC,WAAY,CACZC,UAAW,mCADC,CAEZC,QAAS,yBAFG,CAGZC,OAAQ,wBAHI,CAIZC,OAAQ,wBAJI,CAKZC,YAAa,6BALD,CAFkF,CAU9FC,UAAY,CACZH,OAAQ,qDADI,CAEZD,QAAS,sDAFG,CAGZE,OAAQ,qDAHI,CAVkF,CAsB9FG,YAAc,SAASC,IAAT,CAAeC,MAAf,CAAuB,CACrC,KAAKD,IAAL,CAAYd,EAAEc,IAAF,CADyB,CAErC,KAAKE,SAAL,CAAiB,KAAKF,IAAL,CAAUG,OAAV,CAAkBX,UAAUC,SAA5B,CAFoB,CAGrC,KAAKQ,MAAL,CAAcA,MAHuB,CAIrC,KAAKG,MAAL,CAAc,KAAKJ,IAAL,CAAUK,IAAV,CAAeb,UAAUG,MAAzB,CAJuB,CAKrC,KAAKW,OAAL,CAAe,KAAKN,IAAL,CAAUK,IAAV,CAAeb,UAAUE,OAAzB,CALsB,CAMrC,KAAKa,MAAL,CAAc,KAAKP,IAAL,CAAUK,IAAV,CAAeb,UAAUI,MAAzB,CANuB,CAQrC,KAAKY,sBAAL,EACH,CA/BiG,CA4LlG,MArJAT,aAAYU,SAAZ,CAAsBC,OAAtB,CAAgC,UAAW,CACvC,MAAO,MAAKV,IACf,CAmJD,CA3IAD,YAAYU,SAAZ,CAAsBE,YAAtB,CAAqC,UAAW,CAC5C,MAAO,MAAKT,SACf,CAyID,CAjIAH,YAAYU,SAAZ,CAAsBG,SAAtB,CAAkC,UAAW,CACzC,MAAO,MAAKX,MACf,CA+HD,CAvHAF,YAAYU,SAAZ,CAAsBI,SAAtB,CAAkC,UAAW,CACzC,MAAO,MAAKT,MACf,CAqHD,CA7GAL,YAAYU,SAAZ,CAAsBK,UAAtB,CAAmC,UAAW,CAC1C,MAAO,MAAKR,OACf,CA2GD,CAnGAP,YAAYU,SAAZ,CAAsBM,SAAtB,CAAkC,UAAW,CACzC,MAAO,MAAKR,MACf,CAiGD,CAzFAR,YAAYU,SAAZ,CAAsBO,IAAtB,CAA6B,UAAW,CACpC,KAAKL,YAAL,GAAoBM,QAApB,CAA6B,mBAA7B,CACH,CAuFD,CA/EAlB,YAAYU,SAAZ,CAAsBS,IAAtB,CAA6B,UAAW,CACpC,KAAKP,YAAL,GAAoBQ,WAApB,CAAgC,mBAAhC,CACH,CA6ED,CArEApB,YAAYU,SAAZ,CAAsBW,aAAtB,CAAsC,SAASC,IAAT,CAAe,CACjD,KAAKR,SAAL,GAAiBS,KAAjB,GAAyBD,IAAzB,CAA8BA,IAA9B,CACH,CAmED,CA3DAtB,YAAYU,SAAZ,CAAsBc,cAAtB,CAAuC,SAASF,IAAT,CAAe,CAClD,KAAKP,UAAL,GAAkBQ,KAAlB,GAA0BD,IAA1B,CAA+BA,IAA/B,CACH,CAyDD,CAjDAtB,YAAYU,SAAZ,CAAsBe,aAAtB,CAAsC,SAASH,IAAT,CAAe,CACjD,KAAKN,SAAL,GAAiBO,KAAjB,GAAyBD,IAAzB,CAA8BA,IAA9B,CACH,CA+CD,CAtCAtB,YAAYU,SAAZ,CAAsBgB,gBAAtB,CAAyC,SAASC,YAAT,CAAuB,IACxDC,eAAgBxC,UAAUyC,MAAV,CAAiB9B,UAAUH,MAA3B,CAAmC+B,YAAnC,EAAiDG,IAAjD,CAAsD,SAASR,IAAT,CAAe,CACrF,KAAKD,aAAL,CAAmBC,IAAnB,CACH,CAFyE,CAExES,IAFwE,CAEnE,IAFmE,CAAtD,CADwC,CAKxDC,eAAiB5C,UAAUyC,MAAV,CAAiB9B,UAAUJ,OAA3B,CAAoCgC,YAApC,EAAkDG,IAAlD,CAAuD,SAASR,IAAT,CAAe,CACvF,KAAKE,cAAL,CAAoBF,IAApB,CACH,CAF2E,CAE1ES,IAF0E,CAErE,IAFqE,CAAvD,CALuC,CASxDE,cAAgB7C,UAAUyC,MAAV,CAAiB9B,UAAUF,MAA3B,CAAmC8B,YAAnC,EAAiDG,IAAjD,CAAsD,SAASR,IAAT,CAAe,CACrF,KAAKG,aAAL,CAAmBH,IAAnB,CACH,CAFyE,CAExES,IAFwE,CAEnE,IAFmE,CAAtD,CATwC,CAa5D,MAAO5C,GAAE+C,IAAF,CAAON,aAAP,CAAsBI,cAAtB,CAAsCC,aAAtC,EAAqDH,IAArD,CAA0D,UAAW,CACxE,KAAKb,IAAL,EADwE,CAExE,KAAKL,YAAL,GAAoBuB,OAApB,CAA4B3C,uBAAuB4C,iBAAnD,CAAsE,CAACT,YAAD,CAAtE,CACH,CAHgE,CAG/DI,IAH+D,CAG1D,IAH0D,CAA1D,CAIV,CAqBD,CAdA/B,YAAYU,SAAZ,CAAsBD,sBAAtB,CAA+C,UAAW,CACtDnB,aAAaJ,MAAb,CAAoB,KAAKyB,OAAL,EAApB,CAAoC,CAChCrB,aAAa+C,MAAb,CAAoBC,QADY,CAApC,CADsD,CAKtD,KAAK3B,OAAL,GAAe4B,EAAf,CAAkBjD,aAAa+C,MAAb,CAAoBC,QAAtC,CAAgD7C,UAAU+C,WAA1D,CAAuE,UAAW,CAC9E,KAAKrB,IAAL,EACH,CAFsE,CAErEY,IAFqE,CAEhE,IAFgE,CAAvE,CALsD,CAStD,KAAKnB,YAAL,GAAoB2B,EAApB,CAAuB/C,uBAAuBkC,gBAA9C,CAAgE,SAASe,CAAT,CAAYd,YAAZ,CAA0B,CACtF,KAAKD,gBAAL,CAAsBC,YAAtB,CACH,CAF+D,CAE9DI,IAF8D,CAEzD,IAFyD,CAAhE,CAGH,CAED,CAAO/B,WACV,CA/LD,C","file":"notification_area_content_area.min.js","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Controls the content area of the notification area on the\n * notification page.\n *\n * @module     message_popup/notification_area_content_area\n * @class      notification_area_content_area\n * @package    message\n * @copyright  2016 Ryan Wyllie <ryan@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/templates', 'core/notification', 'core/custom_interaction_events',\n        'message_popup/notification_repository', 'message_popup/notification_area_events'],\n    function($, Templates, DebugNotification, CustomEvents, NotificationRepo, NotificationAreaEvents) {\n\n    var SELECTORS = {\n        CONTAINER: '[data-region=\"notification-area\"]',\n        CONTENT: '[data-region=\"content\"]',\n        HEADER: '[data-region=\"header\"]',\n        FOOTER: '[data-region=\"footer\"]',\n        TOGGLE_MODE: '[data-action=\"toggle-mode\"]',\n    };\n\n    var TEMPLATES = {\n        HEADER: 'message_popup/notification_area_content_area_header',\n        CONTENT: 'message_popup/notification_area_content_area_content',\n        FOOTER: 'message_popup/notification_area_content_area_footer',\n    };\n\n    /**\n     * Constructor for the ContentArea\n     *\n     * @param {object} root The root element for the content area\n     * @param {int} userId The user id of the current user\n     */\n    var ContentArea = function(root, userId) {\n        this.root = $(root);\n        this.container = this.root.closest(SELECTORS.CONTAINER);\n        this.userId = userId;\n        this.header = this.root.find(SELECTORS.HEADER);\n        this.content = this.root.find(SELECTORS.CONTENT);\n        this.footer = this.root.find(SELECTORS.FOOTER);\n\n        this.registerEventListeners();\n    };\n\n    /**\n     * Get the root element.\n     *\n     * @method getRoot\n     * @return {object} jQuery element\n     */\n    ContentArea.prototype.getRoot = function() {\n        return this.root;\n    };\n\n    /**\n     * Get the container element (which the content area is within).\n     *\n     * @method getContainer\n     * @return {object} jQuery element\n     */\n    ContentArea.prototype.getContainer = function() {\n        return this.container;\n    };\n\n    /**\n     * Get the user id.\n     *\n     * @method getUserId\n     * @return {int}\n     */\n    ContentArea.prototype.getUserId = function() {\n        return this.userId;\n    };\n\n    /**\n     * Get the content area header element.\n     *\n     * @method getHeader\n     * @return {object} jQuery element\n     */\n    ContentArea.prototype.getHeader = function() {\n        return this.header;\n    };\n\n    /**\n     * Get the content area content element.\n     *\n     * @method getContent\n     * @return {object} jQuery element\n     */\n    ContentArea.prototype.getContent = function() {\n        return this.content;\n    };\n\n    /**\n     * Get the content area footer element.\n     *\n     * @method getFooter\n     * @return {object} jQuery element\n     */\n    ContentArea.prototype.getFooter = function() {\n        return this.footer;\n    };\n\n    /**\n     * Display the content area. Typically used with responsive\n     * styling on smaller screens.\n     *\n     * @method show\n     */\n    ContentArea.prototype.show = function() {\n        this.getContainer().addClass('show-content-area');\n    };\n\n    /**\n     * Hide the content area. Typically used with responsive\n     * styling on smaller screens.\n     *\n     * @method hide\n     */\n    ContentArea.prototype.hide = function() {\n        this.getContainer().removeClass('show-content-area');\n    };\n\n    /**\n     * Change the HTML in the content area header element.\n     *\n     * @method setHeaderHTML\n     * @param {string} html The HTML to be set\n     */\n    ContentArea.prototype.setHeaderHTML = function(html) {\n        this.getHeader().empty().html(html);\n    };\n\n    /**\n     * Change the HTML in the content area content element.\n     *\n     * @method setContentHMTL\n     * @param {string} html The HTML to be set.\n     */\n    ContentArea.prototype.setContentHTML = function(html) {\n        this.getContent().empty().html(html);\n    };\n\n    /**\n     * Change the HTML in the content area footer element.\n     *\n     * @method setFooterHTML\n     * @param {string} html The HTML to be set.\n     */\n    ContentArea.prototype.setFooterHTML = function(html) {\n        this.getFooter().empty().html(html);\n    };\n\n    /**\n     * Render the given notification context in the content area.\n     *\n     * @method showNotification\n     * @param {object} notification The notification context (from a webservice)\n     * @return {object} jQuery promise\n     */\n    ContentArea.prototype.showNotification = function(notification) {\n        var headerPromise = Templates.render(TEMPLATES.HEADER, notification).done(function(html) {\n            this.setHeaderHTML(html);\n        }.bind(this));\n\n        var contentPromise = Templates.render(TEMPLATES.CONTENT, notification).done(function(html) {\n            this.setContentHTML(html);\n        }.bind(this));\n\n        var footerPromise = Templates.render(TEMPLATES.FOOTER, notification).done(function(html) {\n            this.setFooterHTML(html);\n        }.bind(this));\n\n        return $.when(headerPromise, contentPromise, footerPromise).done(function() {\n            this.show();\n            this.getContainer().trigger(NotificationAreaEvents.notificationShown, [notification]);\n        }.bind(this));\n    };\n\n    /**\n     * Create the event listeners for the content area.\n     *\n     * @method registerEventListeners\n     */\n    ContentArea.prototype.registerEventListeners = function() {\n        CustomEvents.define(this.getRoot(), [\n            CustomEvents.events.activate\n        ]);\n\n        this.getRoot().on(CustomEvents.events.activate, SELECTORS.VIEW_TOGGLE, function() {\n            this.hide();\n        }.bind(this));\n\n        this.getContainer().on(NotificationAreaEvents.showNotification, function(e, notification) {\n            this.showNotification(notification);\n        }.bind(this));\n    };\n\n    return ContentArea;\n});\n"]}