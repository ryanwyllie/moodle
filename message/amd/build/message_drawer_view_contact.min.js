define(["jquery","core/notification","core/templates","core_message/message_repository"],function(a,b,c,d){var e={CONTENT_CONTAINER:'[data-region="content-container"]',LOADING_ICON_CONTAINER:'[data-region="loading-icon-container"]',LOADING_PLACEHOLDER_CONTAINER:'[data-region="loading-placeholder-container"]',TEXT_CONTAINER:'[data-region="button-text"]'},f={CONTENT:"core_message/message_drawer_view_contact_body_content"},g=function(a){return a.attr("data-user-id")},h=function(a){return a.find(e.CONTENT_CONTAINER)},i=function(a){a.prop("disabled",!0),a.find(e.TEXT_CONTAINER).addClass("hidden"),a.find(e.LOADING_ICON_CONTAINER).removeClass("hidden")},j=function(a){a.prop("disabled",!1),a.find(e.TEXT_CONTAINER).removeClass("hidden"),a.find(e.LOADING_ICON_CONTAINER).addClass("hidden")},k=function(a){a.find(e.LOADING_PLACEHOLDER_CONTAINER).removeClass("hidden")},l=function(a){a.find(e.LOADING_PLACEHOLDER_CONTAINER).addClass("hidden")},m=function(a){i(a),k(a)},n=function(a){j(a),l(a)},o=function(a,b){var c=g(a);return d.getProfile(c,b)},p=function(a,b){return c.render(f.CONTENT,b).then(function(b){h(a).append(b)})},q=function(c,d){c=a(c),h(c).empty(),m(c),o(c,d).then(function(a){return n(c),p(c,a)})["catch"](function(a){b.exception(a),n(c)})};return{show:q}});