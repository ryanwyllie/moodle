define(["jquery","core/ajax","core/notification","core_message/preferences_notifications_list_controller","core/custom_interaction_events"],function(a,b,c,d,e){var f={PREFERENCES_CONTAINER:'[data-region="preferences-container"]',BLOCK_NON_CONTACTS:'[data-region="block-non-contacts-container"] [data-block-non-contacts]',BLOCK_NON_CONTACTS_CONTAINER:'[data-region="block-non-contacts-container"]'},g=function(){new d(a(f.PREFERENCES_CONTAINER));var b=a(f.BLOCK_NON_CONTACTS);e.define(b,[e.events.activate]),b.on(e.events.activate,function(a){this.saveBlockNonContactsStatus()}.bind(this))};return g.prototype.saveBlockNonContactsStatus=function(){var d=a(f.BLOCK_NON_CONTACTS),e=a(f.BLOCK_NON_CONTACTS_CONTAINER),g=d.prop("checked");if(e.hasClass("loading"))return a.Deferred().resolve();e.addClass("loading");var h={methodname:"core_user_update_user",args:{user:{preferences:[{type:d.attr("data-preference-key"),value:g?1:0}]}}};return b.call([h])[0].fail(c.exception).always(function(){e.removeClass("loading")})},g});