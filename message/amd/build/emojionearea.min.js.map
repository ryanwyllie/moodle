{"version":3,"sources":["../src/emojionearea.js"],"names":["window","global","self","document","factory","require","exports","module","define","amd","jQuery","$","unique","eventStorage","possibleEvents","emojione","readyCallbacks","emojioneReady","fn","push","slice","css_class","emojioneSupportMode","invisibleChar","trigger","event","args","result","j","toLowerCase","_event","id","length","each","i","apply","attach","element","events","target","callerEvent","currentTarget","link","isArray","getTemplate","template","unicode","shortname","imageType","imagePath","imagePathSVG","imagePathPNG","friendlyName","substr","replace","txt","charAt","toUpperCase","fname","uc_base","uc_output","shortnameToUnicode","convert","shortnameTo","str","clear","emojioneList","pasteHtmlAtCaret","html","sel","range","getSelection","getRangeAt","rangeCount","deleteContents","el","createElement","innerHTML","frag","createDocumentFragment","node","lastNode","firstChild","appendChild","insertNode","cloneRange","setStartAfter","collapse","removeAllRanges","addRange","selection","type","createRange","pasteHTML","getEmojioneVersion","emojioneVersion","isObject","variable","detectVersion","version","cacheBustParam","emojiVersion","getSupportMode","getDefaultOptions","emojioneArea","defaults","defaultOptions","attributes","dir","spellcheck","autocomplete","autocorrect","autocapitalize","search","placeholder","emojiPlaceholder","searchPlaceholder","container","hideSource","shortnames","sprite","pickerPosition","filtersPosition","searchPosition","hidePickerOnBlur","buttonTitle","tones","tonesStyle","inline","saveEmojisAs","shortcuts","autocompleteTones","standalone","useInternalCDN","recentEmojis","textcomplete","maxCount","placement","supportMode","filters","title","emoji","recent","icon","smileys_people","animals_nature","food_drink","activity","travel_places","objects","symbols","flags","getOptions","options","default_options","filter","data","isEmptyObject","key","val","extend","saveSelection","restoreSelection","setStart","startContainer","startOffset","setEnd","endContainer","endOffset","body","createTextRange","textRange","moveToElementText","startContanier","select","uniRegexp","unicodeTo","unicodeChar","map","toShort","htmlFromText","emojiTemplate","textFromHtml","RegExp","calcButtonPosition","offset","editor","offsetWidth","clientWidth","current","parseInt","button","css","marginRight","floatingPicker","picker","right","lazyLoading","lasyEmoji","eq","is","pickerTop","top","pickerBottom","height","e","attr","removeClass","selector","prefix","skip_dot","div","parent","call","arguments","child","isFunction","appendTo","getRecent","localStorage","getItem","updateRecent","show","emojis","skinnable","scrollArea","scrollTop","recentCategory","items","emojiBtnTemplate","split","join","children","remove","insertAfter","on","recentFilter","height2","hasClass","next","addClass","hide","setRecent","index","indexOf","splice","unshift","pop","setItem","supportsLocalStorage","removeItem","init","source","emojiTemplateAlt","disable","sourceValFunc","filtersBtns","searchPanel","emojisList","categories","categoryBlocks","append","role","app","contenteditable","tabindex","searchSel","value","mainBlock","prependTo","params","skin","wrapInner","category","name","text","find","setText","getText","click","resize","mousedown","paste","stayFocused","mouseup","keyup","keydown","keypress","change","focus","blur","noListenScroll","item","isActive","headerOffset","scroll","offsetTop","stop","animate","tone","hidePicker","showPicker","pasteText","caretID","Date","getTime","editorScrollTop","caret","originalEvent","clipboardData","getData","preventDefault","returnValue","stopPropagation","clipboard","position","left","width","overflow","setTimeout","emojibtn","test","content","filterBtns","activeTone","term","matchEmojis","$matched","$notMatched","$block","_","ctrlKey","which","handler","textcompleteOptions","onKeydown","commands","KEY_ENTER","sort","match","callback","cache","option","initAutocomplete","disabled","enable","off","ajax","url","dataType","success","navigator","userAgent","execCommand","isReady","cdn","defaultBase","defaultBase3","base","isLoading","loadEmojione","emojioneJsCdnUrlBase","emojiSize","createStyleSheet","rel","href","shift","imagePathSVGSprites","regUnicode","unicodeRegexp","EmojioneArea","bindEvent","ev","concat","prototype","call_args","setFocus","_sh_timer","clearTimeout","prop","emojioneAreaText","pseudoSelf","$this"],"mappings":"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","sourcesContent":["/*!\n * EmojioneArea v3.4.1\n * https://github.com/mervick/emojionearea\n * Copyright Andrey Izman and other contributors\n * Released under the MIT license\n * Date: 2018-04-27T09:03Z\n */\nwindow = ( typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {} );\ndocument = window.document || {};\n\n; ( function ( factory, global ) {\n    if ( typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\" ) {\n\n        // CommonJS\n        factory( require( \"jquery\" ) );\n    } else if ( typeof define === \"function\" && define.amd ) {\n\n        // AMD\n        define( [ \"jquery\" ], factory );\n    } else {\n\n        // Normal script tag\n        factory( global.jQuery );\n    }\n}( function ( $ ) {\n    \"use strict\";\n\n    var unique = 0;\n    var eventStorage = {};\n    var possibleEvents = {};\n    var emojione = window.emojione;\n    var readyCallbacks = [];\n    function emojioneReady (fn) {\n        if (emojione) {\n            fn();\n        } else {\n            readyCallbacks.push(fn);\n        }\n    };\n    var blankImg = 'data:image/gif;base64,R0lGODlhAQABAJH/AP///wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==';\n    var slice = [].slice;\n    var css_class = \"emojionearea\";\n    var emojioneSupportMode = 0;\n    var invisibleChar = '&#8203;';\n    function trigger(self, event, args) {\n        var result = true, j = 1;\n        if (event) {\n            event = event.toLowerCase();\n            do {\n                var _event = j==1 ? '@' + event : event;\n                if (eventStorage[self.id][_event] && eventStorage[self.id][_event].length) {\n                    $.each(eventStorage[self.id][_event], function (i, fn) {\n                        return result = fn.apply(self, args|| []) !== false;\n                    });\n                }\n            } while (result && !!j--);\n        }\n        return result;\n    }\n    function attach(self, element, events, target) {\n        target = target || function (event, callerEvent) { return $(callerEvent.currentTarget) };\n        $.each(events, function(event, link) {\n            event = $.isArray(events) ? link : event;\n            (possibleEvents[self.id][link] || (possibleEvents[self.id][link] = []))\n                .push([element, event, target]);\n        });\n    }\n    function getTemplate(template, unicode, shortname) {\n        var imageType = emojione.imageType, imagePath;\n        if (imageType=='svg'){\n            imagePath = emojione.imagePathSVG;\n        } else {\n            imagePath = emojione.imagePathPNG;\n        }\n        var friendlyName = '';\n        if (shortname) {\n            friendlyName = shortname.substr(1, shortname.length - 2).replace(/_/g, ' ').replace(/\\w\\S*/g, function(txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n        }\n        var fname = '';\n        if (unicode.uc_base && emojioneSupportMode > 4) {\n            fname = unicode.uc_base;\n            unicode = unicode.uc_output.toUpperCase();\n        } else {\n            fname = unicode;\n        }\n        template = template.replace('{name}', shortname || '')\n            .replace('{friendlyName}', friendlyName)\n            .replace('{img}', imagePath + (emojioneSupportMode < 2 ? fname.toUpperCase() : fname) + '.' + imageType)\n            .replace('{uni}', unicode);\n\n        if(shortname) {\n            template = template.replace('{alt}', emojione.shortnameToUnicode(shortname));\n        } else {\n            template = template.replace('{alt}', emojione.convert(unicode));\n        }\n\n        return template;\n    };\n    function shortnameTo(str, template, clear) {\n        return str.replace(/:?\\+?[\\w_\\-]+:?/g, function(shortname) {\n            shortname = \":\" + shortname.replace(/:$/,'').replace(/^:/,'') + \":\";\n            var unicode = emojione.emojioneList[shortname];\n            if (unicode) {\n                if (emojioneSupportMode > 4) {\n                    return getTemplate(template, unicode, shortname);\n                } else {\n                    if (emojioneSupportMode > 3) unicode = unicode.unicode;\n                    return getTemplate(template, unicode[unicode.length-1], shortname);\n                }\n            }\n            return clear ? '' : shortname;\n        });\n    };\n    function pasteHtmlAtCaret(html) {\n        var sel, range;\n        if (window.getSelection) {\n            sel = window.getSelection();\n            if (sel.getRangeAt && sel.rangeCount) {\n                range = sel.getRangeAt(0);\n                range.deleteContents();\n                var el = document.createElement(\"div\");\n                el.innerHTML = html;\n                var frag = document.createDocumentFragment(), node, lastNode;\n                while ( (node = el.firstChild) ) {\n                    lastNode = frag.appendChild(node);\n                }\n                range.insertNode(frag);\n                if (lastNode) {\n                    range = range.cloneRange();\n                    range.setStartAfter(lastNode);\n                    range.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(range);\n                }\n            }\n        } else if (document.selection && document.selection.type != \"Control\") {\n            document.selection.createRange().pasteHTML(html);\n        }\n    }\n    function getEmojioneVersion() {\n        return window.emojioneVersion || '3.1.2';\n    };\n    function isObject(variable) {\n        return typeof variable === 'object';\n    };\n    function detectVersion(emojione) {\n        var version;\n        if (emojione.cacheBustParam) {\n            version = emojione.cacheBustParam;\n            if (!isObject(emojione['jsEscapeMap'])) return '1.5.2';\n            if (version === \"?v=1.2.4\") return '2.0.0';\n            if (version === \"?v=2.0.1\") return '2.1.0'; // v2.0.1 || v2.1.0\n            if (version === \"?v=2.1.1\") return '2.1.1';\n            if (version === \"?v=2.1.2\") return '2.1.2';\n            if (version === \"?v=2.1.3\") return '2.1.3';\n            if (version === \"?v=2.1.4\") return '2.1.4';\n            if (version === \"?v=2.2.7\") return '2.2.7';\n            return '2.2.7';\n        } else {\n            return emojione.emojiVersion;\n        }\n    };\n    function getSupportMode(version) {\n        switch (version) {\n            case '1.5.2': return 0;\n            case '2.0.0': return 1;\n            case '2.1.0':\n            case '2.1.1': return 2;\n            case '2.1.2': return 3;\n            case '2.1.3':\n            case '2.1.4':\n            case '2.2.7': return 4;\n            case '3.0.1':\n            case '3.0.2':\n            case '3.0.3':\n            case '3.0': return 5;\n            case '3.1.0':\n            case '3.1.1':\n            case '3.1.2':\n            case '3.1':\n            default: return 6;\n        }\n    };\n    function getDefaultOptions () {\n        if ($.fn.emojioneArea && $.fn.emojioneArea.defaults) {\n            return $.fn.emojioneArea.defaults;\n        }\n\n        var defaultOptions = {\n            attributes: {\n                dir               : \"ltr\",\n                spellcheck        : false,\n                autocomplete      : \"off\",\n                autocorrect       : \"off\",\n                autocapitalize    : \"off\",\n            },\n            search            : true,\n            placeholder       : null,\n            emojiPlaceholder  : \":smiley:\",\n            searchPlaceholder : \"SEARCH\",\n            container         : null,\n            hideSource        : true,\n            shortnames        : true,\n            sprite            : true,\n            pickerPosition    : \"top\", // top | bottom | right\n            filtersPosition   : \"top\", // top | bottom\n            searchPosition    : \"top\", // top | bottom\n            hidePickerOnBlur  : true,\n            buttonTitle       : \"Use the TAB key to insert emoji faster\",\n            tones             : true,\n            tonesStyle        : \"bullet\", // bullet | radio | square | checkbox\n            inline            : null, // null - auto\n            saveEmojisAs      : \"unicode\", // unicode | shortname | image\n            shortcuts         : true,\n            autocomplete      : true,\n            autocompleteTones : false,\n            standalone        : false,\n            useInternalCDN    : true, // Use the self loading mechanism\n            imageType         : \"png\", // Default image type used by internal CDN\n            recentEmojis      : true,\n            textcomplete: {\n                maxCount      : 15,\n                placement     : null // null - default | top | absleft | absright\n            }\n        };\n\n        var supportMode = !emojione ? getSupportMode(getEmojioneVersion()) : getSupportMode(detectVersion(emojione));\n\n        if (supportMode > 4) {\n            defaultOptions.filters = {\n                tones: {\n                    title: \"Diversity\",\n                    emoji: \"open_hands raised_hands palms_up_together clap pray thumbsup thumbsdown punch fist left_facing_fist right_facing_fist \" +\n                    \"fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up raised_hand \" +\n                    \"raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ear \" +\n                    \"nose baby boy girl man woman blond-haired_woman blond-haired_man older_man older_woman \" +\n                    \"man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer \" +\n                    \"man_police_officer woman_construction_worker man_construction_worker \" +\n                    \"woman_guard man_guard woman_detective man_detective woman_health_worker man_health_worker \" +\n                    \"woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher \" +\n                    \"man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker \" +\n                    \"man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist \" +\n                    \"woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge \" +\n                    \"man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman \" +\n                    \"breast_feeding woman_bowing man_bowing man_tipping_hand woman_tipping_hand \" +\n                    \"man_gesturing_no woman_gesturing_no man_gesturing_ok woman_gesturing_ok \" +\n                    \"man_raising_hand woman_raising_hand woman_facepalming man_facepalming \" +\n                    \"woman_shrugging man_shrugging man_pouting woman_pouting \" +\n                    \"man_frowning woman_frowning man_getting_haircut woman_getting_haircut \" +\n                    \"man_getting_face_massage woman_getting_face_massage man_in_business_suit_levitating dancer man_dancing \" +\n                    \"woman_walking man_walking woman_running man_running adult child older_adult \" +\n                    \"bearded_person woman_with_headscarf woman_mage man_mage \" +\n                    \"woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf \" +\n                    \"snowboarder woman_lifting_weights man_lifting_weights woman_cartwheeling \" +\n                    \"man_cartwheeling woman_bouncing_ball man_bouncing_ball \" +\n                    \"woman_playing_handball man_playing_handball woman_golfing man_golfing \" +\n                    \"woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo \" +\n                    \"man_playing_water_polo woman_rowing_boat man_rowing_boat \" +\n                    \"horse_racing woman_biking man_biking woman_mountain_biking \" +\n                    \"man_mountain_biking woman_juggling man_juggling \" +\n                    \"woman_in_steamy_room man_in_steamy_room woman_climbing \" +\n                    \"man_climbing woman_in_lotus_position man_in_lotus_position bath person_in_bed\"\n                },\n\n                recent: {\n                    icon: \"clock3\",\n                    title: \"Recent\",\n                    emoji: \"\"\n                },\n\n                smileys_people: {\n                    icon: \"yum\",\n                    title: \"Smileys & People\",\n                    emoji: \"grinning smiley smile grin laughing sweat_smile joy rofl relaxed blush innocent slight_smile upside_down \" +\n                    \"wink relieved crazy_face star_struck heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes yum \" +\n                    \"stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth hugging nerd sunglasses \" +\n                    \"cowboy smirk unamused disappointed pensive worried face_with_raised_eyebrow face_with_monocle confused slight_frown \" +\n                    \"frowning2 persevere confounded tired_face weary triumph angry rage face_with_symbols_over_mouth \" +\n                    \"no_mouth neutral_face expressionless hushed frowning anguished open_mouth astonished dizzy_face exploding_head flushed scream \" +\n                    \"fearful cold_sweat cry disappointed_relieved drooling_face sob sweat sleepy sleeping rolling_eyes thinking \" +\n                    \"shushing_face face_with_hand_over_mouth lying_face grimacing zipper_mouth face_vomiting nauseated_face sneezing_face mask thermometer_face \" +\n                    \"head_bandage smiling_imp imp japanese_ogre japanese_goblin poop ghost skull skull_crossbones alien space_invader \" +\n                    \"robot jack_o_lantern clown smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face \" +\n                    \"pouting_cat open_hands raised_hands palms_up_together clap pray handshake thumbsup thumbsdown punch fist left_facing_fist \" +\n                    \"right_facing_fist fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up \" +\n                    \"raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie \" +\n                    \"nail_care ring lipstick kiss lips tongue ear nose footprints eye eyes speaking_head bust_in_silhouette \" +\n                    \"busts_in_silhouette baby boy girl man woman blond-haired_woman blond_haired_man older_man older_woman \" +\n                    \"man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer police_officer \" +\n                    \"woman_construction_worker construction_worker woman_guard guard woman_detective detective woman_health_worker \" +\n                    \"man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer \" +\n                    \"woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist \" +\n                    \"woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist \" +\n                    \"man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge \" +\n                    \"man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman breast_feeding woman_bowing \" +\n                    \"man_bowing woman_tipping_hand man_tipping_hand woman_gesturing_no man_gesturing_no woman_gesturing_ok \" +\n                    \"man_gesturing_ok woman_raising_hand man_raising_hand woman_facepalming man_facepalming woman_shrugging \" +\n                    \"man_shrugging woman_pouting man_pouting woman_frowning man_frowning woman_getting_haircut man_getting_haircut \" +\n                    \"woman_getting_face_massage man_getting_face_massage man_in_business_suit_levitating dancer man_dancing women_with_bunny_ears_partying \" +\n                    \"men_with_bunny_ears_partying woman_walking man_walking woman_running man_running couple two_women_holding_hands \" +\n                    \"two_men_holding_hands couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb \" +\n                    \"family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb \" +\n                    \"family_mmbb family_mmgg family_woman_boy family_woman_girl family_woman_girl_boy family_woman_boy_boy \" +\n                    \"family_woman_girl_girl family_man_boy family_man_girl family_man_girl_boy family_man_boy_boy family_man_girl_girl \" +\n                    \"bearded_person woman_with_headscarf woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire \" +\n                    \"mermaid merman woman_elf man_elf woman_genie man_genie woman_zombie man_zombie \" +\n                    \"womans_clothes shirt jeans necktie dress bikini kimono high_heel sandal boot mans_shoe athletic_shoe womans_hat \" +\n                    \"tophat mortar_board crown helmet_with_cross school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses \" +\n                    \"closed_umbrella umbrella2 brain billed_cap scarf gloves coat socks \"\n                },\n\n                animals_nature: {\n                    icon: \"hamster\",\n                    title: \"Animals & Nature\",\n                    emoji: \"dog cat mouse hamster rabbit fox bear panda_face koala tiger lion_face cow pig pig_nose frog monkey_face see_no_evil \" +\n                    \"hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick duck eagle owl bat wolf boar \" +\n                    \"horse unicorn bee bug butterfly snail shell beetle ant spider spider_web turtle snake lizard scorpion crab squid octopus shrimp \" +\n                    \"tropical_fish fish blowfish dolphin shark whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 deer dromedary_camel camel \" +\n                    \"elephant rhino gorilla racehorse pig2 goat ram sheep dog2 poodle cat2 rooster turkey dove rabbit2 mouse2 rat chipmunk dragon \" +\n                    \"giraffe zebra hedgehog sauropod t_rex cricket dragon_face feet cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover \" +\n                    \"bamboo tanabata_tree leaves fallen_leaf maple_leaf mushroom ear_of_rice bouquet tulip rose wilted_rose sunflower blossom \" +\n                    \"cherry_blossom hibiscus earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon \" +\n                    \"waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face \" +\n                    \"full_moon_with_face sun_with_face first_quarter_moon_with_face last_quarter_moon_with_face crescent_moon dizzy star star2 \" +\n                    \"sparkles zap fire boom comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud rainbow cloud \" +\n                    \"cloud_rain thunder_cloud_rain cloud_lightning cloud_snow snowman2 snowman snowflake wind_blowing_face dash cloud_tornado \" +\n                    \"fog ocean droplet sweat_drops umbrella \"\n                },\n\n                food_drink: {\n                    icon: \"pizza\",\n                    title: \"Food & Drink\",\n                    emoji: \"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple kiwi \" +\n                    \"avocado tomato eggplant cucumber carrot corn hot_pepper potato sweet_potato chestnut peanuts honey_pot croissant \" +\n                    \"bread french_bread cheese egg cooking bacon pancakes fried_shrimp poultry_leg meat_on_bone pizza hotdog hamburger \" +\n                    \"fries stuffed_flatbread taco burrito salad shallow_pan_of_food spaghetti ramen stew fish_cake sushi bento curry \" +\n                    \"rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard lollipop candy \" +\n                    \"chocolate_bar popcorn doughnut cookie milk baby_bottle coffee tea sake beer beers champagne_glass wine_glass \" +\n                    \"tumbler_glass cocktail tropical_drink champagne spoon fork_and_knife fork_knife_plate dumpling fortune_cookie \" +\n                    \"takeout_box chopsticks bowl_with_spoon cup_with_straw coconut broccoli pie pretzel cut_of_meat sandwich canned_food\"\n                },\n\n                activity: {\n                    icon: \"basketball\",\n                    title: \"Activity\",\n                    emoji: \"soccer basketball football baseball tennis volleyball rugby_football 8ball ping_pong badminton goal hockey field_hockey \" +\n                    \"cricket_game golf bow_and_arrow fishing_pole_and_fish boxing_glove martial_arts_uniform ice_skate ski skier snowboarder \" +\n                    \"woman_lifting_weights man_lifting_weights person_fencing women_wrestling men_wrestling woman_cartwheeling \" +\n                    \"man_cartwheeling woman_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball woman_golfing \" +\n                    \"man_golfing woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo \" +\n                    \"man_playing_water_polo woman_rowing_boat man_rowing_boat horse_racing woman_biking man_biking woman_mountain_biking man_mountain_biking \" +\n                    \"woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position \" +\n                    \"running_shirt_with_sash medal military_medal first_place second_place \" +\n                    \"third_place trophy rosette reminder_ribbon ticket tickets circus_tent woman_juggling man_juggling performing_arts art \" +\n                    \"clapper microphone headphones musical_score musical_keyboard drum saxophone trumpet guitar violin game_die dart bowling \" +\n                    \"video_game slot_machine sled curling_stone \"\n                },\n\n                travel_places: {\n                    icon: \"rocket\",\n                    title: \"Travel & Places\",\n                    emoji: \"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor \" +\n                    \"scooter bike motor_scooter motorcycle rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi \" +\n                    \"aerial_tramway mountain_cableway suspension_railway railway_car train mountain_railway monorail bullettrain_side \" +\n                    \"bullettrain_front light_rail steam_locomotive train2 metro tram station helicopter airplane_small airplane \" +\n                    \"airplane_departure airplane_arriving rocket satellite_orbital seat canoe sailboat motorboat speedboat cruise_ship \" +\n                    \"ferry ship anchor construction fuelpump busstop vertical_traffic_light traffic_light map moyai statue_of_liberty \" +\n                    \"fountain tokyo_tower european_castle japanese_castle stadium ferris_wheel roller_coaster carousel_horse beach_umbrella \" +\n                    \"beach island mountain mountain_snow mount_fuji volcano desert camping tent railway_track motorway construction_site \" +\n                    \"factory house house_with_garden homes house_abandoned office department_store post_office european_post_office hospital \" +\n                    \"bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine \" +\n                    \"japan rice_scene park sunrise sunrise_over_mountains stars sparkler fireworks city_sunset city_dusk cityscape \" +\n                    \"night_with_stars milky_way bridge_at_night foggy flying_saucer\"\n                },\n\n                objects: {\n                    icon: \"bulb\",\n                    title: \"Objects\",\n                    emoji: \"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc \" +\n                    \"floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver \" +\n                    \"telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass \" +\n                    \"hourglass_flowing_sand satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings \" +\n                    \"dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear \" +\n                    \"chains gun bomb knife dagger crossed_swords shield smoking coffin urn amphora crystal_ball prayer_beads barber \" +\n                    \"alembic telescope microscope hole pill syringe thermometer toilet potable_water shower bathtub bath bellhop key \" +\n                    \"key2 door couch bed sleeping_accommodation frame_photo shopping_bags shopping_cart gift balloon flags ribbon \" +\n                    \"confetti_ball tada dolls izakaya_lantern wind_chime envelope envelope_with_arrow incoming_envelope e-mail \" +\n                    \"love_letter inbox_tray outbox_tray package label mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail \" +\n                    \"postbox postal_horn scroll page_with_curl page_facing_up bookmark_tabs bar_chart chart_with_upwards_trend \" +\n                    \"chart_with_downwards_trend notepad_spiral calendar_spiral calendar date card_index card_box ballot_box \" +\n                    \"file_cabinet clipboard file_folder open_file_folder dividers newspaper2 newspaper notebook \" +\n                    \"notebook_with_decorative_cover ledger closed_book green_book blue_book orange_book books book bookmark link \" +\n                    \"paperclip paperclips triangular_ruler straight_ruler pushpin round_pushpin scissors pen_ballpoint pen_fountain \" +\n                    \"black_nib paintbrush crayon pencil pencil2 mag mag_right lock_with_ink_pen closed_lock_with_key lock unlock\"\n                },\n\n                symbols: {\n                    icon: \"heartpulse\",\n                    title: \"Symbols\",\n                    emoji: \"heart orange_heart yellow_heart green_heart blue_heart purple_heart black_heart broken_heart heart_exclamation two_hearts \" +\n                    \"revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent \" +\n                    \"om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus \" +\n                    \"aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom accept radioactive \" +\n                    \"biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs white_flower \" +\n                    \"ideograph_advantage secret congratulations u5408 u6e80 u5272 u7981 a b ab cl o2 sos x o octagonal_sign no_entry \" +\n                    \"name_badge no_entry_sign 100 anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage \" +\n                    \"no_mobile_phones no_smoking exclamation grey_exclamation question grey_question bangbang interrobang low_brightness \" +\n                    \"high_brightness part_alternation_mark warning children_crossing trident fleur-de-lis beginner recycle \" +\n                    \"white_check_mark u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark globe_with_meridians \" +\n                    \"diamond_shape_with_a_dot_inside m cyclone zzz atm wc wheelchair parking u7a7a sa passport_control customs \" +\n                    \"baggage_claim left_luggage mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko \" +\n                    \"symbols information_source abc abcd capital_abcd ng ok up cool new free zero one two three four five six seven \" +\n                    \"eight nine keycap_ten 1234 hash asterisk arrow_forward pause_button play_pause stop_button record_button eject \" +\n                    \"track_next track_previous fast_forward rewind arrow_double_up arrow_double_down arrow_backward arrow_up_small \" +\n                    \"arrow_down_small arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left \" +\n                    \"arrow_upper_left arrow_up_down left_right_arrow arrow_right_hook leftwards_arrow_with_hook arrow_heading_up \" +\n                    \"arrow_heading_down twisted_rightwards_arrows repeat repeat_one arrows_counterclockwise arrows_clockwise \" +\n                    \"musical_note notes heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign \" +\n                    \"currency_exchange tm copyright registered wavy_dash curly_loop loop end back on top soon heavy_check_mark \" +\n                    \"ballot_box_with_check radio_button white_circle black_circle red_circle blue_circle small_red_triangle \" +\n                    \"small_red_triangle_down small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond \" +\n                    \"white_square_button black_square_button black_small_square white_small_square black_medium_small_square \" +\n                    \"white_medium_small_square black_medium_square white_medium_square black_large_square white_large_square speaker \" +\n                    \"mute sound loud_sound bell no_bell mega loudspeaker speech_left eye_in_speech_bubble speech_balloon thought_balloon \" +\n                    \"anger_right spades clubs hearts diamonds black_joker flower_playing_cards mahjong clock1 clock2 clock3 clock4 clock5 \" +\n                    \"clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 \" +\n                    \"clock730 clock830 clock930 clock1030 clock1130 clock1230\"\n                },\n\n                flags: {\n                    icon: \"flag_gb\",\n                    title: \"Flags\",\n                    emoji: \"flag_white flag_black checkered_flag triangular_flag_on_post rainbow_flag flag_af flag_ax flag_al flag_dz flag_as \" +\n                    \"flag_ad flag_ao flag_ai flag_aq flag_ag flag_ar flag_am flag_aw flag_au flag_at flag_az flag_bs flag_bh flag_bd flag_bb \" +\n                    \"flag_by flag_be flag_bz flag_bj flag_bm flag_bt flag_bo flag_ba flag_bw flag_br flag_io flag_vg flag_bn flag_bg flag_bf \" +\n                    \"flag_bi flag_kh flag_cm flag_ca flag_ic flag_cv flag_bq flag_ky flag_cf flag_td flag_cl flag_cn flag_cx flag_cc flag_co \" +\n                    \"flag_km flag_cg flag_cd flag_ck flag_cr flag_ci flag_hr flag_cu flag_cw flag_cy flag_cz flag_dk flag_dj flag_dm flag_do \" +\n                    \"flag_ec flag_eg flag_sv flag_gq flag_er flag_ee flag_et flag_eu flag_fk flag_fo flag_fj flag_fi flag_fr flag_gf flag_pf \" +\n                    \"flag_tf flag_ga flag_gm flag_ge flag_de flag_gh flag_gi flag_gr flag_gl flag_gd flag_gp flag_gu flag_gt flag_gg flag_gn \" +\n                    \"flag_gw flag_gy flag_ht flag_hn flag_hk flag_hu flag_is flag_in flag_id flag_ir flag_iq flag_ie flag_im flag_il flag_it \" +\n                    \"flag_jm flag_jp crossed_flags flag_je flag_jo flag_kz flag_ke flag_ki flag_xk flag_kw flag_kg flag_la flag_lv flag_lb \" +\n                    \"flag_ls flag_lr flag_ly flag_li flag_lt flag_lu flag_mo flag_mk flag_mg flag_mw flag_my flag_mv flag_ml flag_mt flag_mh \" +\n                    \"flag_mq flag_mr flag_mu flag_yt flag_mx flag_fm flag_md flag_mc flag_mn flag_me flag_ms flag_ma flag_mz flag_mm flag_na \" +\n                    \"flag_nr flag_np flag_nl flag_nc flag_nz flag_ni flag_ne flag_ng flag_nu flag_nf flag_kp flag_mp flag_no flag_om flag_pk \" +\n                    \"flag_pw flag_ps flag_pa flag_pg flag_py flag_pe flag_ph flag_pn flag_pl flag_pt flag_pr flag_qa flag_re flag_ro flag_ru \" +\n                    \"flag_rw flag_ws flag_sm flag_st flag_sa flag_sn flag_rs flag_sc flag_sl flag_sg flag_sx flag_sk flag_si flag_gs flag_sb \" +\n                    \"flag_so flag_za flag_kr flag_ss flag_es flag_lk flag_bl flag_sh flag_kn flag_lc flag_pm flag_vc flag_sd flag_sr flag_sz \" +\n                    \"flag_se flag_ch flag_sy flag_tw flag_tj flag_tz flag_th flag_tl flag_tg flag_tk flag_to flag_tt flag_tn flag_tr flag_tm \" +\n                    \"flag_tc flag_tv flag_vi flag_ug flag_ua flag_ae flag_gb flag_us flag_uy flag_uz flag_vu flag_va flag_ve flag_vn flag_wf \" +\n                    \"flag_eh flag_ye flag_zm flag_zw flag_ac flag_ta flag_bv flag_hm flag_sj flag_um flag_ea flag_cp flag_dg flag_mf \" +\n                    \"united_nations england scotland wales\"\n                }\n            };\n        } else {\n            defaultOptions.filters = {\n                tones: {\n                    title: \"Diversity\",\n                    emoji: \"santa runner surfer swimmer lifter ear nose point_up_2 point_down point_left point_right punch \" +\n                    \"wave ok_hand thumbsup thumbsdown clap open_hands boy girl man woman cop bride_with_veil person_with_blond_hair \" +\n                    \"man_with_gua_pi_mao man_with_turban older_man grandma baby construction_worker princess angel \" +\n                    \"information_desk_person guardsman dancer nail_care massage haircut muscle spy hand_splayed middle_finger \" +\n                    \"vulcan no_good ok_woman bow raising_hand raised_hands person_frowning person_with_pouting_face pray rowboat \" +\n                    \"bicyclist mountain_bicyclist walking bath metal point_up basketball_player fist raised_hand v writing_hand\"\n                },\n\n                recent: {\n                    icon: \"clock3\",\n                    title: \"Recent\",\n                    emoji: \"\"\n                },\n\n                smileys_people: {\n                    icon: \"yum\",\n                    title: \"Smileys & People\",\n                    emoji: \"grinning grimacing grin joy smiley smile sweat_smile laughing innocent wink blush slight_smile \" +\n                    \"upside_down relaxed yum relieved heart_eyes kissing_heart kissing kissing_smiling_eyes \" +\n                    \"kissing_closed_eyes stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue \" +\n                    \"money_mouth nerd sunglasses hugging smirk no_mouth neutral_face expressionless unamused rolling_eyes \" +\n                    \"thinking flushed disappointed worried angry rage pensive confused slight_frown frowning2 persevere \" +\n                    \"confounded tired_face weary triumph open_mouth scream fearful cold_sweat hushed frowning anguished \" +\n                    \"cry disappointed_relieved sleepy sweat sob dizzy_face astonished zipper_mouth mask thermometer_face \" +\n                    \"head_bandage sleeping zzz poop smiling_imp imp japanese_ogre japanese_goblin skull ghost alien robot \" +\n                    \"smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face \" +\n                    \"pouting_cat raised_hands clap wave thumbsup thumbsdown punch fist v ok_hand raised_hand open_hands \" +\n                    \"muscle pray point_up point_up_2 point_down point_left point_right middle_finger hand_splayed metal \" +\n                    \"vulcan writing_hand nail_care lips tongue ear nose eye eyes bust_in_silhouette busts_in_silhouette \" +\n                    \"speaking_head baby boy girl man woman person_with_blond_hair older_man older_woman man_with_gua_pi_mao \" +\n                    \"man_with_turban cop construction_worker guardsman spy santa angel princess bride_with_veil walking \" +\n                    \"runner dancer dancers couple two_men_holding_hands two_women_holding_hands bow information_desk_person \" +\n                    \"no_good ok_woman raising_hand person_with_pouting_face person_frowning haircut massage couple_with_heart \" +\n                    \"couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg \" +\n                    \"family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb \" +\n                    \"family_mmgg womans_clothes shirt jeans necktie dress bikini kimono lipstick kiss footprints high_heel \" +\n                    \"sandal boot mans_shoe athletic_shoe womans_hat tophat helmet_with_cross mortar_board crown school_satchel \" +\n                    \"pouch purse handbag briefcase eyeglasses dark_sunglasses ring closed_umbrella\"\n                },\n\n                animals_nature: {\n                    icon: \"hamster\",\n                    title: \"Animals & Nature\",\n                    emoji: \"dog cat mouse hamster rabbit bear panda_face koala tiger lion_face cow pig pig_nose frog \" +\n                    \"octopus monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick \" +\n                    \"hatching_chick hatched_chick wolf boar horse unicorn bee bug snail beetle ant spider scorpion crab \" +\n                    \"snake turtle tropical_fish fish blowfish dolphin whale whale2 crocodile leopard tiger2 water_buffalo \" +\n                    \"ox cow2 dromedary_camel camel elephant goat ram sheep racehorse pig2 rat mouse2 rooster turkey dove \" +\n                    \"dog2 poodle cat2 rabbit2 chipmunk feet dragon dragon_face cactus christmas_tree evergreen_tree \" +\n                    \"deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves \" +\n                    \"fallen_leaf maple_leaf ear_of_rice hibiscus sunflower rose tulip blossom cherry_blossom bouquet \" +\n                    \"mushroom chestnut jack_o_lantern shell spider_web earth_americas earth_africa earth_asia full_moon \" +\n                    \"waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon \" +\n                    \"first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face first_quarter_moon_with_face \" +\n                    \"last_quarter_moon_with_face sun_with_face crescent_moon star star2 dizzy sparkles comet sunny \" +\n                    \"white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud cloud cloud_rain \" +\n                    \"thunder_cloud_rain cloud_lightning zap fire boom snowflake cloud_snow snowman2 snowman wind_blowing_face \" +\n                    \"dash cloud_tornado fog umbrella2 umbrella droplet sweat_drops ocean\"\n                },\n\n                food_drink: {\n                    icon: \"pizza\",\n                    title: \"Food & Drink\",\n                    emoji: \"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach \" +\n                    \"pineapple tomato eggplant hot_pepper corn sweet_potato honey_pot bread cheese poultry_leg meat_on_bone \" +\n                    \"fried_shrimp egg hamburger fries hotdog pizza spaghetti taco burrito ramen stew fish_cake sushi bento \" +\n                    \"curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard candy \" +\n                    \"lollipop chocolate_bar popcorn doughnut cookie beer beers wine_glass cocktail tropical_drink champagne \" +\n                    \"sake tea coffee baby_bottle fork_and_knife fork_knife_plate\"\n                },\n\n                activity: {\n                    icon: \"basketball\",\n                    title: \"Activity\",\n                    emoji: \"soccer basketball football baseball tennis volleyball rugby_football 8ball golf golfer ping_pong \" +\n                    \"badminton hockey field_hockey cricket ski skier snowboarder ice_skate bow_and_arrow fishing_pole_and_fish \" +\n                    \"rowboat swimmer surfer bath basketball_player lifter bicyclist mountain_bicyclist horse_racing levitate \" +\n                    \"trophy running_shirt_with_sash medal military_medal reminder_ribbon rosette ticket tickets performing_arts \" +\n                    \"art circus_tent microphone headphones musical_score musical_keyboard saxophone trumpet guitar violin \" +\n                    \"clapper video_game space_invader dart game_die slot_machine bowling\"\n                },\n\n                travel_places: {\n                    icon: \"rocket\",\n                    title: \"Travel & Places\",\n                    emoji: \"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck \" +\n                    \"articulated_lorry tractor motorcycle bike rotating_light oncoming_police_car oncoming_bus \" +\n                    \"oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car \" +\n                    \"train monorail bullettrain_side bullettrain_front light_rail mountain_railway steam_locomotive train2 \" +\n                    \"metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving sailboat \" +\n                    \"motorboat speedboat ferry cruise_ship rocket satellite_orbital seat anchor construction fuelpump busstop \" +\n                    \"vertical_traffic_light traffic_light checkered_flag ship ferris_wheel roller_coaster carousel_horse \" +\n                    \"construction_site foggy tokyo_tower factory fountain rice_scene mountain mountain_snow mount_fuji volcano \" +\n                    \"japan camping tent park motorway railway_track sunrise sunrise_over_mountains desert beach island \" +\n                    \"city_sunset city_dusk cityscape night_with_stars bridge_at_night milky_way stars sparkler fireworks \" +\n                    \"rainbow homes european_castle japanese_castle stadium statue_of_liberty house house_with_garden \" +\n                    \"house_abandoned office department_store post_office european_post_office hospital bank hotel \" +\n                    \"convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine\"\n                },\n\n                objects: {\n                    icon: \"bulb\",\n                    title: \"Objects\",\n                    emoji: \"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick \" +\n                    \"compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector \" +\n                    \"film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs \" +\n                    \"stopwatch timer alarm_clock clock hourglass_flowing_sand hourglass satellite battery electric_plug bulb \" +\n                    \"flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales \" +\n                    \"wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield \" +\n                    \"smoking skull_crossbones coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope \" +\n                    \"hole pill syringe thermometer label bookmark toilet shower bathtub key key2 couch sleeping_accommodation \" +\n                    \"bed door bellhop frame_photo map beach_umbrella moyai shopping_bags balloon flags ribbon gift confetti_ball \" +\n                    \"tada dolls wind_chime crossed_flags izakaya_lantern envelope envelope_with_arrow incoming_envelope e-mail \" +\n                    \"love_letter postbox mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail package postal_horn \" +\n                    \"inbox_tray outbox_tray scroll page_with_curl bookmark_tabs bar_chart chart_with_upwards_trend \" +\n                    \"chart_with_downwards_trend page_facing_up date calendar calendar_spiral card_index card_box ballot_box \" +\n                    \"file_cabinet clipboard notepad_spiral file_folder open_file_folder dividers newspaper2 newspaper notebook \" +\n                    \"closed_book green_book blue_book orange_book notebook_with_decorative_cover ledger books book link \" +\n                    \"paperclip paperclips scissors triangular_ruler straight_ruler pushpin round_pushpin triangular_flag_on_post \" +\n                    \"flag_white flag_black closed_lock_with_key lock unlock lock_with_ink_pen pen_ballpoint pen_fountain \" +\n                    \"black_nib pencil pencil2 crayon paintbrush mag mag_right\"\n                },\n\n                symbols: {\n                    icon: \"heartpulse\",\n                    title: \"Symbols\",\n                    emoji: \"heart yellow_heart green_heart blue_heart purple_heart broken_heart heart_exclamation two_hearts \" +\n                    \"revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross \" +\n                    \"star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross \" +\n                    \"place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn \" +\n                    \"aquarius pisces id atom u7a7a u5272 radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 \" +\n                    \"u7533 u55b6 u6708 eight_pointed_black_star vs accept white_flower ideograph_advantage secret congratulations \" +\n                    \"u5408 u6e80 u7981 a b ab cl o2 sos no_entry name_badge no_entry_sign x o anger hotsprings no_pedestrians \" +\n                    \"do_not_litter no_bicycles non-potable_water underage no_mobile_phones exclamation grey_exclamation question \" +\n                    \"grey_question bangbang interrobang 100 low_brightness high_brightness trident fleur-de-lis part_alternation_mark \" +\n                    \"warning children_crossing beginner recycle u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark \" +\n                    \"white_check_mark diamond_shape_with_a_dot_inside cyclone loop globe_with_meridians m atm sa passport_control \" +\n                    \"customs baggage_claim left_luggage wheelchair no_smoking wc parking potable_water mens womens baby_symbol \" +\n                    \"restroom put_litter_in_its_place cinema signal_strength koko ng ok up cool new free zero one two three four \" +\n                    \"five six seven eight nine ten 1234 arrow_forward pause_button play_pause stop_button record_button track_next \" +\n                    \"track_previous fast_forward rewind twisted_rightwards_arrows repeat repeat_one arrow_backward arrow_up_small \" +\n                    \"arrow_down_small arrow_double_up arrow_double_down arrow_right arrow_left arrow_up arrow_down arrow_upper_right \" +\n                    \"arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrows_counterclockwise \" +\n                    \"arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down hash asterisk information_source \" +\n                    \"abc abcd capital_abcd symbols musical_note notes wavy_dash curly_loop heavy_check_mark arrows_clockwise \" +\n                    \"heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange \" +\n                    \"copyright registered tm end back on top soon ballot_box_with_check radio_button white_circle black_circle \" +\n                    \"red_circle large_blue_circle small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond \" +\n                    \"small_red_triangle black_small_square white_small_square black_large_square white_large_square small_red_triangle_down \" +\n                    \"black_medium_square white_medium_square black_medium_small_square white_medium_small_square black_square_button \" +\n                    \"white_square_button speaker sound loud_sound mute mega loudspeaker bell no_bell black_joker mahjong spades \" +\n                    \"clubs hearts diamonds flower_playing_cards thought_balloon anger_right speech_balloon clock1 clock2 clock3 \" +\n                    \"clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 \" +\n                    \"clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230 eye_in_speech_bubble\"\n                },\n\n                flags: {\n                    icon: \"flag_gb\",\n                    title: \"Flags\",\n                    emoji: \"ac af al dz ad ao ai ag ar am aw au at az bs bh bd bb by be bz bj bm bt bo ba bw br bn bg bf bi \" +\n                    \"cv kh cm ca ky cf td flag_cl cn co km cg flag_cd cr hr cu cy cz dk dj dm do ec eg sv gq er ee et fk fo \" +\n                    \"fj fi fr pf ga gm ge de gh gi gr gl gd gu gt gn gw gy ht hn hk hu is in flag_id ir iq ie il it ci jm jp \" +\n                    \"je jo kz ke ki xk kw kg la lv lb ls lr ly li lt lu mo mk mg mw my mv ml mt mh mr mu mx fm md mc mn me \" +\n                    \"ms ma mz mm na nr np nl nc nz ni ne flag_ng nu kp no om pk pw ps pa pg py pe ph pl pt pr qa ro ru rw \" +\n                    \"sh kn lc vc ws sm st flag_sa sn rs sc sl sg sk si sb so za kr es lk sd sr sz se ch sy tw tj tz th tl \" +\n                    \"tg to tt tn tr flag_tm flag_tm ug ua ae gb us vi uy uz vu va ve vn wf eh ye zm zw re ax ta io bq cx \" +\n                    \"cc gg im yt nf pn bl pm gs tk bv hm sj um ic ea cp dg as aq vg ck cw eu gf tf gp mq mp sx ss tc \"\n                }\n            };\n        };\n\n        return defaultOptions;\n    };\n    function getOptions(options) {\n        var default_options = getDefaultOptions();\n        if (options && options['filters']) {\n            var filters = default_options.filters;\n            $.each(options['filters'], function(filter, data) {\n                if (!isObject(data) || $.isEmptyObject(data)) {\n                    delete filters[filter];\n                    return;\n                }\n                $.each(data, function(key, val) {\n                    filters[filter][key] = val;\n                });\n            });\n            options['filters'] = filters;\n        }\n        return $.extend({}, default_options, options);\n    };\n\n    var saveSelection, restoreSelection;\n    if (window.getSelection && document.createRange) {\n        saveSelection = function(el) {\n            var sel = window.getSelection && window.getSelection();\n            if (sel && sel.rangeCount > 0) {\n                return sel.getRangeAt(0);\n            }\n        };\n\n        restoreSelection = function(el, sel) {\n            var range = document.createRange();\n            range.setStart(sel.startContainer, sel.startOffset);\n            range.setEnd(sel.endContainer, sel.endOffset)\n\n            sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(range);\n        }\n    } else if (document.selection && document.body.createTextRange) {\n        saveSelection = function(el) {\n            return document.selection.createRange();\n        };\n\n        restoreSelection = function(el, sel) {\n            var textRange = document.body.createTextRange();\n            textRange.moveToElementText(el);\n            textRange.setStart(sel.startContanier, sel.startOffset);\n            textRange.setEnd(sel.endContainer, sel.endOffset);\n            textRange.select();\n        };\n    }\n\n\n    var uniRegexp;\n    function unicodeTo(str, template) {\n        return str.replace(uniRegexp, function(unicodeChar) {\n            var map = emojione[(emojioneSupportMode === 0 ? 'jsecapeMap' : 'jsEscapeMap')];\n            if (typeof unicodeChar !== 'undefined' && unicodeChar in map) {\n                return getTemplate(template, map[unicodeChar], emojione.toShort(unicodeChar));\n            }\n            return unicodeChar;\n        });\n    }\n    function htmlFromText(str, self) {\n        str = str\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#x27;')\n            .replace(/`/g, '&#x60;')\n            .replace(/(?:\\r\\n|\\r|\\n)/g, '\\n')\n            .replace(/(\\n+)/g, '<div>$1</div>')\n            .replace(/\\n/g, '<br/>')\n            .replace(/<br\\/><\\/div>/g, '</div>');\n        if (self.shortnames) {\n            str = emojione.shortnameToUnicode(str);\n        }\n        return unicodeTo(str, self.emojiTemplate)\n            .replace(/\\t/g, '&nbsp;&nbsp;&nbsp;&nbsp;')\n            .replace(/  /g, '&nbsp;&nbsp;');\n    }\n    function textFromHtml(str, self) {\n        str = str\n            .replace(/&#10;/g, '\\n')\n            .replace(/&#09;/g, '\\t')\n            .replace(/<img[^>]*alt=\"([^\"]+)\"[^>]*>/ig, '$1')\n            .replace(/\\n|\\r/g, '')\n            .replace(/<br[^>]*>/ig, '\\n')\n            .replace(/(?:<(?:div|p|ol|ul|li|pre|code|object)[^>]*>)+/ig, '<div>')\n            .replace(/(?:<\\/(?:div|p|ol|ul|li|pre|code|object)>)+/ig, '</div>')\n            .replace(/\\n<div><\\/div>/ig, '\\n')\n            .replace(/<div><\\/div>\\n/ig, '\\n')\n            .replace(/(?:<div>)+<\\/div>/ig, '\\n')\n            .replace(/([^\\n])<\\/div><div>/ig, '$1\\n')\n            .replace(/(?:<\\/div>)+/ig, '</div>')\n            .replace(/([^\\n])<\\/div>([^\\n])/ig, '$1\\n$2')\n            .replace(/<\\/div>/ig, '')\n            .replace(/([^\\n])<div>/ig, '$1\\n')\n            .replace(/\\n<div>/ig, '\\n')\n            .replace(/<div>\\n/ig, '\\n\\n')\n            .replace(/<(?:[^>]+)?>/g, '')\n            .replace(new RegExp(invisibleChar, 'g'), '')\n            .replace(/&nbsp;/g, ' ')\n            .replace(/&lt;/g, '<')\n            .replace(/&gt;/g, '>')\n            .replace(/&quot;/g, '\"')\n            .replace(/&#x27;/g, \"'\")\n            .replace(/&#x60;/g, '`')\n            .replace(/&#60;/g, '<')\n            .replace(/&#62;/g, '>')\n            .replace(/&amp;/g, '&');\n\n        switch (self.saveEmojisAs) {\n            case 'image':\n                str = unicodeTo(str, self.emojiTemplate);\n                break;\n            case 'shortname':\n                str = emojione.toShort(str);\n        }\n        return str;\n    }\n    function calcButtonPosition() {\n        var self = this,\n            offset = self.editor[0].offsetWidth - self.editor[0].clientWidth,\n            current = parseInt(self.button.css('marginRight'));\n        if (current !== offset) {\n            self.button.css({marginRight: offset});\n            if (self.floatingPicker) {\n                self.picker.css({right: parseInt(self.picker.css('right')) - current + offset});\n            }\n        }\n    }\n    function lazyLoading() {\n        var self = this;\n        if (!self.sprite && self.lasyEmoji[0] && self.lasyEmoji.eq(0).is(\".lazy-emoji\")) {\n            var pickerTop = self.picker.offset().top,\n                pickerBottom = pickerTop + self.picker.height() + 20;\n\n            self.lasyEmoji.each(function() {\n                var e = $(this), top = e.offset().top;\n\n                if (top > pickerTop && top < pickerBottom) {\n                    e.attr(\"src\", e.data(\"src\")).removeClass(\"lazy-emoji\");\n                }\n\n                if (top > pickerBottom) {\n                    return false;\n                }\n            });\n            self.lasyEmoji = self.lasyEmoji.filter(\".lazy-emoji\");\n        }\n    };\n    function selector (prefix, skip_dot) {\n        return (skip_dot ? '' : '.') + css_class + (prefix ? (\"-\" + prefix) : \"\");\n    }\n    function div(prefix) {\n        var parent = $('<div/>', isObject(prefix) ? prefix : {\"class\" : selector(prefix, true)});\n        $.each(slice.call(arguments).slice(1), function(i, child) {\n            if ($.isFunction(child)) {\n                child = child.call(parent);\n            }\n            if (child) {\n                $(child).appendTo(parent);\n            }\n        });\n        return parent;\n    }\n    function getRecent () {\n        return localStorage.getItem(\"recent_emojis\") || \"\";\n    }\n    function updateRecent(self, show) {\n        var emojis = getRecent();\n        if (!self.recent || self.recent !== emojis || show) {\n            if (emojis.length) {\n                var skinnable = self.scrollArea.is(\".skinnable\"),\n                    scrollTop, height;\n\n                if (!skinnable) {\n                    scrollTop = self.scrollArea.scrollTop();\n                    if (show) {\n                        self.recentCategory.show();\n                    }\n                    height = self.recentCategory.is(\":visible\") ? self.recentCategory.height() : 0;\n                }\n\n                var items = shortnameTo(emojis, self.emojiBtnTemplate, true).split('|').join('');\n                self.recentCategory.children(\".emojibtn\").remove();\n                $(items).insertAfter(self.recentCategory.children(\".emojionearea-category-title\"));\n\n\n                self.recentCategory.children(\".emojibtn\").on(\"click\", function() {\n                    self.trigger(\"emojibtn.click\", $(this));\n                });\n\n                self.recentFilter.show();\n\n                if (!skinnable) {\n                    self.recentCategory.show();\n\n                    var height2 = self.recentCategory.height();\n\n                    if (height !== height2) {\n                        self.scrollArea.scrollTop(scrollTop + height2 - height);\n                    }\n                }\n            } else {\n                if (self.recentFilter.hasClass(\"active\")) {\n                    self.recentFilter.removeClass(\"active\").next().addClass(\"active\");\n                }\n                self.recentCategory.hide();\n                self.recentFilter.hide();\n            }\n            self.recent = emojis;\n        }\n    };\n    function setRecent(self, emoji) {\n        var recent = getRecent();\n        var emojis = recent.split(\"|\");\n\n        var index = emojis.indexOf(emoji);\n        if (index !== -1) {\n            emojis.splice(index, 1);\n        }\n        emojis.unshift(emoji);\n\n        if (emojis.length > 9) {\n            emojis.pop();\n        }\n\n        localStorage.setItem(\"recent_emojis\", emojis.join(\"|\"));\n\n        updateRecent(self);\n    };\n// see https://github.com/Modernizr/Modernizr/blob/master/feature-detects/storage/localstorage.js\n    function supportsLocalStorage () {\n        var test = 'test';\n        try {\n            localStorage.setItem(test, test);\n            localStorage.removeItem(test);\n            return true;\n        } catch(e) {\n            return false;\n        }\n    }\n    function init(self, source, options) {\n        //calcElapsedTime('init', function() {\n        self.options = options = getOptions(options);\n        self.sprite = options.sprite && emojioneSupportMode < 3;\n        self.inline = options.inline === null ? source.is(\"INPUT\") : options.inline;\n        self.shortnames = options.shortnames;\n        self.saveEmojisAs = options.saveEmojisAs;\n        self.standalone = options.standalone;\n        self.emojiTemplate = '<img alt=\"{alt}\" class=\"emojione' + (self.sprite ? '-{uni}\" src=\"' + blankImg + '\"/>' : 'emoji\" src=\"{img}\"/>');\n        self.emojiTemplateAlt = self.sprite ? '<i class=\"emojione-{uni}\"/>' : '<img class=\"emojioneemoji\" src=\"{img}\"/>';\n        self.emojiBtnTemplate = '<i class=\"emojibtn\" role=\"button\" data-name=\"{name}\" title=\"{friendlyName}\">' + self.emojiTemplateAlt + '</i>';\n        self.recentEmojis = options.recentEmojis && supportsLocalStorage();\n\n        var pickerPosition = options.pickerPosition;\n        self.floatingPicker = pickerPosition === 'top' || pickerPosition === 'bottom';\n        self.source = source;\n\n        if (source.is(\":disabled\") || source.is(\".disabled\")) {\n            self.disable();\n        }\n\n        var sourceValFunc = source.is(\"TEXTAREA\") || source.is(\"INPUT\") ? \"val\" : \"text\",\n            editor, button, picker, filters, filtersBtns, searchPanel, emojisList, categories, categoryBlocks, scrollArea,\n            tones = div('tones',\n                options.tones ?\n                    function() {\n                        this.addClass(selector('tones-' + options.tonesStyle, true));\n                        for (var i = 0; i <= 5; i++) {\n                            this.append($(\"<i/>\", {\n                                \"class\": \"btn-tone btn-tone-\" + i + (!i ? \" active\" : \"\"),\n                                \"data-skin\": i,\n                                role: \"button\"\n                            }));\n                        }\n                    } : null\n            ),\n            app = div({\n                \"class\" : css_class + ((self.standalone) ? \" \" + css_class + \"-standalone \" : \" \") + (source.attr(\"class\") || \"\"),\n                role: \"application\"\n            },\n            editor = self.editor = div(\"editor\").attr({\n                contenteditable: (self.standalone) ? false : true,\n                placeholder: options.placeholder || source.data(\"placeholder\") || source.attr(\"placeholder\") || \"\",\n                tabindex: 0\n            }),\n            button = self.button = div('button',\n                div('button-open'),\n                div('button-close')\n            ).attr('title', options.buttonTitle),\n            picker = self.picker = div('picker',\n                div('wrapper',\n                    filters = div('filters'),\n                    (options.search ?\n                        searchPanel = div('search-panel',\n                            div('search',\n                                options.search ?\n                                function() {\n                                    self.search = $(\"<input/>\", {\n                                        \"placeholder\": options.searchPlaceholder || \"\",\n                                        \"type\": \"text\",\n                                        \"class\": \"search\"\n                                    });\n                                    this.append(self.search);\n                                } : null\n                            ),\n                            tones\n                        ) : null\n                    ),\n                    scrollArea = div('scroll-area',\n                        options.tones && !options.search ? div('tones-panel',\n                            tones\n                        ) : null,\n                        emojisList = div('emojis-list')\n                    )\n                )\n            ).addClass(selector('picker-position-' + options.pickerPosition, true))\n             .addClass(selector('filters-position-' + options.filtersPosition, true))\n             .addClass(selector('search-position-' + options.searchPosition, true))\n             .addClass('hidden')\n        );\n\n        if (options.search) {\n            searchPanel.addClass(selector('with-search', true));\n        }\n\n        self.searchSel = null;\n\n        editor.data(source.data());\n\n        $.each(options.attributes, function(attr, value) {\n            editor.attr(attr, value);\n        });\n\n        var mainBlock = div('category-block').attr({\"data-tone\": 0}).prependTo(emojisList);\n\n        $.each(options.filters, function(filter, params) {\n            var skin = 0;\n            if (filter === 'recent' && !self.recentEmojis) {\n                return;\n            }\n            if (filter !== 'tones') {\n                $(\"<i/>\", {\n                    \"class\": selector(\"filter\", true) + \" \" + selector(\"filter-\" + filter, true),\n                    \"data-filter\": filter,\n                    title: params.title\n                })\n                .wrapInner(shortnameTo(params.icon, self.emojiTemplateAlt))\n                .appendTo(filters);\n            } else if (options.tones) {\n                skin = 5;\n            } else {\n                return;\n            }\n\n            do {\n                var category,\n                    items = params.emoji.replace(/[\\s,;]+/g, '|');\n\n                if (skin === 0) {\n                    category = div('category').attr({\n                        name: filter,\n                        \"data-tone\": skin\n                    }).appendTo(mainBlock);\n                } else {\n                    category = div('category-block').attr({\n                        name: filter,\n                        \"data-tone\": skin\n                    }).appendTo(emojisList);\n                }\n\n                if (skin > 0) {\n                    category.hide();\n                    items = items.split('|').join('_tone' + skin + '|') + '_tone' + skin;\n                }\n\n                if (filter === 'recent') {\n                    items = getRecent();\n                }\n\n                items = shortnameTo(items,\n                    self.sprite ?\n                        '<i class=\"emojibtn\" role=\"button\" data-name=\"{name}\" title=\"{friendlyName}\"><i class=\"emojione-{uni}\"></i></i>' :\n                        '<i class=\"emojibtn\" role=\"button\" data-name=\"{name}\" title=\"{friendlyName}\"><img class=\"emojioneemoji lazy-emoji\" data-src=\"{img}\"/></i>',\n                    true).split('|').join('');\n\n                category.html(items);\n                $('<div class=\"emojionearea-category-title\"/>').text(params.title).prependTo(category);\n            } while (--skin > 0);\n        });\n\n        options.filters = null;\n        if (!self.sprite) {\n            self.lasyEmoji = emojisList.find(\".lazy-emoji\");\n        }\n\n        filtersBtns = filters.find(selector(\"filter\"));\n        filtersBtns.eq(0).addClass(\"active\");\n        categoryBlocks = emojisList.find(selector(\"category-block\"))\n        categories = emojisList.find(selector(\"category\"))\n\n        self.recentFilter = filtersBtns.filter('[data-filter=\"recent\"]');\n        self.recentCategory = categories.filter(\"[name=recent]\");\n\n        self.scrollArea = scrollArea;\n\n        if (options.container) {\n            $(options.container).wrapInner(app);\n        } else {\n            app.insertAfter(source);\n        }\n\n        if (options.hideSource) {\n            source.hide();\n        }\n\n        self.setText(source[sourceValFunc]());\n        source[sourceValFunc](self.getText());\n        calcButtonPosition.apply(self);\n\n        // if in standalone mode and no value is set, initialise with a placeholder\n        if (self.standalone && !self.getText().length) {\n            var placeholder = $(source).data(\"emoji-placeholder\") || options.emojiPlaceholder;\n            self.setText(placeholder);\n            editor.addClass(\"has-placeholder\");\n        }\n\n        // attach() must be called before any .on() methods !!!\n        // 1) attach() stores events into possibleEvents{},\n        // 2) .on() calls bindEvent() and stores handlers into eventStorage{},\n        // 3) bindEvent() finds events in possibleEvents{} and bind founded via jQuery.on()\n        // 4) attached events via jQuery.on() calls trigger()\n        // 5) trigger() calls handlers stored into eventStorage{}\n\n        attach(self, emojisList.find(\".emojibtn\"), {click: \"emojibtn.click\"});\n        attach(self, window, {resize: \"!resize\"});\n        attach(self, tones.children(), {click: \"tone.click\"});\n        attach(self, [picker, button], {mousedown: \"!mousedown\"}, editor);\n        attach(self, button, {click: \"button.click\"});\n        attach(self, editor, {paste :\"!paste\"}, editor);\n        attach(self, editor, [\"focus\", \"blur\"], function() { return self.stayFocused ? false : editor; } );\n        attach(self, picker, {mousedown: \"picker.mousedown\", mouseup: \"picker.mouseup\", click: \"picker.click\",\n            keyup: \"picker.keyup\", keydown: \"picker.keydown\", keypress: \"picker.keypress\"});\n        attach(self, editor, [\"mousedown\", \"mouseup\", \"click\", \"keyup\", \"keydown\", \"keypress\"]);\n        attach(self, picker.find(\".emojionearea-filter\"), {click: \"filter.click\"});\n        attach(self, source, {change: \"source.change\"});\n\n        if (options.search) {\n            attach(self, self.search, {keyup: \"search.keypress\", focus: \"search.focus\", blur: \"search.blur\"});\n        }\n\n        var noListenScroll = false;\n        scrollArea.on('scroll', function () {\n            if (!noListenScroll) {\n                lazyLoading.call(self);\n                if (scrollArea.is(\":not(.skinnable)\")) {\n                    var item = categories.eq(0), scrollTop = scrollArea.offset().top;\n                    categories.each(function (i, e) {\n                        if ($(e).offset().top - scrollTop >= 10) {\n                            return false;\n                        }\n                        item = $(e);\n                    });\n                    var filter = filtersBtns.filter('[data-filter=\"' + item.attr(\"name\") + '\"]');\n                    if (filter[0] && !filter.is(\".active\")) {\n                        filtersBtns.removeClass(\"active\");\n                        filter.addClass(\"active\");\n                    }\n                }\n            }\n        });\n\n        self.on(\"@filter.click\", function(filter) {\n            var isActive = filter.is(\".active\");\n            if (scrollArea.is(\".skinnable\")) {\n                if (isActive) return;\n                tones.children().eq(0).click();\n            }\n            noListenScroll = true;\n            if (!isActive) {\n                filtersBtns.filter(\".active\").removeClass(\"active\");\n                filter.addClass(\"active\");\n            }\n            var headerOffset = categories.filter('[name=\"' + filter.data('filter') + '\"]').offset().top,\n                scroll = scrollArea.scrollTop(),\n                offsetTop = scrollArea.offset().top;\n\n            scrollArea.stop().animate({\n                scrollTop: headerOffset + scroll - offsetTop - 2\n            }, 200, 'swing', function () {\n                lazyLoading.call(self);\n                noListenScroll = false;\n            });\n        })\n\n        .on(\"@picker.show\", function() {\n            if (self.recentEmojis) {\n                updateRecent(self);\n            }\n            lazyLoading.call(self);\n        })\n\n        .on(\"@tone.click\", function(tone) {\n            tones.children().removeClass(\"active\");\n            var skin = tone.addClass(\"active\").data(\"skin\");\n            if (skin) {\n                scrollArea.addClass(\"skinnable\");\n                categoryBlocks.hide().filter(\"[data-tone=\" + skin + \"]\").show();\n                filtersBtns.removeClass(\"active\");//.not('[data-filter=\"recent\"]').eq(0).addClass(\"active\");\n            } else {\n                scrollArea.removeClass(\"skinnable\");\n                categoryBlocks.hide().filter(\"[data-tone=0]\").show();\n                filtersBtns.eq(0).click();\n            }\n            lazyLoading.call(self);\n            if (options.search) {\n                self.trigger('search.keypress');\n            }\n        })\n\n        .on(\"@button.click\", function(button) {\n            if (button.is(\".active\")) {\n                self.hidePicker();\n            } else {\n                self.showPicker();\n                self.searchSel = null;\n            }\n        })\n\n        .on(\"@!paste\", function(editor, event) {\n\n            var pasteText = function(text) {\n                var caretID = \"caret-\" + (new Date()).getTime();\n                var html = htmlFromText(text, self);\n                pasteHtmlAtCaret(html);\n                pasteHtmlAtCaret('<i id=\"' + caretID +'\"></i>');\n                editor.scrollTop(editorScrollTop);\n                var caret = $(\"#\" + caretID),\n                    top = caret.offset().top - editor.offset().top,\n                    height = editor.height();\n                if (editorScrollTop + top >= height || editorScrollTop > top) {\n                    editor.scrollTop(editorScrollTop + top - 2 * height/3);\n                }\n                caret.remove();\n                self.stayFocused = false;\n                calcButtonPosition.apply(self);\n                trigger(self, 'paste', [editor, text, html]);\n            };\n\n            if (event.originalEvent.clipboardData) {\n                var text = event.originalEvent.clipboardData.getData('text/plain');\n                pasteText(text);\n\n                if (event.preventDefault){\n                    event.preventDefault();\n                } else {\n                    event.stop();\n                }\n\n                event.returnValue = false;\n                event.stopPropagation();\n                return false;\n            }\n\n            self.stayFocused = true;\n            // insert invisible character for fix caret position\n            pasteHtmlAtCaret('<span>' + invisibleChar + '</span>');\n\n            var sel = saveSelection(editor[0]),\n                editorScrollTop = editor.scrollTop(),\n                clipboard = $(\"<div/>\", {contenteditable: true})\n                    .css({position: \"fixed\", left: \"-999px\", width: \"1px\", height: \"1px\", top: \"20px\", overflow: \"hidden\"})\n                    .appendTo($(\"BODY\"))\n                    .focus();\n\n            window.setTimeout(function() {\n                editor.focus();\n                restoreSelection(editor[0], sel);\n                var text = textFromHtml(clipboard.html().replace(/\\r\\n|\\n|\\r/g, '<br>'), self);\n                clipboard.remove();\n                pasteText(text);\n            }, 200);\n        })\n\n        .on(\"@emojibtn.click\", function(emojibtn) {\n            editor.removeClass(\"has-placeholder\");\n\n            if (self.searchSel !== null) {\n                editor.focus();\n                restoreSelection(editor[0], self.searchSel);\n                self.searchSel = null;\n            }\n\n            if (self.standalone) {\n                editor.html(shortnameTo(emojibtn.data(\"name\"), self.emojiTemplate));\n                self.trigger(\"blur\");\n            } else {\n                saveSelection(editor[0]);\n                pasteHtmlAtCaret(shortnameTo(emojibtn.data(\"name\"), self.emojiTemplate));\n            }\n\n            if (self.recentEmojis) {\n                setRecent(self, emojibtn.data(\"name\"));\n            }\n\n            // self.search.val('').trigger(\"change\");\n            self.trigger('search.keypress');\n        })\n\n        .on(\"@!resize @keyup @emojibtn.click\", calcButtonPosition)\n\n        .on(\"@!mousedown\", function(editor, event) {\n            if ($(event.target).hasClass('search')) {\n                // Allow search clicks\n                self.stayFocused = true;\n                if (self.searchSel === null) {\n                    self.searchSel = saveSelection(editor[0]);\n                }\n            } else {\n                if (!app.is(\".focused\")) {\n                    editor.trigger(\"focus\");\n                }\n                event.preventDefault();\n            }\n            return false;\n        })\n\n        .on(\"@change\", function() {\n            var html = self.editor.html().replace(/<\\/?(?:div|span|p)[^>]*>/ig, '');\n            // clear input: chrome adds <br> when contenteditable is empty\n            if (!html.length || /^<br[^>]*>$/i.test(html)) {\n                self.editor.html(self.content = '');\n            }\n            source[sourceValFunc](self.getText());\n        })\n\n        .on(\"@source.change\", function() {\n            self.setText(source[sourceValFunc]());\n            trigger('change');\n        })\n\n        .on(\"@focus\", function() {\n            app.addClass(\"focused\");\n        })\n\n        .on(\"@blur\", function() {\n            app.removeClass(\"focused\");\n\n            if (options.hidePickerOnBlur) {\n                self.hidePicker();\n            }\n\n            var content = self.editor.html();\n            if (self.content !== content) {\n                self.content = content;\n                trigger(self, 'change', [self.editor]);\n                source.trigger(\"blur\").trigger(\"change\");\n            } else {\n                source.trigger(\"blur\");\n            }\n\n            if (options.search) {\n                self.search.val('');\n                self.trigger('search.keypress', true);\n            }\n        });\n\n        if (options.search) {\n            self.on(\"@search.focus\", function() {\n                self.stayFocused = true;\n                self.search.addClass(\"focused\");\n            })\n\n            .on(\"@search.keypress\", function(hide) {\n                var filterBtns = picker.find(\".emojionearea-filter\");\n                var activeTone = (options.tones ? tones.find(\"i.active\").data(\"skin\") : 0);\n                var term = self.search.val().replace( / /g, \"_\" ).replace(/\"/g, \"\\\\\\\"\");\n\n                if (term && term.length) {\n                    if (self.recentFilter.hasClass(\"active\")) {\n                        self.recentFilter.removeClass(\"active\").next().addClass(\"active\");\n                    }\n\n                    self.recentCategory.hide();\n                    self.recentFilter.hide();\n\n                    categoryBlocks.each(function() {\n                        var matchEmojis = function(category, activeTone) {\n                            var $matched = category.find('.emojibtn[data-name*=\"' + term + '\"]');\n                            if ($matched.length === 0) {\n                                if (category.data('tone') === activeTone) {\n                                    category.hide();\n                                }\n                                filterBtns.filter('[data-filter=\"' + category.attr('name') + '\"]').hide();\n                            } else {\n                                var $notMatched = category.find('.emojibtn:not([data-name*=\"' + term + '\"])');\n                                $notMatched.hide();\n\n                                $matched.show();\n\n                                if (category.data('tone') === activeTone) {\n                                    category.show();\n                                }\n\n                                filterBtns.filter('[data-filter=\"' + category.attr('name') + '\"]').show();\n                            }\n                        }\n\n                        var $block = $(this);\n                        if ($block.data('tone') === 0) {\n                            categories.filter(':not([name=\"recent\"])').each(function() {\n                                matchEmojis($(this), 0);\n                            })\n                        } else {\n                            matchEmojis($block, activeTone);\n                        }\n                    });\n                    if (!noListenScroll) {\n                        scrollArea.trigger('scroll');\n                    } else {\n                        lazyLoading.call(self);\n                    }\n                } else {\n                    updateRecent(self, true);\n                    categoryBlocks.filter('[data-tone=\"' + tones.find(\"i.active\").data(\"skin\") + '\"]:not([name=\"recent\"])').show();\n                    $('.emojibtn', categoryBlocks).show();\n                    filterBtns.show();\n                    lazyLoading.call(self);\n                }\n            })\n\n            .on(\"@search.blur\", function() {\n                self.stayFocused = false;\n                self.search.removeClass(\"focused\");\n                self.trigger(\"blur\");\n            });\n        }\n\n        if (options.shortcuts) {\n            self.on(\"@keydown\", function(_, e) {\n                if (!e.ctrlKey) {\n                    if (e.which == 9) {\n                        e.preventDefault();\n                        button.click();\n                    }\n                    else if (e.which == 27) {\n                        e.preventDefault();\n                        if (button.is(\".active\")) {\n                            self.hidePicker();\n                        }\n                    }\n                }\n            });\n        }\n\n        if (isObject(options.events) && !$.isEmptyObject(options.events)) {\n            $.each(options.events, function(event, handler) {\n                self.on(event.replace(/_/g, '.'), handler);\n            });\n        }\n\n        if (options.autocomplete) {\n            var autocomplete = function() {\n                var textcompleteOptions = {\n                    maxCount: options.textcomplete.maxCount,\n                    placement: options.textcomplete.placement\n                };\n\n                if (options.shortcuts) {\n                    textcompleteOptions.onKeydown = function (e, commands) {\n                        if (!e.ctrlKey && e.which == 13) {\n                            return commands.KEY_ENTER;\n                        }\n                    };\n                }\n\n                var map = $.map(emojione.emojioneList, function (_, emoji) {\n                    return !options.autocompleteTones ? /_tone[12345]/.test(emoji) ? null : emoji : emoji;\n                });\n                map.sort();\n                editor.textcomplete([\n                    {\n                        id: css_class,\n                        match: /\\B(:[\\-+\\w]*)$/,\n                        search: function (term, callback) {\n                            callback($.map(map, function (emoji) {\n                                return emoji.indexOf(term) === 0 ? emoji : null;\n                            }));\n                        },\n                        template: function (value) {\n                            return shortnameTo(value, self.emojiTemplate) + \" \" + value.replace(/:/g, '');\n                        },\n                        replace: function (value) {\n                            return shortnameTo(value, self.emojiTemplate);\n                        },\n                        cache: true,\n                        index: 1\n                    }\n                ], textcompleteOptions);\n\n                if (options.textcomplete.placement) {\n                    // Enable correct positioning for textcomplete\n                    if ($(editor.data('textComplete').option.appendTo).css(\"position\") == \"static\") {\n                        $(editor.data('textComplete').option.appendTo).css(\"position\", \"relative\");\n                    }\n                }\n            };\n\n            var initAutocomplete = function() {\n                if (self.disabled) {\n                    var enable = function () {\n                        self.off('enabled', enable);\n                        autocomplete();\n                    };\n                    self.on('enabled', enable);\n                } else {\n                    autocomplete();\n                }\n            }\n\n            if ($.fn.textcomplete) {\n                initAutocomplete();\n            } else {\n                $.ajax({\n                    url: \"https://cdn.rawgit.com/yuku-t/jquery-textcomplete/v1.3.4/dist/jquery.textcomplete.js\",\n                    dataType: \"script\",\n                    cache: true,\n                    success: initAutocomplete\n                });\n            }\n        }\n\n        if (self.inline) {\n            app.addClass(selector('inline', true));\n            self.on(\"@keydown\", function(_, e) {\n                if (e.which == 13) {\n                    e.preventDefault();\n                }\n            });\n        }\n\n        if (/firefox/i.test(navigator.userAgent)) {\n            // disabling resize images on Firefox\n            document.execCommand(\"enableObjectResizing\", false, false);\n        }\n\n        self.isReady = true;\n        self.trigger(\"onLoad\", editor);\n        self.trigger(\"ready\", editor);\n        //}, self.id === 1); // calcElapsedTime()\n    };\n    var cdn = {\n        defaultBase: \"https://cdnjs.cloudflare.com/ajax/libs/emojione/\",\n        defaultBase3: \"https://cdn.jsdelivr.net/\",\n        base: null,\n        isLoading: false\n    };\n    function loadEmojione(options) {\n        var emojioneVersion = getEmojioneVersion()\n        options = getOptions(options);\n\n        if (!cdn.isLoading) {\n            if (!emojione || getSupportMode(detectVersion(emojione)) < 2) {\n                cdn.isLoading = true;\n                var emojioneJsCdnUrlBase;\n                if (getSupportMode(emojioneVersion) > 5) {\n                    emojioneJsCdnUrlBase = cdn.defaultBase3 + \"npm/emojione@\" + emojioneVersion;\n                } else if (getSupportMode(emojioneVersion) > 4) {\n                    emojioneJsCdnUrlBase = cdn.defaultBase3 + \"emojione/\" + emojioneVersion;\n                } else {\n                    emojioneJsCdnUrlBase = cdn.defaultBase + \"/\" + emojioneVersion;\n                }\n\n                $.ajax({\n                    url: emojioneJsCdnUrlBase + \"/lib/js/emojione.min.js\",\n                    dataType: \"script\",\n                    cache: true,\n                    success: function () {\n                        emojione = window.emojione;\n                        emojioneVersion = detectVersion(emojione);\n                        emojioneSupportMode = getSupportMode(emojioneVersion);\n                        var sprite;\n                        if (emojioneSupportMode > 4) {\n                            cdn.base = cdn.defaultBase3 + \"emojione/assets/\" + emojioneVersion;\n                            sprite = cdn.base + \"/sprites/emojione-sprite-\" + emojione.emojiSize + \".css\";\n                        } else {\n                            cdn.base = cdn.defaultBase + emojioneVersion + \"/assets\";\n                            sprite = cdn.base + \"/sprites/emojione.sprites.css\";\n                        }\n                        if (options.sprite) {\n                            if (document.createStyleSheet) {\n                                document.createStyleSheet(sprite);\n                            } else {\n                                $('<link/>', {rel: 'stylesheet', href: sprite}).appendTo('head');\n                            }\n                        }\n                        while (readyCallbacks.length) {\n                            readyCallbacks.shift().call();\n                        }\n                        cdn.isLoading = false;\n                    }\n                });\n            } else {\n                emojioneVersion = detectVersion(emojione);\n                emojioneSupportMode = getSupportMode(emojioneVersion);\n                if (emojioneSupportMode > 4) {\n                    cdn.base = cdn.defaultBase3 + \"emojione/assets/\" + emojioneVersion;\n                } else {\n                    cdn.base = cdn.defaultBase + emojioneVersion + \"/assets\";\n                }\n            }\n        }\n\n        emojioneReady(function() {\n            var emojiSize = \"\";\n            if (options.useInternalCDN) {\n                if (emojioneSupportMode > 4) emojiSize = emojione.emojiSize + \"/\";\n\n                emojione.imagePathPNG = cdn.base + \"/png/\" + emojiSize;\n                emojione.imagePathSVG = cdn.base + \"/svg/\" + emojiSize;\n                emojione.imagePathSVGSprites = cdn.base + \"/sprites/emojione.sprites.svg\";\n                emojione.imageType = options.imageType;\n            }\n            if (getSupportMode(emojioneVersion) > 4) {\n                uniRegexp = emojione.regUnicode;\n                emojione.imageType = options.imageType || \"png\";\n            } else {\n                uniRegexp = new RegExp(\"<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(\" + emojione.unicodeRegexp + \")\", \"gi\");\n            }\n        });\n    };\n    var EmojioneArea = function(element, options) {\n        var self = this;\n        loadEmojione(options);\n        eventStorage[self.id = ++unique] = {};\n        possibleEvents[self.id] = {};\n        emojioneReady(function() {\n            init(self, element, options);\n        });\n    };\n    function bindEvent(self, event) {\n        event = event.replace(/^@/, '');\n        var id = self.id;\n        if (possibleEvents[id][event]) {\n            $.each(possibleEvents[id][event], function(i, ev) {\n                // ev[0] = element\n                // ev[1] = event\n                // ev[2] = target\n                $.each($.isArray(ev[0]) ? ev[0] : [ev[0]], function(i, el) {\n                    $(el).on(ev[1], function() {\n                        var args = slice.call(arguments),\n                            target = $.isFunction(ev[2]) ? ev[2].apply(self, [event].concat(args)) : ev[2];\n                        if (target) {\n                            trigger(self, event, [target].concat(args));\n                        }\n                    });\n                });\n            });\n            possibleEvents[id][event] = null;\n        }\n    }\n\n    EmojioneArea.prototype.on = function(events, handler) {\n        if (events && $.isFunction(handler)) {\n            var self = this;\n            $.each(events.toLowerCase().split(' '), function(i, event) {\n                bindEvent(self, event);\n                (eventStorage[self.id][event] || (eventStorage[self.id][event] = [])).push(handler);\n            });\n        }\n        return this;\n    };\n\n    EmojioneArea.prototype.off = function(events, handler) {\n        if (events) {\n            var id = this.id;\n            $.each(events.toLowerCase().replace(/_/g, '.').split(' '), function(i, event) {\n                if (eventStorage[id][event] && !/^@/.test(event)) {\n                    if (handler) {\n                        $.each(eventStorage[id][event], function(j, fn) {\n                            if (fn === handler) {\n                                eventStorage[id][event].splice(j, 1);\n                            }\n                        });\n                    } else {\n                        eventStorage[id][event] = [];\n                    }\n                }\n            });\n        }\n        return this;\n    };\n\n    EmojioneArea.prototype.trigger = function() {\n        var args = slice.call(arguments),\n            call_args = [this].concat(args.slice(0,1));\n        call_args.push(args.slice(1));\n        return trigger.apply(this, call_args);\n    };\n\n    EmojioneArea.prototype.setFocus = function () {\n        var self = this;\n        emojioneReady(function () {\n            self.editor.focus();\n        });\n        return self;\n    };\n\n    EmojioneArea.prototype.setText = function (str) {\n        var self = this;\n        emojioneReady(function () {\n            self.editor.html(htmlFromText(str, self));\n            self.content = self.editor.html();\n            trigger(self, 'change', [self.editor]);\n            calcButtonPosition.apply(self);\n        });\n        return self;\n    }\n\n    EmojioneArea.prototype.getText = function() {\n        return textFromHtml(this.editor.html(), this);\n    }\n\n    EmojioneArea.prototype.showPicker = function () {\n        var self = this;\n        if (self._sh_timer) {\n            window.clearTimeout(self._sh_timer);\n        }\n        self.picker.removeClass(\"hidden\");\n        self._sh_timer =  window.setTimeout(function() {\n            self.button.addClass(\"active\");\n        }, 50);\n        trigger(self, \"picker.show\", [self.picker]);\n        return self;\n    }\n\n    EmojioneArea.prototype.hidePicker = function () {\n        var self = this;\n        if (self._sh_timer) {\n            window.clearTimeout(self._sh_timer);\n        }\n        self.button.removeClass(\"active\");\n        self._sh_timer =  window.setTimeout(function() {\n            self.picker.addClass(\"hidden\");\n        }, 500);\n        trigger(self, \"picker.hide\", [self.picker]);\n        return self;\n    }\n\n    EmojioneArea.prototype.enable = function () {\n        var self = this;\n        var next = function () {\n            self.disabled = false;\n            self.editor.prop('contenteditable', true);\n            self.button.show();\n            var editor = self[(self.standalone) ? \"button\" : \"editor\"];\n            editor.parent().removeClass('emojionearea-disable');\n            trigger(self, 'enabled', [editor]);\n        };\n        self.isReady ? next() : self.on(\"ready\", next);\n        return self;\n    }\n\n    EmojioneArea.prototype.disable = function () {\n        var self = this;\n        self.disabled = true;\n        var next = function () {\n            self.editor.prop('contenteditable', false);\n            self.hidePicker();\n            self.button.hide();\n            var editor = self[(self.standalone) ? \"button\" : \"editor\"];\n            editor.parent().addClass('emojionearea-disable');\n            trigger(self, 'disabled', [editor]);\n        };\n        self.isReady ? next() : self.on(\"ready\", next);\n        return self;\n    }\n\n    $.fn.emojioneArea = function(options) {\n        return this.each(function() {\n            if (!!this.emojioneArea) return this.emojioneArea;\n            $.data(this, 'emojioneArea', this.emojioneArea = new EmojioneArea($(this), options));\n            return this.emojioneArea;\n        });\n    };\n\n    $.fn.emojioneArea.defaults = getDefaultOptions();\n\n    $.fn.emojioneAreaText = function(options) {\n        options = getOptions(options);\n\n        var self = this, pseudoSelf = {\n            shortnames: (options && typeof options.shortnames !== 'undefined' ? options.shortnames : true),\n            emojiTemplate: '<img alt=\"{alt}\" class=\"emojione' + (options && options.sprite && emojioneSupportMode < 3 ? '-{uni}\" src=\"' + blankImg : 'emoji\" src=\"{img}') + '\"/>'\n        };\n\n        loadEmojione(options);\n        emojioneReady(function() {\n            self.each(function() {\n                var $this = $(this);\n                if (!$this.hasClass('emojionearea-text')) {\n                    $this.addClass('emojionearea-text').html(htmlFromText(($this.is('TEXTAREA') || $this.is('INPUT') ? $this.val() : $this.text()), pseudoSelf));\n                }\n                return $this;\n            });\n        });\n\n        return this;\n    };\n\n    return EmojioneArea;\n}, window ) );\n"],"file":"emojionearea.min.js"}