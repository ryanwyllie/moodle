define(["jquery","core/custom_interaction_events","core_message/notification_preference","core_message/notification_processor_settings"],function(a,b,c,d){var e={PREFERENCE:"[data-state]",PREFERENCE_ROW:".preference-row",PREFERENCE_INPUT:"[data-state] input",PROCESSOR_SETTING:"[data-processor-setting]"},f=function(b){this.root=a(b),this.userId=this.root.attr("data-user-id"),this.registerEventListeners()};return f.prototype.isDisabled=function(){return this.root.hasClass("disabled")},f.prototype.setDisabled=function(){this.root.addClass("disabled"),this.root.find(e.PREFERENCE_INPUT).prop("disabled",!0)},f.prototype.setEnabled=function(){this.root.removeClass("disabled"),this.root.find(e.PREFERENCE_INPUT).prop("disabled",!1)},f.prototype.registerEventListeners=function(){b.define(this.root,[b.events.activate]),this.root.on("change",function(b){if(!this.isDisabled()){var d=a(b.target).closest(e.PREFERENCE),f=a(b.target).closest(e.PREFERENCE_ROW),g=new c(f,this.userId);d.addClass("loading"),g.save().always(function(){d.removeClass("loading")})}}.bind(this)),this.root.on(b.events.activate,e.PROCESSOR_SETTING,function(b){var c=a(b.target).closest(e.PROCESSOR_SETTING),f=new d(c);f.show()}),a(document).on("messageprefs:disableall",function(){this.setDisabled()}.bind(this)),a(document).on("messageprefs:enableall",function(){this.setEnabled()}.bind(this))},f});