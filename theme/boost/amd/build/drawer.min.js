'use strict';define('theme_boost/drawer',['jquery','core/custom_interaction_events','core/log'],function($,CustomEvents,Log){var SELECTORS={TOGGLE_REGION:'[data-region="drawer-toggle"]',TOGGLE_ACTION:'[data-action="toggle-drawer"]',TOGGLE_TARGET:'aria-controls',TOGGLE_SIDE:'left',BODY:'body',SECTION:'.list-group-item[href*="#section-"]'},small=768>$(document).width(),Drawer=function(){$(SELECTORS.TOGGLE_REGION).length||Log.debug('Page is missing a drawer region'),$(SELECTORS.TOGGLE_ACTION).length||Log.debug('Page is missing a drawer toggle link'),$(SELECTORS.TOGGLE_REGION).each(function(index,ele){var trigger=$(ele).find(SELECTORS.TOGGLE_ACTION),drawerid=trigger.attr('aria-controls'),drawer=$(document.getElementById(drawerid)),hidden='false'==trigger.attr('aria-expanded'),side=trigger.attr('data-side'),body=$(SELECTORS.BODY),preference=trigger.attr('data-preference');small&&M.util.set_user_preference(preference,'false'),drawer.on('mousewheel DOMMouseScroll',this.preventPageScroll),hidden?trigger.attr('aria-expanded','false'):(body.addClass('drawer-open-'+side),trigger.attr('aria-expanded','true'))}.bind(this)),this.registerEventListeners(),small&&this.closeAll()};return Drawer.prototype.closeAll=function(){$(SELECTORS.TOGGLE_REGION).each(function(index,ele){var trigger=$(ele).find(SELECTORS.TOGGLE_ACTION),side=trigger.attr('data-side'),body=$(SELECTORS.BODY),drawerid=trigger.attr('aria-controls'),drawer=$(document.getElementById(drawerid)),preference=trigger.attr('data-preference');trigger.attr('aria-expanded','false'),body.removeClass('drawer-open-'+side),drawer.attr('aria-hidden','true'),drawer.addClass('closed'),small||M.util.set_user_preference(preference,'false')})},Drawer.prototype.toggleDrawer=function(e){var trigger=$(e.target).closest('[data-action=toggle-drawer]'),drawerid=trigger.attr('aria-controls'),drawer=$(document.getElementById(drawerid)),body=$(SELECTORS.BODY),side=trigger.attr('data-side'),preference=trigger.attr('data-preference');small&&M.util.set_user_preference(preference,'false'),body.addClass('drawer-ease');var open='true'==trigger.attr('aria-expanded');open?(body.removeClass('drawer-open-'+side),trigger.attr('aria-expanded','false'),drawer.attr('aria-hidden','true'),drawer.addClass('closed'),!small&&M.util.set_user_preference(preference,'false')):(trigger.attr('aria-expanded','true'),drawer.attr('aria-hidden','false'),drawer.focus(),body.addClass('drawer-open-'+side),drawer.removeClass('closed'),!small&&M.util.set_user_preference(preference,'true'))},Drawer.prototype.preventPageScroll=function(e){var delta=e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.originalEvent.detail,bottomOverflow=0<=this.scrollTop+$(this).outerHeight()-this.scrollHeight,topOverflow=0>=this.scrollTop;(0>delta&&bottomOverflow||0<delta&&topOverflow)&&e.preventDefault()},Drawer.prototype.registerEventListeners=function(){$(SELECTORS.TOGGLE_ACTION).each(function(index,element){CustomEvents.define($(element),[CustomEvents.events.activate]),$(element).on(CustomEvents.events.activate,function(e,data){this.toggleDrawer(data.originalEvent),data.originalEvent.preventDefault()}.bind(this))}.bind(this)),$(SELECTORS.SECTION).click(function(){small&&this.closeAll()}.bind(this))},{init:function init(){return new Drawer}}});
//# sourceMappingURL=drawer.min.js.map
