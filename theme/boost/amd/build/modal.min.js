"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};define("theme_boost/modal",["exports","jquery","./util"],function(exports,_jquery,_util){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return"undefined"==typeof obj?"undefined":_typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":"undefined"==typeof obj?"undefined":_typeof2(obj)},_typeof(obj)}function _extends(){return _extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i],source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target},_extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}Object.defineProperty(exports,"__esModule",{value:!0});var _jquery2=_interopRequireDefault(_jquery),_util2=_interopRequireDefault(_util),Modal=function($){var EVENT_KEY=".".concat("bs.modal"),JQUERY_NO_CONFLICT=$.fn.modal,Default={backdrop:!0,keyboard:!0,focus:!0,show:!0},DefaultType={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Event={HIDE:"hide".concat(".bs.modal"),HIDDEN:"hidden".concat(".bs.modal"),SHOW:"show".concat(".bs.modal"),SHOWN:"shown".concat(".bs.modal"),FOCUSIN:"focusin".concat(".bs.modal"),RESIZE:"resize".concat(".bs.modal"),CLICK_DISMISS:"click.dismiss".concat(".bs.modal"),KEYDOWN_DISMISS:"keydown.dismiss".concat(".bs.modal"),MOUSEUP_DISMISS:"mouseup.dismiss".concat(".bs.modal"),MOUSEDOWN_DISMISS:"mousedown.dismiss".concat(".bs.modal"),CLICK_DATA_API:"click".concat(".bs.modal").concat(".data-api")},ClassName={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},Selector={DIALOG:".modal-dialog",DATA_TOGGLE:"[data-toggle=\"modal\"]",DATA_DISMISS:"[data-dismiss=\"modal\"]",FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"},Modal=function(){function Modal(element,config){_classCallCheck(this,Modal),this._config=this._getConfig(config),this._element=element,this._dialog=$(element).find(Selector.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return _createClass(Modal,[{key:"toggle",value:function(relatedTarget){return this._isShown?this.hide():this.show(relatedTarget)}},{key:"show",value:function(relatedTarget){var _this=this;if(!(this._isTransitioning||this._isShown)){_util2.default.supportsTransitionEnd()&&$(this._element).hasClass(ClassName.FADE)&&(this._isTransitioning=!0);var showEvent=$.Event(Event.SHOW,{relatedTarget:relatedTarget});$(this._element).trigger(showEvent),this._isShown||showEvent.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),$(document.body).addClass(ClassName.OPEN),this._setEscapeEvent(),this._setResizeEvent(),$(this._element).on(Event.CLICK_DISMISS,Selector.DATA_DISMISS,function(event){return _this.hide(event)}),$(this._dialog).on(Event.MOUSEDOWN_DISMISS,function(){$(_this._element).one(Event.MOUSEUP_DISMISS,function(event){$(event.target).is(_this._element)&&(_this._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return _this._showElement(relatedTarget)}))}}},{key:"hide",value:function(event){var _this2=this;if(event&&event.preventDefault(),!this._isTransitioning&&this._isShown){var hideEvent=$.Event(Event.HIDE);if($(this._element).trigger(hideEvent),this._isShown&&!hideEvent.isDefaultPrevented()){this._isShown=!1;var transition=_util2.default.supportsTransitionEnd()&&$(this._element).hasClass(ClassName.FADE);transition&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),$(document).off(Event.FOCUSIN),$(this._element).removeClass(ClassName.SHOW),$(this._element).off(Event.CLICK_DISMISS),$(this._dialog).off(Event.MOUSEDOWN_DISMISS),transition?$(this._element).one(_util2.default.TRANSITION_END,function(event){return _this2._hideModal(event)}).emulateTransitionEnd(300):this._hideModal()}}}},{key:"dispose",value:function(){$.removeData(this._element,"bs.modal"),$(window,document,this._element,this._backdrop).off(".bs.modal"),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_getConfig",value:function(config){return config=_extends({},Default,config),_util2.default.typeCheckConfig("modal",config,DefaultType),config}},{key:"_showElement",value:function(relatedTarget){var _this3=this,transition=_util2.default.supportsTransitionEnd()&&$(this._element).hasClass(ClassName.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,transition&&_util2.default.reflow(this._element),$(this._element).addClass(ClassName.SHOW),this._config.focus&&this._enforceFocus();var shownEvent=$.Event(Event.SHOWN,{relatedTarget:relatedTarget}),transitionComplete=function(){_this3._config.focus&&_this3._element.focus(),_this3._isTransitioning=!1,$(_this3._element).trigger(shownEvent)};transition?$(this._dialog).one(_util2.default.TRANSITION_END,transitionComplete).emulateTransitionEnd(300):transitionComplete()}},{key:"_enforceFocus",value:function(){var _this4=this;$(document).off(Event.FOCUSIN).on(Event.FOCUSIN,function(event){document!==event.target&&_this4._element!==event.target&&0===$(_this4._element).has(event.target).length&&_this4._element.focus()})}},{key:"_setEscapeEvent",value:function(){var _this5=this;this._isShown&&this._config.keyboard?$(this._element).on(Event.KEYDOWN_DISMISS,function(event){27===event.which&&(event.preventDefault(),_this5.hide())}):!this._isShown&&$(this._element).off(Event.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){var _this6=this;this._isShown?$(window).on(Event.RESIZE,function(event){return _this6.handleUpdate(event)}):$(window).off(Event.RESIZE)}},{key:"_hideModal",value:function(){var _this7=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){$(document.body).removeClass(ClassName.OPEN),_this7._resetAdjustments(),_this7._resetScrollbar(),$(_this7._element).trigger(Event.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&($(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(callback){var _this8=this,animate=$(this._element).hasClass(ClassName.FADE)?ClassName.FADE:"";if(this._isShown&&this._config.backdrop){var doAnimate=_util2.default.supportsTransitionEnd()&&animate;if(this._backdrop=document.createElement("div"),this._backdrop.className=ClassName.BACKDROP,animate&&$(this._backdrop).addClass(animate),$(this._backdrop).appendTo(document.body),$(this._element).on(Event.CLICK_DISMISS,function(event){return _this8._ignoreBackdropClick?void(_this8._ignoreBackdropClick=!1):void(event.target!==event.currentTarget||("static"===_this8._config.backdrop?_this8._element.focus():_this8.hide()))}),doAnimate&&_util2.default.reflow(this._backdrop),$(this._backdrop).addClass(ClassName.SHOW),!callback)return;if(!doAnimate)return void callback();$(this._backdrop).one(_util2.default.TRANSITION_END,callback).emulateTransitionEnd(150)}else if(!this._isShown&&this._backdrop){$(this._backdrop).removeClass(ClassName.SHOW);var callbackRemove=function(){_this8._removeBackdrop(),callback&&callback()};_util2.default.supportsTransitionEnd()&&$(this._element).hasClass(ClassName.FADE)?$(this._backdrop).one(_util2.default.TRANSITION_END,callbackRemove).emulateTransitionEnd(150):callbackRemove()}else callback&&callback()}},{key:"_adjustDialog",value:function(){var isModalOverflowing=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&isModalOverflowing&&(this._element.style.paddingLeft="".concat(this._scrollbarWidth,"px")),this._isBodyOverflowing&&!isModalOverflowing&&(this._element.style.paddingRight="".concat(this._scrollbarWidth,"px"))}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){var rect=document.body.getBoundingClientRect();this._isBodyOverflowing=rect.left+rect.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var _this9=this;if(this._isBodyOverflowing){$(Selector.FIXED_CONTENT).each(function(index,element){var actualPadding=$(element)[0].style.paddingRight,calculatedPadding=$(element).css("padding-right");$(element).data("padding-right",actualPadding).css("padding-right","".concat(parseFloat(calculatedPadding)+_this9._scrollbarWidth,"px"))}),$(Selector.STICKY_CONTENT).each(function(index,element){var actualMargin=$(element)[0].style.marginRight,calculatedMargin=$(element).css("margin-right");$(element).data("margin-right",actualMargin).css("margin-right","".concat(parseFloat(calculatedMargin)-_this9._scrollbarWidth,"px"))}),$(Selector.NAVBAR_TOGGLER).each(function(index,element){var actualMargin=$(element)[0].style.marginRight,calculatedMargin=$(element).css("margin-right");$(element).data("margin-right",actualMargin).css("margin-right","".concat(parseFloat(calculatedMargin)+_this9._scrollbarWidth,"px"))});var actualPadding=document.body.style.paddingRight,calculatedPadding=$("body").css("padding-right");$("body").data("padding-right",actualPadding).css("padding-right","".concat(parseFloat(calculatedPadding)+this._scrollbarWidth,"px"))}}},{key:"_resetScrollbar",value:function(){$(Selector.FIXED_CONTENT).each(function(index,element){var padding=$(element).data("padding-right");"undefined"!=typeof padding&&$(element).css("padding-right",padding).removeData("padding-right")}),$("".concat(Selector.STICKY_CONTENT,", ").concat(Selector.NAVBAR_TOGGLER)).each(function(index,element){var margin=$(element).data("margin-right");"undefined"!=typeof margin&&$(element).css("margin-right",margin).removeData("margin-right")});var padding=$("body").data("padding-right");"undefined"!=typeof padding&&$("body").css("padding-right",padding).removeData("padding-right")}},{key:"_getScrollbarWidth",value:function(){var scrollDiv=document.createElement("div");scrollDiv.className=ClassName.SCROLLBAR_MEASURER,document.body.appendChild(scrollDiv);var scrollbarWidth=scrollDiv.getBoundingClientRect().width-scrollDiv.clientWidth;return document.body.removeChild(scrollDiv),scrollbarWidth}}],[{key:"_jQueryInterface",value:function(config,relatedTarget){return this.each(function(){var data=$(this).data("bs.modal"),_config=_extends({},Modal.Default,$(this).data(),"object"===_typeof(config)&&config);if(data||(data=new Modal(this,_config),$(this).data("bs.modal",data)),"string"==typeof config){if("undefined"==typeof data[config])throw new TypeError("No method named \"".concat(config,"\""));data[config](relatedTarget)}else _config.show&&data.show(relatedTarget)})}},{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return Default}}]),Modal}();return $(document).on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,function(event){var target,_this10=this,selector=_util2.default.getSelectorFromElement(this);selector&&(target=$(selector)[0]);var config=$(target).data("bs.modal")?"toggle":_extends({},$(target).data(),$(this).data());("A"===this.tagName||"AREA"===this.tagName)&&event.preventDefault();var $target=$(target).one(Event.SHOW,function(showEvent){showEvent.isDefaultPrevented()||$target.one(Event.HIDDEN,function(){$(_this10).is(":visible")&&_this10.focus()})});Modal._jQueryInterface.call($(target),config,this)}),$.fn.modal=Modal._jQueryInterface,$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=JQUERY_NO_CONFLICT,Modal._jQueryInterface},Modal}(_jquery2.default);exports.default=Modal});
//# sourceMappingURL=modal.min.js.map
