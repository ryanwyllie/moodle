{"version":3,"sources":["../src/editorjs_plugin_template_base.js"],"names":["TemplateBase","data","config","template","wrapper","tree","document","createElement","VDOMVirtualise","virtualise","renderFromTemplate","registerEventListeners","html","Templates","syncRender","newTree","VirtualHTML","virtualHTML","patches","VirtualDOM","diff","patch"],"mappings":"mPAsBA,OACA,OACA,OACA,O,uXAEqBA,CAAAA,C,YACjB,aAA8B,IAAhBC,CAAAA,CAAgB,GAAhBA,IAAgB,CAAVC,CAAU,GAAVA,MAAU,WAC1B,KAAKD,IAAL,CAAYA,CAAZ,CACA,KAAKE,QAAL,CAAgBD,CAAM,CAACC,QAAvB,CACA,KAAKC,OAAL,CAAe,IAAf,CACA,KAAKC,IAAL,CAAY,IACf,C,0EAEwB,CAExB,C,uCAEQ,CACL,KAAKD,OAAL,CAAeE,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAf,CACA,KAAKF,IAAL,CAAYG,UAAeC,UAAf,CAA0B,KAAKL,OAA/B,CAAZ,CACA,KAAKM,kBAAL,GACA,KAAKC,sBAAL,CAA4B,KAAKP,OAAjC,CAA0C,KAAKH,IAA/C,EAEA,MAAO,MAAKG,OACf,C,+DAEoB,IACXQ,CAAAA,CAAI,CAAGC,UAAUC,UAAV,CAAqB,KAAKX,QAA1B,CAAoC,KAAKF,IAAzC,CADI,CAGXc,CAAO,CAAGC,UAAYC,WAAZ,gBAAgCL,CAAhC,WAHC,CAIXM,CAAO,CAAGC,UAAWC,IAAX,CAAgB,KAAKf,IAArB,CAA2BU,CAA3B,CAJC,CAKjBI,UAAWE,KAAX,CAAiB,KAAKjB,OAAtB,CAA+Bc,CAA/B,EACA,KAAKb,IAAL,CAAYU,CACf,C,mCAEM,CACH,MAAO,MAAKd,IACf,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * EditorJS plugin base for using template to render.\n *\n * @copyright  2019 Ryan Wyllie <ryan@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport VirtualHTML from 'core/virtual-html';\nimport VirtualDOM from 'core/virtual-dom';\nimport VDOMVirtualise from 'core/vdom-virtualise';\nimport Templates from 'core/templates';\n\nexport default class TemplateBase {\n    constructor({ data, config }) {\n        this.data = data;\n        this.template = config.template;\n        this.wrapper = null;\n        this.tree = null;\n    }\n\n    registerEventListeners() {\n        // Override me.\n    }\n\n    render() {\n        this.wrapper = document.createElement('div');\n        this.tree = VDOMVirtualise.virtualise(this.wrapper);\n        this.renderFromTemplate();\n        this.registerEventListeners(this.wrapper, this.data);\n\n        return this.wrapper;\n    }\n\n    renderFromTemplate() {\n        const html = Templates.syncRender(this.template, this.data);\n        // Add our wrapping div so that we don't replace the root node.\n        const newTree = VirtualHTML.virtualHTML(`<div>${html}</div>`);\n        const patches = VirtualDOM.diff(this.tree, newTree);\n        VirtualDOM.patch(this.wrapper, patches);\n        this.tree = newTree;\n    }\n\n    save() {\n        return this.data;\n    }\n}"],"file":"editorjs_plugin_template_base.min.js"}