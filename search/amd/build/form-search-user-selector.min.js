'use strict';define('core_search/form-search-user-selector',['jquery','core/ajax','core/templates'],function($,Ajax,Templates){return{processResults:function processResults(selector,results){var users=[];return $.each(results,function(index,user){users.push({value:user.id,label:user._label})}),users},transport:function transport(selector,query,success,failure){var promise,args={query:query},courseid=$(selector).attr('withincourseid');args.courseid='undefined'!=typeof courseid&&''!==$('#id_searchwithin').val()?courseid:0,promise=Ajax.call([{methodname:'core_search_get_relevant_users',args:args}]),promise[0].then(function(results){var promises=[];return $.each(results,function(index,user){promises.push(Templates.render('core_search/form-user-selector-suggestion',user))}),$.when.apply($.when,promises).then(function(){var args=arguments,i=0;return $.each(results,function(index,user){user._label=args[i++]}),void success(results)})}).fail(failure)}}});
//# sourceMappingURL=form-search-user-selector.min.js.map
