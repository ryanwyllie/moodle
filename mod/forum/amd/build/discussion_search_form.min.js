define ("mod_forum/discussion_search_form",["exports","core/key_codes"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);var c={ADVANCED_SEARCH_FORM:"[data-region=\"advanced-search-form\"]",ADVANCED_SEARCH_FORM_FIRST_FOCUS:"input[name=\"words\"]",ADVANCED_SEARCH_FORM_SHOW_BUTTON:"[data-action=\"show-advanced-search-form\"]",QUICK_SEARCH_FORM:"[data-region=\"quick-search-form\"]",QUICK_SEARCH_FORM_INPUT:"input[name=\"search\"]",QUICK_SEARCH_FORM_SUBMIT_BUTTON:"button[type=\"submit\"]",TIME_FROM_TOGGLE:"input[name='timefromrestrict']",TIME_FROM_DATE_FIELDS:"select[name^=from]",TIME_FROM_HIDDEN_DATE_FIELDS:"input[name^=hfrom]",TIME_TO_TOGGLE:"input[name='timetorestrict']",TIME_TO_DATE_FIELDS:"select[name^=to]",TIME_TO_HIDDEN_DATE_FIELDS:"input[name^=hto]"},d=function(a){return a.querySelector(c.ADVANCED_SEARCH_FORM)},e=function(a){return a.querySelector(c.QUICK_SEARCH_FORM)},f=function(a){return a.querySelector(c.TIME_FROM_TOGGLE)},g=function(a){return a.querySelector(c.TIME_TO_TOGGLE)},h=function(a){return a.querySelector(c.ADVANCED_SEARCH_FORM_SHOW_BUTTON)},i=function(a){return a.querySelector(c.ADVANCED_SEARCH_FORM_FIRST_FOCUS)},j=function(a){return a.querySelector(c.QUICK_SEARCH_FORM_INPUT)},k=function(a){return a.querySelector(c.QUICK_SEARCH_FORM_SUBMIT_BUTTON)},l=function(a,b,c,d){a.querySelectorAll(b).forEach(function(a){if(d){a.setAttribute("disabled",!0)}else{a.removeAttribute("disabled")}});a.querySelectorAll(c).forEach(function(a){a.value=d?1:0})},m=function(a,b){l(a,c.TIME_FROM_DATE_FIELDS,c.TIME_FROM_HIDDEN_DATE_FIELDS,!b.checked)},n=function(a,b){l(a,c.TIME_TO_DATE_FIELDS,c.TIME_TO_HIDDEN_DATE_FIELDS,!b.checked)},o=function(a,b,c){a.classList.remove("hidden");b.classList.add("hidden");b.setAttribute("aria-expanded","true");c.setAttribute("disabled",!0);i(a).focus()},p=function(a,b,c){a.classList.add("hidden");b.classList.remove("hidden");b.setAttribute("aria-expanded","false");c.removeAttribute("disabled")};a.default=function(a){var c=d(a),i=e(a),l=j(i),q=k(i),r=f(c),s=g(c),t=h(i),u=!1;m(c,r);n(c,s);r.addEventListener("click",function(){return m(c,r)});s.addEventListener("click",function(){return n(c,s)});t.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();o(c,t,q);u=!0});document.body.addEventListener("keydown",function(a){if(u&&a.keyCode==b.default.escape){p(c,t,q);l.focus();u=!1}});document.body.addEventListener("click",function(a){if(u&&!c.contains(a.target)){p(c,t,q);u=!1}})};return a.default});
//# sourceMappingURL=discussion_search_form.min.js.map
