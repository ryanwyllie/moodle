define ("mod_forum/posts_list",["jquery","core/templates","core/notification","mod_forum/selectors","mod_forum/inpage_reply"],function(a,b,c,d,e){var f={IN_PAGE_REPLY_VISIBILITY_CHANGE:"mod-forum-in-page-reply-visibility-change"},g=function(g,h){g.on("click",d.post.inpageReplyLink,function(g){g.preventDefault();if(window.location.hash){var i=window.location.href.split("#")[0];history.pushState({},document.title,i)}var j=a(g.currentTarget),k=j.closest(d.post.post),l=k.children().not(d.post.repliesContainer),m=l.find(d.post.forumCoreContent),n=m.find(d.post.forumSubject),o=l.filter(d.post.inpageReplyContainer);if(!o.length){o=l.find(d.post.inpageReplyContainer).first()}if(!o.find(d.post.inpageReplyContent).length){var p=m.find(d.post.authorName).text(),q=a.extend({postid:k.data("post-id"),reply_url:j.attr("href"),sesskey:M.cfg.sesskey,parentsubject:n.html(),parentauthorname:p,canreplyprivately:j.data("can-reply-privately"),postformat:e.CONTENT_FORMATS.MOODLE},h.context);b.render(h.template,q).then(function(a,c){return b.appendNodeContents(o,a,c)}).then(function(){var a=o.find(d.post.inpageReplyContent);a.attr("aria-hidden","false");a.trigger(f.IN_PAGE_REPLY_VISIBILITY_CHANGE,!0);return a.slideToggle(200,function(){a.find("textarea").focus()})}).fail(c.exception)}else{var r=o.find(d.post.inpageReplyContent),s="false"==r.attr("aria-hidden");if(s){r.attr("aria-hidden","true");r.trigger(f.IN_PAGE_REPLY_VISIBILITY_CHANGE,!1)}else{r.attr("aria-hidden","false");r.trigger(f.IN_PAGE_REPLY_VISIBILITY_CHANGE,!0)}r.slideToggle(200,function(){if(!s){r.find("textarea").focus()}})}})};return{init:function init(a,b,c){b=b?b:{};b.template=b.template?b.template:"mod_forum/inpage_reply";b.context=b.context?b.context:{};g(a,b);e.init(a,c)},events:f}});
//# sourceMappingURL=posts_list.min.js.map
