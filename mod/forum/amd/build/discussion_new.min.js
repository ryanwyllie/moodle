define ("mod_forum/discussion_new",["jquery","core/auto_rows","core/custom_interaction_events","mod_forum/selectors","mod_forum/discussion","mod_forum/posts_list","mod_forum/lock_toggle","mod_forum/favourite_toggle","mod_forum/pin_toggle"],function(a,b,c,d,e,f,g,h,i){var j=function(c){b.init(c);c.on(f.events.IN_PAGE_REPLY_VISIBILITY_CHANGE,d.post.inpageReplyContent,function(b,c){var e=a(b.target).closest(d.post.inpageReplyContent),f=e.closest(d.post.post),g=f.children(d.post.replyVisibilityToggleContainer),h=f.children(d.post.repliesContainer),i=0<h.children().length;if(g.length&&i){var j=g.find(d.post.showReplies),k=g.find(d.post.hideReplies);if(c){h.slideUp(200,function(){j.removeClass("hidden");k.addClass("hidden");g.removeClass("hidden")})}else{g.addClass("hidden");h.slideDown(200)}}});c.on("click",d.post.showReplies,function(b){var c=a(b.target).closest(d.post.showReplies),e=c.closest(d.post.replyVisibilityToggleContainer),f=e.find(d.post.hideReplies),g=e.closest(d.post.post),h=g.children(d.post.repliesContainer);h.slideDown(200);f.removeClass("hidden");c.addClass("hidden")});c.on("click",d.post.hideReplies,function(b){var c=a(b.target).closest(d.post.hideReplies),e=c.parent(),f=e.find(d.post.showReplies),g=e.closest(d.post.post),h=g.children(d.post.repliesContainer);h.slideUp(200);f.removeClass("hidden");c.addClass("hidden")})};return{init:function init(b,c){j(b);e.init(b);f.init(b,{template:"mod_forum/inpage_reply_new",context:c},{template:"mod_forum/forum_discussion_post_new_reply",context:{}});var d=a("[data-container=\"discussion-tools\"]");g.init(d);h.init(d);i.init(d)}}});
//# sourceMappingURL=discussion_new.min.js.map
