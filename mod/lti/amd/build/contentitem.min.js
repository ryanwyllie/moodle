'use strict';define('mod_lti/contentitem',['jquery','core/notification','core/str','core/templates','mod_lti/form-field','core/modal_factory','core/modal_events'],function($,notification,str,templates,FormField,ModalFactory,ModalEvents){var dialogue,doneCallback,ltiFormFields=[new FormField('name',FormField.TYPES.TEXT,!1,''),new FormField('introeditor',FormField.TYPES.EDITOR,!1,''),new FormField('toolurl',FormField.TYPES.TEXT,!0,''),new FormField('securetoolurl',FormField.TYPES.TEXT,!0,''),new FormField('instructorchoiceacceptgrades',FormField.TYPES.CHECKBOX,!0,!0),new FormField('instructorchoicesendname',FormField.TYPES.CHECKBOX,!0,!0),new FormField('instructorchoicesendemailaddr',FormField.TYPES.CHECKBOX,!0,!0),new FormField('instructorcustomparameters',FormField.TYPES.TEXT,!0,''),new FormField('icon',FormField.TYPES.TEXT,!0,''),new FormField('secureicon',FormField.TYPES.TEXT,!0,''),new FormField('launchcontainer',FormField.TYPES.SELECT,!0,0),new FormField('grade_modgrade_point',FormField.TYPES.TEXT,!1,''),new FormField('cmidnumber',FormField.TYPES.TEXT,!0,'')];return window.processContentItemReturnData=function(returnData){dialogue&&dialogue.hide();for(var index in ltiFormFields){var field=ltiFormFields[index],value=null;'undefined'!==$.type(returnData[field.name])&&(value=returnData[field.name]),field.setFieldValue(value)}doneCallback&&doneCallback()},{init:function init(url,postData,cb){doneCallback=cb;var bodyPromise=templates.render('mod_lti/contentitem',{url:url,postData:postData});return dialogue?(dialogue.setBody(bodyPromise),void dialogue.show()):void str.get_string('selectcontent','lti').then(function(title){return ModalFactory.create({title:title,body:bodyPromise,large:!0})}).then(function(modal){return dialogue=modal,modal.getRoot().on(ModalEvents.hidden,function(){modal.setBody(''),notification.fetchNotifications()}),void modal.show()}).catch(notification.exception)}}});
//# sourceMappingURL=contentitem.min.js.map
