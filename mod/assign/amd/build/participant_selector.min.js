'use strict';define('mod_assign/participant_selector',['core/ajax','jquery','core/templates'],function(ajax,$,templates){return{processResults:function processResults(selector,data){return data},transport:function transport(selector,query,success,failure){var assignmentid=$(selector).attr('data-assignmentid'),groupid=$(selector).attr('data-groupid'),filters=$('[data-region="configure-filters"] input[type="checkbox"]'),filterstrings=[];filters.each(function(index,element){filterstrings[$(element).attr('name')]=$(element).prop('checked')}),ajax.call([{methodname:'mod_assign_list_participants',args:{assignid:assignmentid,groupid:groupid,filter:query,limit:30,includeenrolments:!1}}])[0].then(function(results){var promises=[],identityfields=$('[data-showuseridentity]').data('showuseridentity').split(',');return $.each(results,function(index,user){var ctx=user,identity=[],show=!0;filterstrings.filter_submitted&&!user.submitted&&(show=!1),filterstrings.filter_notsubmitted&&user.submitted&&(show=!1),filterstrings.filter_requiregrading&&!user.requiregrading&&(show=!1),filterstrings.filter_grantedextension&&!user.grantedextension&&(show=!1),show&&($.each(identityfields,function(i,k){'undefined'!=typeof user[k]&&''!==user[k]&&(ctx.hasidentity=!0,identity.push(user[k]))}),ctx.identity=identity.join(', '),promises.push(templates.render('mod_assign/list_participant_user_summary',ctx).then(function(html){return{value:user.id,label:html}})))}),$.when.apply($,promises)}).then(function(){var users=[];return arguments[0]&&(users=Array.prototype.slice.call(arguments)),void success(users)}).catch(failure)}}});
//# sourceMappingURL=participant_selector.min.js.map
