define(["jquery","core/custom_interaction_events","block_myoverview/repository","block_myoverview/view","block_myoverview/selectors"],function(a,b,c,d,e){var f={FILTERS:'[data-region="filter"]',FILTER_OPTION:"[data-filter]",DISPLAY_OPTION:"[data-display-option]"},g=function(a,b){var d=null;d="display"==a?"block_myoverview_user_view_preference":"sort"==a?"block_myoverview_user_sort_preference":"block_myoverview_user_grouping_preference",c.updateUserPreferences({preferences:[{type:d,value:b}]})},h=function(c){var h=c.find(f.FILTERS),i=c.find(e.courseView.region);b.define(h,[b.events.activate]),h.on(b.events.activate,f.FILTER_OPTION,function(b,e){var f=a(b.target);if(!f.hasClass("active")){var h=f.attr("data-filter"),j=f.attr("data-pref");i.attr("data-"+h,f.attr("data-value")),g(h,j),d.resetFilters(c),e.originalEvent.preventDefault()}}),h.on(b.events.activate,f.DISPLAY_OPTION,function(b,e){var f=a(b.target);if(!f.hasClass("active")){var h=f.attr("data-display-option"),j=f.attr("data-pref");i.attr("data-display",f.attr("data-value")),g(h,j),d.resetDisplay(c),e.originalEvent.preventDefault()}})},i=function(b){b=a(b),h(b)};return{init:i}});