{"version":3,"sources":["../src/paging_content.js"],"names":["define","$","Templates","PagingBar","SELECTORS","ROOT","PAGE_REGION","PagingContent","root","pagingBarElement","pagingBar","rootSelector","prototype","createPage","pageNumber","loadContent","then","html","js","appendNodeContents","bind","findPage","find","showPage","existingPage","addClass","length","removeClass","done","newPage","registerEventListeners","on","events","PAGE_SELECTED","e","data","isSamePage"],"mappings":"aAuBAA,yCAAO,CAAC,QAAD,CAAW,gBAAX,CAA6B,6BAA7B,CAAP,CACQ,SAASC,CAAT,CAAYC,SAAZ,CAAuBC,SAAvB,CAAkC,IAElCC,WAAY,CACZC,KAAM,gCADM,CAEZC,YAAa,qCAFD,CAFsB,CAclCC,cAAgB,SAASC,IAAT,CAAeC,gBAAf,CAAiC,CACjD,KAAKD,IAAL,CAAYP,EAAEO,IAAF,CADqC,CAEjD,KAAKE,SAAL,CAAiBT,EAAEQ,gBAAF,CAEpB,CAlBqC,CA+EtC,MA3DAF,eAAcI,YAAd,CAA6BP,UAAUC,IA2DvC,CAnDAE,cAAcK,SAAd,CAAwBC,UAAxB,CAAqC,SAASC,UAAT,CAAqB,CAEtD,MAAO,MAAKC,WAAL,CAAiBD,UAAjB,EAA6BE,IAA7B,CAAkC,SAASC,IAAT,CAAeC,EAAf,CAAmB,CACxDhB,UAAUiB,kBAAV,CAA6B,KAAKX,IAAlC,CAAwCS,IAAxC,CAA8CC,EAA9C,CACH,CAFwC,CAEvCE,IAFuC,CAElC,IAFkC,CAAlC,EAEOJ,IAFP,CAEY,UAAW,CACtB,MAAO,MAAKK,QAAL,CAAcP,UAAd,CACV,CAFc,CAEbM,IAFa,CAER,IAFQ,CAFZ,CAMV,CA2CD,CAnCAb,cAAcK,SAAd,CAAwBS,QAAxB,CAAmC,SAASP,UAAT,CAAqB,CACpD,MAAO,MAAKN,IAAL,CAAUc,IAAV,CAAe,eAAiBR,UAAjB,CAA8B,IAA7C,CACV,CAiCD,CA1BAP,cAAcK,SAAd,CAAwBW,QAAxB,CAAmC,SAAST,UAAT,CAAqB,CAEpD,GAAIU,cAAe,KAAKH,QAAL,CAAcP,UAAd,CAAnB,CACA,KAAKN,IAAL,CAAUc,IAAV,CAAelB,UAAUE,WAAzB,EAAsCmB,QAAtC,CAA+C,QAA/C,CAHoD,CAKhDD,aAAaE,MALmC,CAMhDF,aAAaG,WAAb,CAAyB,QAAzB,CANgD,CAQhD,KAAKd,UAAL,CAAgBC,UAAhB,EAA4Bc,IAA5B,CAAiC,SAASC,OAAT,CAAkB,CAC/CA,QAAQF,WAAR,CAAoB,QAApB,CACH,CAFD,CAIP,CAcD,CATApB,cAAcK,SAAd,CAAwBkB,sBAAxB,CAAiD,UAAW,CAExD,KAAKpB,SAAL,CAAeqB,EAAf,CAAkB5B,UAAU6B,MAAV,CAAiBC,aAAnC,CAAkD,SAASC,CAAT,CAAYC,IAAZ,CAAkB,CAC3DA,KAAKC,UADsD,EAE5D,KAAKb,QAAL,CAAcY,KAAKrB,UAAnB,CAEP,CAJiD,CAIhDM,IAJgD,CAI3C,IAJ2C,CAAlD,CAKH,CAED,CAAOb,aACV,CAjFD,C","file":"paging_content.min.js","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Paging content module.\n *\n * @module     block_myoverview/paging_content\n * @package    block_myoverview\n * @copyright  2016 Ryan Wyllie <ryan@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/templates', 'block_myoverview/paging_bar'],\n        function($, Templates, PagingBar) {\n\n    var SELECTORS = {\n        ROOT: '[data-region=\"paging-content\"]',\n        PAGE_REGION: '[data-region=\"paging-content-item\"]'\n    };\n\n    /**\n     * Constructor of the paging content module.\n     *\n     * @param {object} root\n     * @param {object} pagingBarElement\n     * @constructor\n     */\n    var PagingContent = function(root, pagingBarElement) {\n        this.root = $(root);\n        this.pagingBar = $(pagingBarElement);\n\n    };\n\n    PagingContent.rootSelector = SELECTORS.ROOT;\n\n    /**\n     * Load content and create page.\n     *\n     * @param {Number} pageNumber\n     * @returns {*|Promise}\n     */\n    PagingContent.prototype.createPage = function(pageNumber) {\n\n        return this.loadContent(pageNumber).then(function(html, js) {\n            Templates.appendNodeContents(this.root, html, js);\n        }.bind(this)).then(function() {\n                return this.findPage(pageNumber);\n            }.bind(this)\n        );\n    };\n\n    /**\n     * Find a page by the number.\n     *\n     * @param {Number} pageNumber The number of the page to be found.\n     * @returns {*} Page root\n     */\n    PagingContent.prototype.findPage = function(pageNumber) {\n        return this.root.find('[data-page=\"' + pageNumber + '\"]');\n    };\n\n    /**\n     * Make a page visible.\n     *\n     * @param {Number} pageNumber The number of the page to be visible.\n     */\n    PagingContent.prototype.showPage = function(pageNumber) {\n\n        var existingPage = this.findPage(pageNumber);\n        this.root.find(SELECTORS.PAGE_REGION).addClass('hidden');\n\n        if (existingPage.length) {\n            existingPage.removeClass('hidden');\n        } else {\n            this.createPage(pageNumber).done(function(newPage) {\n                newPage.removeClass('hidden');\n            });\n        }\n    };\n\n    /**\n     * Event listeners.\n     */\n    PagingContent.prototype.registerEventListeners = function() {\n\n        this.pagingBar.on(PagingBar.events.PAGE_SELECTED, function(e, data) {\n            if (!data.isSamePage) {\n                this.showPage(data.pageNumber);\n            }\n        }.bind(this));\n    };\n\n    return PagingContent;\n});\n"]}