{"version":3,"sources":["../src/paging_bar.js"],"names":["define","$","CustomEvents","SELECTORS","ROOT","PAGE_ITEM","ACTIVE_PAGE_ITEM","EVENTS","PAGE_SELECTED","getPageByNumber","root","pageNumber","find","getPageNumber","page","attr","registerEventListeners","events","activate","on","e","data","target","closest","activePage","isSamePage","removeClass","addClass","trigger","originalEvent","preventDefault","rootSelector"],"mappings":"aAuBAA,qCAAO,CAAC,QAAD,CAAW,gCAAX,CAAP,CACQ,SAASC,CAAT,CAAYC,YAAZ,CAA0B,IAE1BC,WAAY,CACZC,KAAM,4BADM,CAEZC,UAAW,2BAFC,CAGZC,iBAAkB,kCAHN,CAFc,CAQ1BC,OAAS,CACTC,cAAe,2CADN,CARiB,CAmB1BC,gBAAkB,SAASC,IAAT,CAAeC,UAAf,CAA2B,CAC7C,MAAOD,MAAKE,IAAL,CAAUT,UAAUE,SAAV,CAAsB,qBAAtB,CAA8CM,UAA9C,CAA2D,IAArE,CACV,CArB6B,CA8B1BE,cAAgB,SAASH,IAAT,CAAeI,IAAf,CAAqB,CACrC,GAAIH,YAAaG,KAAKC,IAAL,CAAU,kBAAV,CAAjB,CAQA,MANkB,OAAd,YAMJ,CALIJ,WAAa,CAKjB,CAJyB,MAAd,YAIX,GAHIA,WAAaD,KAAKK,IAAL,CAAU,iBAAV,CAGjB,EAAOJ,UACV,CAxC6B,CAwE9B,MAAO,CACHK,uBA3ByB,QAAzBA,uBAAyB,CAASN,IAAT,CAAe,CACxCA,KAAOT,EAAES,IAAF,CADiC,CAExCR,aAAaF,MAAb,CAAoBU,IAApB,CAA0B,CACtBR,aAAae,MAAb,CAAoBC,QADE,CAA1B,CAFwC,CAMxCR,KAAKS,EAAL,CAAQjB,aAAae,MAAb,CAAoBC,QAA5B,CAAsCf,UAAUE,SAAhD,CAA2D,SAASe,CAAT,CAAYC,IAAZ,CAAkB,IACrEP,MAAOb,EAAEmB,EAAEE,MAAJ,EAAYC,OAAZ,CAAoBpB,UAAUE,SAA9B,CAD8D,CAErEmB,WAAad,KAAKE,IAAL,CAAUT,UAAUG,gBAApB,CAFwD,CAGrEK,WAAaE,cAAcH,IAAd,CAAoBI,IAApB,CAHwD,CAIrEW,WAAad,YAAcE,cAAcH,IAAd,CAAoBc,UAApB,CAJ0C,CAMpEC,UANoE,GAOrEf,KAAKE,IAAL,CAAUT,UAAUE,SAApB,EAA+BqB,WAA/B,CAA2C,QAA3C,CAPqE,CAQrEjB,gBAAgBC,IAAhB,CAAsBC,UAAtB,EAAkCgB,QAAlC,CAA2C,QAA3C,CARqE,EAWzEjB,KAAKkB,OAAL,CAAarB,OAAOC,aAApB,CAAmC,CAAC,CAChCG,WAAYA,UADoB,CAEhCc,WAAYA,UAFoB,CAAD,CAAnC,CAXyE,CAgBzEJ,KAAKQ,aAAL,CAAmBC,cAAnB,EACH,CAjBD,CAkBH,CAEM,CAEHb,OAAQV,MAFL,CAGHwB,aAAc5B,UAAUC,IAHrB,CAKV,CA9ED,C","file":"paging_bar.min.js","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to load and render the paging bar.\n *\n * @module     block_myoverview/paging_bar\n * @package    block_myoverview\n * @copyright  2016 Ryan Wyllie <ryan@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/custom_interaction_events'],\n        function($, CustomEvents) {\n\n    var SELECTORS = {\n        ROOT: '[data-region=\"paging-bar\"]',\n        PAGE_ITEM: '[data-region=\"page-item\"]',\n        ACTIVE_PAGE_ITEM: '[data-region=\"page-item\"].active'\n    };\n\n    var EVENTS = {\n        PAGE_SELECTED: 'block_myoverview-paging-bar-page-selected',\n    };\n\n    /**\n     * Get the page element by number.\n     *\n     * @param {object} root The root element.\n     * @param {Number} pageNumber The page number.\n     * @returns {*}\n     */\n    var getPageByNumber = function(root, pageNumber) {\n        return root.find(SELECTORS.PAGE_ITEM + '[data-page-number=\"' + pageNumber + '\"]');\n    };\n\n    /**\n     * Get the page number.\n     *\n     * @param {object} root The root element.\n     * @param {object} page The page.\n     * @returns {*} the page number\n     */\n    var getPageNumber = function(root, page) {\n        var pageNumber = page.attr('data-page-number');\n\n        if (pageNumber == 'first') {\n            pageNumber = 1;\n        } else if (pageNumber == 'last') {\n            pageNumber = root.attr('data-page-count');\n        }\n\n        return pageNumber;\n    };\n\n    /**\n     * Register event listeners for the module.\n     * @param {object} root The root element.\n     */\n    var registerEventListeners = function(root) {\n        root = $(root);\n        CustomEvents.define(root, [\n            CustomEvents.events.activate\n        ]);\n\n        root.on(CustomEvents.events.activate, SELECTORS.PAGE_ITEM, function(e, data) {\n            var page = $(e.target).closest(SELECTORS.PAGE_ITEM);\n            var activePage = root.find(SELECTORS.ACTIVE_PAGE_ITEM);\n            var pageNumber = getPageNumber(root, page);\n            var isSamePage = pageNumber == getPageNumber(root, activePage);\n\n            if (!isSamePage) {\n                root.find(SELECTORS.PAGE_ITEM).removeClass('active');\n                getPageByNumber(root, pageNumber).addClass('active');\n            }\n\n            root.trigger(EVENTS.PAGE_SELECTED, [{\n                pageNumber: pageNumber,\n                isSamePage: isSamePage,\n            }]);\n\n            data.originalEvent.preventDefault();\n        });\n    };\n\n    return {\n        registerEventListeners: registerEventListeners,\n        events: EVENTS,\n        rootSelector: SELECTORS.ROOT,\n    };\n});\n"]}