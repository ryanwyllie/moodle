define(["jquery","core/notification","block_myoverview/get","core/paged_content_factory","core/templates"],function(a,b,c,d,e){var f={COURSES_CARDS:"block_myoverview/view-cards",COURSES_LIST:"block_myoverview/view-list",NOCOURSES:"block_myoverview/no-courses"},g=[12,24],h=function(a){var b={};return b.display=a.attr("data-display"),b.grouping=a.attr("data-grouping"),b.sort=a.attr("data-sort"),b},i={ignoreControlWhileLoading:!0,controlPlacementBottom:!0},j=function(a,b,d){return c.getEnrolledCourses({offset:d*b,limit:b,classification:a.grouping,sort:a.sort})},k=function(a,c,d){var e=d.pageNumber-1,f=d.limit,g=j(c,f,e).then(function(b){return m(a,b,c)})["catch"](b.exception);return g},l=function(a,b,c){var d=[];return c.forEach(function(c){var e=k(a,b,c);d.push(e)}),d},m=function(a,b,c){if("cards"==c.display)var d=f.COURSES_CARDS;else var d=f.COURSES_LIST;if(b.hascourses)return e.render(d,{courses:b.courses});var g=a.attr("data-nocoursesimg");return e.render(f.NOCOURSES,{nocoursesimg:g})},n=function(c,f){c=a(c);var j=h(c),k=d.createWithLimit(g,function(a){return l(c,j,a)},i);k.then(function(a,b){e.replaceNodeContents(f,a,b)})["catch"](b.exception)},o=function(a,b){n(a,b)};return{init:n,reset:o}});