{"version":3,"sources":["../src/tab_preferences.js"],"names":["define","$","Ajax","CustomEvents","Notification","registerEventListeners","root","events","activate","on","e","tabname","currentTarget","data","window","history","pushState","call","methodname","args","preferences","type","value","fail","exception"],"mappings":"aAuBAA,0CAAO,CAAC,QAAD,CAAW,WAAX,CAAwB,gCAAxB,CACH,mBADG,CAAP,CAC0B,SAASC,CAAT,CAAYC,IAAZ,CAAkBC,YAAlB,CAAgCC,YAAhC,CAA8C,CAiCpE,MAAO,CACHC,uBA3ByB,QAAzBA,uBAAyB,CAASC,IAAT,CAAe,CACxCH,aAAaH,MAAb,CAAoBM,IAApB,CAA0B,CAACH,aAAaI,MAAb,CAAoBC,QAArB,CAA1B,CADwC,CAExCF,KAAKG,EAAL,CAAQN,aAAaI,MAAb,CAAoBC,QAA5B,CAAsC,uBAAtC,CAA6D,SAASE,CAAT,CAAY,CACrE,GAAIC,SAAUV,EAAES,EAAEE,aAAJ,EAAmBC,IAAnB,CAAwB,SAAxB,CAAd,CAGwC,UAApC,QAAOC,QAAOC,OAAP,CAAeC,SAJ2C,EAKjEF,OAAOC,OAAP,CAAeC,SAAf,CAAyB,IAAzB,CAA+B,IAA/B,CAAqC,kBAAoBL,OAAzD,CALiE,CAmBrET,KAAKe,IAAL,CAAU,CAZI,CACVC,WAAY,mCADF,CAEVC,KAAM,CACFC,YAAa,CACT,CACIC,KAAM,2BADV,CAEIC,MAAOX,OAFX,CADS,CADX,CAFI,CAYJ,CAAV,EAAqB,CAArB,EACKY,IADL,CACUnB,aAAaoB,SADvB,CAEH,CArBD,CAsBH,CAEM,CAGV,CArCD,C","file":"tab_preferences.min.js","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript used to save the user's tab preference.\n *\n * @package    block_myoverview\n * @copyright  2017 Mark Nelson <markn@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/custom_interaction_events',\n    'core/notification'], function($, Ajax, CustomEvents, Notification) {\n\n    /**\n     * Registers an event that saves the user's tab preference when switching between them.\n     *\n     * @param {object} root The container element\n     */\n    var registerEventListeners = function(root) {\n        CustomEvents.define(root, [CustomEvents.events.activate]);\n        root.on(CustomEvents.events.activate, \"[data-toggle='tab']\", function(e) {\n            var tabname = $(e.currentTarget).data('tabname');\n            // Bootstrap does not change the URL when using BS tabs, so need to do this here.\n            // Also check to make sure the browser supports the history API.\n            if (typeof window.history.pushState === \"function\") {\n                window.history.pushState(null, null, '?myoverviewtab=' + tabname);\n            }\n            var request = {\n                methodname: 'core_user_update_user_preferences',\n                args: {\n                    preferences: [\n                        {\n                            type: 'block_myoverview_last_tab',\n                            value: tabname\n                        }\n                    ]\n                }\n            };\n\n            Ajax.call([request])[0]\n                .fail(Notification.exception);\n        });\n    };\n\n    return {\n        registerEventListeners: registerEventListeners\n    };\n});\n"]}