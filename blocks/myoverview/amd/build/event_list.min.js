define(["jquery","core/notification","core/templates","block_myoverview/events","block_myoverview/calendar_events_repository"],function(a,b,c,d,e){return{load:function(f){f=a(f);var g=+f.attr("data-start-day"),h=+f.attr("data-end-day"),i=+f.attr("data-limit"),j=+f.attr("data-offset");return f.hasClass("loading")?a.Deferred().resolve():(f.addClass("loading"),f.trigger(d.LOADING_EVENTS),e.query_for_user_by_days(g,h,i,j).then(function(a){return f.trigger(d.LOADED_EVENTS,[{events:a}]),f.attr("data-offset",j+a.length),a}).then(function(a){return c.render("block_myoverview/event-list-items",{events:a}).done(function(a,b){c.appendNodeContents(f,a,b)})}).fail(b.exception).always(function(){f.removeClass("loading")}))}}});