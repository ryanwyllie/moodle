define(["jquery","core/notification","core/templates","block_myoverview/calendar_events_repository"],function(a,b,c,d){var e={EVENT_LIST:'[data-region="event-list"]',LOADING_ICON_CONTAINER:'[data-region="loading-icon-container"]'};return{load:function(f){f=a(f);var g=+f.attr("data-start-day"),h=+f.attr("data-end-day"),i=+f.attr("data-limit"),j=+f.attr("data-offset"),k=f.find(e.LOADING_ICON_CONTAINER);return f.hasClass("loading")?a.Deferred().resolve():(f.addClass("loading"),k.removeClass("hidden"),d.query_for_user_by_days(g,h,i,j).then(function(a){if(f.attr("data-offset",j+a.length),a.length)return c.render("block_myoverview/event-list-items",{events:a}).done(function(a,b){c.appendNodeContents(f,a,b)})}).fail(b.exception).always(function(){f.removeClass("loading"),k.addClass("hidden")}))}}});