'use strict';define('gradingform_guide/comment_chooser',['jquery','core/templates','core/notification','core/yui'],function($,templates,notification){return{initialise:function initialise(criterionId,buttonId,remarkId,commentOptions){function displayChooserDialog(compiledSource,comments){var titleLabel='<label>'+M.util.get_string('insertcomment','gradingform_guide')+'</label>',cancelButtonId='comment-chooser-'+criterionId+'-cancel',cancelButton='<button id="'+cancelButtonId+'">'+M.util.get_string('cancel','moodle')+'</button>',chooserDialog=new M.core.dialogue({modal:!0,headerContent:titleLabel,bodyContent:compiledSource,footerContent:cancelButton,focusAfterHide:'#'+remarkId,id:'comments-chooser-dialog-'+criterionId});$('#'+cancelButtonId).click(function(){chooserDialog.hide()}),$.each(comments,function(index,comment){var commentOptionId='#comment-option-'+criterionId+'-'+comment.id;$(commentOptionId).click(function(){var remarkTextArea=$('#'+remarkId),remarkText=remarkTextArea.val();''!==$.trim(remarkText)&&(remarkText+='\n'),remarkText+=comment.description,remarkTextArea.val(remarkText),chooserDialog.hide()}),$(document).off('keypress',commentOptionId).on('keypress',commentOptionId,function(){var keyCode=event.which||event.keyCode;(13==keyCode||32==keyCode)&&$(commentOptionId).click()})}),chooserDialog.after('visibleChange',function(e){e.prevVal&&!e.newVal&&this.destroy()},chooserDialog),chooserDialog.show()}function generateCommentsChooser(){templates.render('gradingform_guide/comment_chooser',{criterionId:criterionId,comments:commentOptions}).done(function(compiledSource){displayChooserDialog(compiledSource,commentOptions)}).fail(notification.exception)}$('#'+buttonId).click(function(e){e.preventDefault(),generateCommentsChooser()})}}});
//# sourceMappingURL=comment_chooser.min.js.map
