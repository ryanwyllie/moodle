define ("tool_lp/course_competency_settings",["jquery","core/notification","tool_lp/dialogue","core/str","core/ajax","core/templates"],function(a,b,c,d,f,g){var h=function(b){a(b).on("click",this.configureSettings.bind(this))};h.prototype._dialogue=null;h.prototype.configureSettings=function(f){var e=a(f.target).closest("a").data("courseid"),h=a(f.target).closest("a").data("pushratingstouserplans");f.preventDefault();g.render("tool_lp/course_competency_settings",{courseid:e,settings:{pushratingstouserplans:h}}).done(function(a){d.get_string("configurecoursecompetencysettings","tool_lp").done(function(b){this._dialogue=new c(b,a,this.addListeners.bind(this))}.bind(this)).fail(b.exception)}.bind(this)).fail(b.exception)};h.prototype.addListeners=function(){var a=this._find("[data-action=\"save\"]");a.on("click",this.saveSettings.bind(this));var b=this._find("[data-action=\"cancel\"]");b.on("click",this.cancelChanges.bind(this))};h.prototype.cancelChanges=function(a){a.preventDefault();this._dialogue.close()};h.prototype._find=function(b){return a("[data-region=\"coursecompetencysettings\"]").find(b)};h.prototype.saveSettings=function(a){a.preventDefault();var c=this._find("input[name=\"pushratingstouserplans\"]:checked").val(),d=this._find("input[name=\"courseid\"]").val();f.call([{methodname:"core_competency_update_course_competency_settings",args:{courseid:d,settings:{pushratingstouserplans:c}}}])[0].done(function(){this.refreshCourseCompetenciesPage()}.bind(this)).fail(b.exception)};h.prototype.refreshCourseCompetenciesPage=function(){var c=this._find("input[name=\"courseid\"]").val();f.call([{methodname:"tool_lp_data_for_course_competencies_page",args:{courseid:c,moduleid:0}}])[0].done(function(c){g.render("tool_lp/course_competencies_page",c).done(function(b,c){a("[data-region=\"coursecompetenciespage\"]").replaceWith(b);g.runTemplateJS(c);this._dialogue.close()}.bind(this)).fail(b.exception)}.bind(this)).fail(b.exception)};return h});
//# sourceMappingURL=course_competency_settings.min.js.map
