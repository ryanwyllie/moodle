'use strict';define('tool_lp/actionselector',['jquery','core/notification','core/ajax','core/templates','tool_lp/dialogue','tool_lp/event_base'],function($,Notification,Ajax,Templates,Dialogue,EventBase){var ActionSelector=function(title,message,actions,confirm,cancel){var self=this;EventBase.prototype.constructor.apply(this,[]),self._title=title,self._message=message,self._actions=actions,self._confirm=confirm,self._cancel=cancel,self._selectedValue=null,self._reset()};return ActionSelector.prototype=Object.create(EventBase.prototype),ActionSelector.prototype._selectedValue=null,ActionSelector.prototype._popup=null,ActionSelector.prototype._title=null,ActionSelector.prototype._message=null,ActionSelector.prototype._actions=null,ActionSelector.prototype._confirm=null,ActionSelector.prototype._cancel=null,ActionSelector.prototype._afterRender=function(){var self=this;self._find('[data-action="action-selector-confirm"]').attr('disabled','disabled'),self._find('[data-region="action-selector-radio-buttons"]').change(function(){self._selectedValue=$('input[type=\'radio\']:checked').val(),self._find('[data-action="action-selector-confirm"]').removeAttr('disabled'),self._refresh.bind(self)}),self._find('[data-action="action-selector-cancel"]').click(function(e){e.preventDefault(),self.close()}),self._find('[data-action="action-selector-confirm"]').click(function(e){e.preventDefault(),self._selectedValue.length&&(self._trigger('save',{action:self._selectedValue}),self.close())})},ActionSelector.prototype.close=function(){var self=this;self._popup.close(),self._reset()},ActionSelector.prototype.display=function(){var self=this;return self._render().then(function(html){self._popup=new Dialogue(self._title,html,self._afterRender.bind(self))}).fail(Notification.exception)},ActionSelector.prototype._find=function(selector){return $(this._popup.getContent()).find(selector)},ActionSelector.prototype._refresh=function(){var self=this;return self._render().then(function(html){return self._find('[data-region="action-selector"]').replaceWith(html),void self._afterRender()})},ActionSelector.prototype._render=function(){var self=this,choices=[];for(var i in self._actions)choices.push(self._actions[i]);var content={message:self._message,choices:choices,confirm:self._confirm,cancel:self._cancel};return Templates.render('tool_lp/action_selector',content)},ActionSelector.prototype._reset=function(){this._popup=null,this._selectedValue=''},ActionSelector});
//# sourceMappingURL=actionselector.min.js.map
