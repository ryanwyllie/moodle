{"version":3,"sources":["../src/expand_contract.js"],"names":["define","$","url","str","expandedImage","imageUrl","collapsedImage","expandCollapse","targetnode","thisnode","hasClass","removeClass","addClass","attr","find","expandCollapseAll","nextstate","currentstate","iconclassnow","iconclassnext","imagenow","each","data","get_string","then","langString","html","catch","Notification","exception"],"mappings":"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","file":"expand_contract.min.js","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Potential user selector module.\n *\n * @module     tool_dataprivacy/expand_contract\n * @class      page-expand-contract\n * @package    tool_dataprivacy\n * @copyright  2018 Adrian Greeve\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/url', 'core/str'], function($, url, str) {\n\n    var expandedImage = $('<img alt=\"\" src=\"' + url.imageUrl('t/expanded') + '\"/>');\n    var collapsedImage = $('<img alt=\"\" src=\"' + url.imageUrl('t/collapsed') + '\"/>');\n\n    return /** @alias module:tool_dataprivacy/expand-collapse */ {\n        /**\n         * Expand or collapse a selected node.\n         *\n         * @param  {object} targetnode The node that we want to expand / collapse\n         * @param  {object} thisnode The node that was clicked.\n         */\n        expandCollapse: function(targetnode, thisnode) {\n            if (targetnode.hasClass('hide')) {\n                targetnode.removeClass('hide');\n                targetnode.addClass('visible');\n                targetnode.attr('aria-expanded', true);\n                thisnode.find(':header i.fa').removeClass('fa-plus-square');\n                thisnode.find(':header i.fa').addClass('fa-minus-square');\n                thisnode.find(':header img.icon').attr('src', expandedImage.attr('src'));\n            } else {\n                targetnode.removeClass('visible');\n                targetnode.addClass('hide');\n                targetnode.attr('aria-expanded', false);\n                thisnode.find(':header i.fa').removeClass('fa-minus-square');\n                thisnode.find(':header i.fa').addClass('fa-plus-square');\n                thisnode.find(':header img.icon').attr('src', collapsedImage.attr('src'));\n            }\n        },\n\n        /**\n         * Expand or collapse all nodes on this page.\n         *\n         * @param  {string} nextstate The next state to change to.\n         */\n        expandCollapseAll: function(nextstate) {\n            var currentstate = (nextstate == 'visible') ? 'hide' : 'visible';\n            var ariaexpandedstate = (nextstate == 'visible') ? true : false;\n            var iconclassnow = (nextstate == 'visible') ? 'fa-plus-square' : 'fa-minus-square';\n            var iconclassnext = (nextstate == 'visible') ? 'fa-minus-square' : 'fa-plus-square';\n            var imagenow = (nextstate == 'visible') ? expandedImage.attr('src') : collapsedImage.attr('src');\n            $('.' + currentstate).each(function() {\n                $(this).removeClass(currentstate);\n                $(this).addClass(nextstate);\n                $(this).attr('aria-expanded', ariaexpandedstate);\n            });\n            $('.tool_dataprivacy-expand-all').data('visibilityState', currentstate);\n\n            str.get_string(currentstate, 'tool_dataprivacy').then(function(langString) {\n                $('.tool_dataprivacy-expand-all').html(langString);\n                return;\n            }).catch(Notification.exception);\n\n            $(':header i.fa').each(function() {\n                $(this).removeClass(iconclassnow);\n                $(this).addClass(iconclassnext);\n            });\n            $(':header img.icon').each(function() {\n                $(this).attr('src', imagenow);\n            });\n        }\n    };\n});\n"]}