'use strict';define('tool_dataprivacy/categoriesactions',['jquery','core/ajax','core/notification','core/str','core/modal_factory','core/modal_events'],function($,Ajax,Notification,Str,ModalFactory,ModalEvents){var ACTIONS={DELETE:'[data-action="deletecategory"]'},CategoriesActions=function(){this.registerEvents()};return CategoriesActions.prototype.registerEvents=function(){$(ACTIONS.DELETE).click(function(e){e.preventDefault();var id=$(this).data('id'),categoryname=$(this).data('name');Str.get_strings([{key:'deletecategory',component:'tool_dataprivacy',param:categoryname},{key:'deletecategorytext',component:'tool_dataprivacy',param:categoryname}]).then(function(langStrings){var title=langStrings[0],confirmMessage=langStrings[1];return ModalFactory.create({title:title,body:confirmMessage,type:ModalFactory.types.SAVE_CANCEL}).then(function(modal){return modal.setSaveButtonText(title),modal.getRoot().on(ModalEvents.save,function(){Ajax.call([{methodname:'tool_dataprivacy_delete_category',args:{id:id}}])[0].done(function(data){data.result?$('tr[data-categoryid="'+id+'"]').remove():Notification.addNotification({message:data.warnings[0].message,type:'error'})}).fail(Notification.exception)}),modal.getRoot().on(ModalEvents.hidden,function(){modal.destroy()}),modal})}).done(function(modal){modal.show()}).fail(Notification.exception)})},{init:function init(){return new CategoriesActions}}});
//# sourceMappingURL=categoriesactions.min.js.map
