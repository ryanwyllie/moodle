'use strict';define('core_calendar/month_navigation_drag_drop',['jquery','core_calendar/drag_drop_data_store'],function($,DataStore){var SELECTORS={DRAGGABLE:'[draggable="true"][data-region="event-item"]',DROP_ZONE:'[data-drop-zone="nav-link"]'},registered=!1,hoverTimer=null,root=null,updateHoverState=function(target,hovered){hovered?target.addClass('bg-primary text-white'):target.removeClass('bg-primary text-white')},addDropZoneIndicator=function(){root.find(SELECTORS.DROP_ZONE).addClass('drop-target')},removeDropZoneIndicator=function(){root.find(SELECTORS.DROP_ZONE).removeClass('drop-target')},getTargetFromEvent=function(e){var target=$(e.target).closest(SELECTORS.DROP_ZONE);return target.length?target:null},dragstartHandler=function(e){var eventElement=$(e.target).closest(SELECTORS.DRAGGABLE);eventElement.length&&addDropZoneIndicator()},dragoverHandler=function(e){if(DataStore.hasEventId()){e.preventDefault();var target=getTargetFromEvent(e);target&&DataStore.hasEventId()&&(!hoverTimer&&(hoverTimer=setTimeout(function(){target.click(),hoverTimer=null},1000)),updateHoverState(target,!0),removeDropZoneIndicator())}},dragleaveHandler=function(e){if(DataStore.hasEventId()){var target=getTargetFromEvent(e);target&&(hoverTimer&&(clearTimeout(hoverTimer),hoverTimer=null),updateHoverState(target,!1),addDropZoneIndicator(),e.preventDefault())}},dropHandler=function(e){if(DataStore.hasEventId()){removeDropZoneIndicator();var target=getTargetFromEvent(e);target&&(updateHoverState(target,!1),e.preventDefault())}};return{init:function init(rootElement){registered||(document.addEventListener('dragstart',dragstartHandler,!1),document.addEventListener('dragover',dragoverHandler,!1),document.addEventListener('dragleave',dragleaveHandler,!1),document.addEventListener('drop',dropHandler,!1),document.addEventListener('dragend',removeDropZoneIndicator,!1),registered=!0),root=$(rootElement),DataStore.hasEventId()&&addDropZoneIndicator()}}});
//# sourceMappingURL=month_navigation_drag_drop.min.js.map
