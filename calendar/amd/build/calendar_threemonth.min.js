'use strict';define('core_calendar/calendar_threemonth',['jquery','core/notification','core_calendar/selectors','core_calendar/events','core/templates','core_calendar/view_manager'],function($,Notification,CalendarSelectors,CalendarEvents,Templates,CalendarViewManager){var registerCalendarEventListeners=function(root){var body=$('body');body.on(CalendarEvents.monthChanged,function(e,year,month,courseId,categoryId){root.queue(function(next){return processRequest(e,year,month,courseId,categoryId).then(function(){return next()}).fail(Notification.exception)})});var processRequest=function(e,year,month,courseId,categoryId){var newCurrentMonth=root.find('[data-year="'+year+'"][data-month="'+month+'"]'),newParent=newCurrentMonth.closest(CalendarSelectors.calendarPeriods.month),allMonths=root.find(CalendarSelectors.calendarPeriods.month),previousMonth=$(allMonths[0]),nextMonth=$(allMonths[2]),placeHolder=$('<span>');placeHolder.attr('data-template','core_calendar/threemonth_month'),placeHolder.attr('data-includenavigation',!1),placeHolder.attr('data-mini',!0);var placeHolderContainer=$('<div>');placeHolderContainer.hide(),placeHolderContainer.append(placeHolder);var requestYear,requestMonth,oldMonth;return newParent.is(previousMonth)?(placeHolderContainer.insertBefore(previousMonth),requestYear=previousMonth.data('previousYear'),requestMonth=previousMonth.data('previousMonth'),oldMonth=nextMonth):newParent.is(nextMonth)&&(placeHolderContainer.insertAfter(nextMonth),requestYear=nextMonth.data('nextYear'),requestMonth=nextMonth.data('nextMonth'),oldMonth=previousMonth),CalendarViewManager.refreshMonthContent(placeHolder,requestYear,requestMonth,courseId,categoryId,placeHolder).then(function(){var slideUpPromise=$.Deferred(),slideDownPromise=$.Deferred();return oldMonth.slideUp('fast',function(){$(this).remove(),slideUpPromise.resolve()}),placeHolderContainer.slideDown('fast',function(){slideDownPromise.resolve()}),$.when(slideUpPromise,slideDownPromise)})}};return{init:function init(root){root=$(root),registerCalendarEventListeners(root)}}});
//# sourceMappingURL=calendar_threemonth.min.js.map
