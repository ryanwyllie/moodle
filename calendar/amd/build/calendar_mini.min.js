'use strict';define('core_calendar/calendar_mini',['jquery','core_calendar/selectors','core_calendar/events','core_calendar/view_manager'],function($,CalendarSelectors,CalendarEvents,CalendarViewManager){var registerCalendarEventListeners=function(root){var body=$('body'),namespace='.'+root.attr('id');body.on(CalendarEvents.created+namespace,root,reloadMonth),body.on(CalendarEvents.deleted+namespace,root,reloadMonth),body.on(CalendarEvents.updated+namespace,root,reloadMonth),body.on(CalendarEvents.eventMoved+namespace,root,reloadMonth)},reloadMonth=function(e){var root=e.data,body=$('body'),namespace='.'+root.attr('id');root.is(':visible')?CalendarViewManager.reloadCurrentMonth(root):(body.off(CalendarEvents.created+namespace),body.off(CalendarEvents.deleted+namespace),body.off(CalendarEvents.updated+namespace),body.off(CalendarEvents.eventMoved+namespace))},registerEventListeners=function(root){$('body').on(CalendarEvents.filterChanged,function(e,data){var daysWithEvent=root.find(CalendarSelectors.eventType[data.type]);daysWithEvent.toggleClass('calendar_event_'+data.type,!data.hidden)});var namespace='.'+root.attr('id');$('body').on('change'+namespace,CalendarSelectors.elements.courseSelector,function(){if(root.is(':visible')){var selectElement=$(this),courseId=selectElement.val();CalendarViewManager.reloadCurrentMonth(root,courseId,null)}else $('body').off('change'+namespace)})};return{init:function init(root,loadOnInit){root=$(root),CalendarViewManager.init(root),registerEventListeners(root),registerCalendarEventListeners(root),loadOnInit&&CalendarViewManager.reloadCurrentMonth(root)}}});
//# sourceMappingURL=calendar_mini.min.js.map
